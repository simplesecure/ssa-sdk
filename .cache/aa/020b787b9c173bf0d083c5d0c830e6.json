{"id":"GkaI","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db-store/package.json","includedInParent":true,"mtime":1582579778662},{"name":"events","loc":{"line":1,"column":29},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db-store/src/Replicator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/events/events.js"},{"name":"p-map","loc":{"line":2,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db-store/src/Replicator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db-store/node_modules/p-map/index.js"},{"name":"ipfs-log","loc":{"line":3,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db-store/src/Replicator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-log/src/log.js"},{"name":"logplease","loc":{"line":5,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db-store/src/Replicator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/logplease/src/index.js"}],"generated":{"js":"const s=require(\"events\").EventEmitter,e=require(\"p-map\"),t=require(\"ipfs-log\"),i=require(\"logplease\"),r=i.create(\"replicator\",{color:i.Colors.Cyan});i.setLogLevel(\"ERROR\");const h=s=>s.next,u=(s,e)=>s.concat(e),n=s=>null!=s,a=(s,e)=>(s[e]=e,s),o=1;class c extends s{constructor(s,e){super(),this._store=s,this._fetching={},this._stats={tasksRequested:0,tasksStarted:0,tasksProcessed:0},this._buffer=[],this._concurrency=e||128,this._queue={},this._q=new Set,this._flushTimer=setInterval(()=>{0===this.tasksRunning&&Object.keys(this._queue).length>0&&(r.warn(\"Had to flush the queue!\",Object.keys(this._queue).length,\"items in the queue, \",this.tasksRequested,this.tasksFinished,\" tasks requested/finished\"),setTimeout(()=>this._processQueue(),0))},3e3)}get tasksRequested(){return this._stats.tasksRequested}get tasksStarted(){return this._stats.tasksStarted}get tasksRunning(){return this._stats.tasksStarted-this._stats.tasksProcessed}get tasksQueued(){return Math.max(Object.keys(this._queue).length-this.tasksRunning,0)}get tasksFinished(){return this._stats.tasksProcessed}getQueue(){return Object.values(this._queue)}load(s){const e=s=>{const e=s.hash||s;return!this._store._oplog.has(e)&&!this._fetching[e]&&!this._queue[e]};try{s.filter(n).filter(e).forEach(this._addToQueue.bind(this)),setTimeout(()=>this._processQueue(),0)}catch(t){console.error(t)}}stop(){clearInterval(this._flushTimer),this.removeAllListeners(\"load.added\"),this.removeAllListeners(\"load.end\"),this.removeAllListeners(\"load.progress\")}_addToQueue(s){const e=s.hash||s;this._stats.tasksRequested+=1,this._queue[e]=s}async _processQueue(){if(this.tasksRunning<this._concurrency){const s=this._concurrency-this.tasksRunning,t=Object.values(this._queue).slice(0,s).filter(n);t.forEach(s=>delete this._queue[s.hash||s]);const i=s=>s.reduce(u,[]).reduce(a,{}),r=s=>{const e=Object.values(s).filter(n);if(t.length>0&&this._buffer.length>0||0===this.tasksRunning&&this._buffer.length>0){const s=this._buffer.slice();this._buffer=[],this.emit(\"load.end\",s)}e.length>0&&this.load(e)};return e(t,s=>this._processOne(s)).then(i).then(r)}}async _processOne(s){const e=s.hash||s;if(this._store._oplog.has(e)||this._fetching[e])return;this._fetching[e]=e,this.emit(\"load.added\",s),this._stats.tasksStarted+=1;const i=await t.fromEntryHash(this._store._ipfs,this._store.identity,e,{logId:this._store._oplog.id,access:this._store.access,length:o,exclude:[]});this._buffer.push(i);const r=i.values[0];return delete this._queue[e],this._stats.tasksProcessed+=1,this.emit(\"load.progress\",this._id,e,r,null,this._buffer.length),i.values.map(h).reduce(u,[])}}module.exports=c;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"EventEmitter","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"require","original":{"line":1,"column":21},"generated":{"line":1,"column":8}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":1,"column":29},"generated":{"line":1,"column":16}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"EventEmitter","original":{"line":1,"column":39},"generated":{"line":1,"column":26}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"pMap","original":{"line":2,"column":6},"generated":{"line":1,"column":39}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"require","original":{"line":2,"column":13},"generated":{"line":1,"column":41}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":2,"column":21},"generated":{"line":1,"column":49}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Log","original":{"line":3,"column":6},"generated":{"line":1,"column":58}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"require","original":{"line":3,"column":12},"generated":{"line":1,"column":60}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":3,"column":20},"generated":{"line":1,"column":68}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Logger","original":{"line":5,"column":6},"generated":{"line":1,"column":80}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"require","original":{"line":5,"column":15},"generated":{"line":1,"column":82}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":5,"column":23},"generated":{"line":1,"column":90}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"logger","original":{"line":6,"column":6},"generated":{"line":1,"column":103}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Logger","original":{"line":6,"column":15},"generated":{"line":1,"column":105}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"create","original":{"line":6,"column":22},"generated":{"line":1,"column":107}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":6,"column":29},"generated":{"line":1,"column":114}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":6,"column":43},"generated":{"line":1,"column":127}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"color","original":{"line":6,"column":45},"generated":{"line":1,"column":128}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Logger","original":{"line":6,"column":52},"generated":{"line":1,"column":134}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Colors","original":{"line":6,"column":59},"generated":{"line":1,"column":136}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Cyan","original":{"line":6,"column":66},"generated":{"line":1,"column":143}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Logger","original":{"line":7,"column":0},"generated":{"line":1,"column":150}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"setLogLevel","original":{"line":7,"column":7},"generated":{"line":1,"column":152}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":7,"column":19},"generated":{"line":1,"column":164}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":9,"column":0},"generated":{"line":1,"column":173}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"getNext","original":{"line":9,"column":6},"generated":{"line":1,"column":179}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"e","original":{"line":9,"column":16},"generated":{"line":1,"column":181}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"e","original":{"line":9,"column":21},"generated":{"line":1,"column":184}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"next","original":{"line":9,"column":23},"generated":{"line":1,"column":186}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"flatMap","original":{"line":10,"column":6},"generated":{"line":1,"column":191}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":10,"column":16},"generated":{"line":1,"column":193}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"res","original":{"line":10,"column":17},"generated":{"line":1,"column":194}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"val","original":{"line":10,"column":22},"generated":{"line":1,"column":196}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"res","original":{"line":10,"column":30},"generated":{"line":1,"column":200}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"concat","original":{"line":10,"column":34},"generated":{"line":1,"column":202}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"val","original":{"line":10,"column":41},"generated":{"line":1,"column":209}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"notNull","original":{"line":11,"column":6},"generated":{"line":1,"column":212}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":11,"column":16},"generated":{"line":1,"column":214}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":11,"column":25},"generated":{"line":1,"column":217}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":11,"column":25},"generated":{"line":1,"column":223}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"uniqueValues","original":{"line":12,"column":6},"generated":{"line":1,"column":225}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":12,"column":21},"generated":{"line":1,"column":227}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"res","original":{"line":12,"column":22},"generated":{"line":1,"column":228}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"val","original":{"line":12,"column":27},"generated":{"line":1,"column":230}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"res","original":{"line":13,"column":2},"generated":{"line":1,"column":235}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"val","original":{"line":13,"column":6},"generated":{"line":1,"column":237}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"val","original":{"line":13,"column":13},"generated":{"line":1,"column":240}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"res","original":{"line":14,"column":9},"generated":{"line":1,"column":242}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"batchSize","original":{"line":17,"column":6},"generated":{"line":1,"column":245}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":17,"column":18},"generated":{"line":1,"column":247}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":19,"column":0},"generated":{"line":1,"column":249}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Replicator","original":{"line":19,"column":6},"generated":{"line":1,"column":255}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"EventEmitter","original":{"line":19,"column":25},"generated":{"line":1,"column":265}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"constructor","original":{"line":20,"column":2},"generated":{"line":1,"column":267}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"store","original":{"line":20,"column":15},"generated":{"line":1,"column":279}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"concurrency","original":{"line":20,"column":22},"generated":{"line":1,"column":281}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":21,"column":4},"generated":{"line":1,"column":284}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_store","original":{"line":22,"column":9},"generated":{"line":1,"column":292}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_store","original":{"line":22,"column":9},"generated":{"line":1,"column":297}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"store","original":{"line":22,"column":18},"generated":{"line":1,"column":304}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_fetching","original":{"line":23,"column":9},"generated":{"line":1,"column":306}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_fetching","original":{"line":23,"column":9},"generated":{"line":1,"column":311}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":23,"column":21},"generated":{"line":1,"column":321}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":24,"column":9},"generated":{"line":1,"column":324}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":24,"column":9},"generated":{"line":1,"column":329}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":24,"column":18},"generated":{"line":1,"column":336}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRequested","original":{"line":25,"column":6},"generated":{"line":1,"column":337}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":25,"column":22},"generated":{"line":1,"column":352}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksStarted","original":{"line":26,"column":6},"generated":{"line":1,"column":354}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":26,"column":20},"generated":{"line":1,"column":367}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksProcessed","original":{"line":27,"column":6},"generated":{"line":1,"column":369}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":27,"column":22},"generated":{"line":1,"column":384}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":29,"column":9},"generated":{"line":1,"column":387}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":29,"column":9},"generated":{"line":1,"column":392}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":29,"column":19},"generated":{"line":1,"column":400}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_concurrency","original":{"line":31,"column":9},"generated":{"line":1,"column":403}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_concurrency","original":{"line":31,"column":9},"generated":{"line":1,"column":408}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"concurrency","original":{"line":31,"column":24},"generated":{"line":1,"column":421}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":31,"column":39},"generated":{"line":1,"column":424}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":32,"column":9},"generated":{"line":1,"column":428}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":32,"column":9},"generated":{"line":1,"column":433}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":32,"column":18},"generated":{"line":1,"column":440}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_q","original":{"line":33,"column":9},"generated":{"line":1,"column":443}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_q","original":{"line":33,"column":9},"generated":{"line":1,"column":448}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":33,"column":14},"generated":{"line":1,"column":451}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Set","original":{"line":33,"column":18},"generated":{"line":1,"column":455}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_flushTimer","original":{"line":36,"column":9},"generated":{"line":1,"column":459}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_flushTimer","original":{"line":36,"column":9},"generated":{"line":1,"column":464}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"setInterval","original":{"line":36,"column":23},"generated":{"line":1,"column":476}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":36,"column":35},"generated":{"line":1,"column":488}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":37,"column":32},"generated":{"line":1,"column":493}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":37,"column":10},"generated":{"line":1,"column":497}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRunning","original":{"line":37,"column":15},"generated":{"line":1,"column":502}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Object","original":{"line":37,"column":37},"generated":{"line":1,"column":516}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"keys","original":{"line":37,"column":44},"generated":{"line":1,"column":523}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":37,"column":49},"generated":{"line":1,"column":528}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":37,"column":54},"generated":{"line":1,"column":533}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":37,"column":62},"generated":{"line":1,"column":541}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":37,"column":71},"generated":{"line":1,"column":548}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"logger","original":{"line":38,"column":8},"generated":{"line":1,"column":552}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"warn","original":{"line":38,"column":15},"generated":{"line":1,"column":554}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":38,"column":20},"generated":{"line":1,"column":559}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Object","original":{"line":38,"column":47},"generated":{"line":1,"column":585}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"keys","original":{"line":38,"column":54},"generated":{"line":1,"column":592}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":38,"column":59},"generated":{"line":1,"column":597}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":38,"column":64},"generated":{"line":1,"column":602}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":38,"column":72},"generated":{"line":1,"column":610}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":38,"column":80},"generated":{"line":1,"column":617}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":38,"column":104},"generated":{"line":1,"column":640}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRequested","original":{"line":38,"column":109},"generated":{"line":1,"column":645}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":38,"column":125},"generated":{"line":1,"column":660}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksFinished","original":{"line":38,"column":130},"generated":{"line":1,"column":665}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":38,"column":145},"generated":{"line":1,"column":679}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"setTimeout","original":{"line":39,"column":8},"generated":{"line":1,"column":708}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":39,"column":19},"generated":{"line":1,"column":719}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":39,"column":25},"generated":{"line":1,"column":723}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_processQueue","original":{"line":39,"column":30},"generated":{"line":1,"column":728}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":39,"column":47},"generated":{"line":1,"column":744}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":41,"column":7},"generated":{"line":1,"column":749}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRequested","original":{"line":48,"column":6},"generated":{"line":1,"column":754}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":49,"column":11},"generated":{"line":1,"column":775}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":49,"column":11},"generated":{"line":1,"column":782}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":49,"column":16},"generated":{"line":1,"column":787}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRequested","original":{"line":49,"column":23},"generated":{"line":1,"column":794}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksStarted","original":{"line":56,"column":6},"generated":{"line":1,"column":809}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":57,"column":11},"generated":{"line":1,"column":828}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":57,"column":11},"generated":{"line":1,"column":835}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":57,"column":16},"generated":{"line":1,"column":840}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksStarted","original":{"line":57,"column":23},"generated":{"line":1,"column":847}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRunning","original":{"line":64,"column":6},"generated":{"line":1,"column":860}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":65,"column":11},"generated":{"line":1,"column":879}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":65,"column":11},"generated":{"line":1,"column":886}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":65,"column":16},"generated":{"line":1,"column":891}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksStarted","original":{"line":65,"column":23},"generated":{"line":1,"column":898}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":65,"column":38},"generated":{"line":1,"column":911}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":65,"column":43},"generated":{"line":1,"column":916}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksProcessed","original":{"line":65,"column":50},"generated":{"line":1,"column":923}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksQueued","original":{"line":72,"column":6},"generated":{"line":1,"column":938}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Math","original":{"line":73,"column":11},"generated":{"line":1,"column":956}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Math","original":{"line":73,"column":11},"generated":{"line":1,"column":963}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"max","original":{"line":73,"column":16},"generated":{"line":1,"column":968}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Object","original":{"line":73,"column":20},"generated":{"line":1,"column":972}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"keys","original":{"line":73,"column":27},"generated":{"line":1,"column":979}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":73,"column":32},"generated":{"line":1,"column":984}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":73,"column":37},"generated":{"line":1,"column":989}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":73,"column":45},"generated":{"line":1,"column":997}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":73,"column":54},"generated":{"line":1,"column":1004}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRunning","original":{"line":73,"column":59},"generated":{"line":1,"column":1009}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":73,"column":73},"generated":{"line":1,"column":1022}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksFinished","original":{"line":80,"column":6},"generated":{"line":1,"column":1025}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":81,"column":11},"generated":{"line":1,"column":1045}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":81,"column":11},"generated":{"line":1,"column":1052}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":81,"column":16},"generated":{"line":1,"column":1057}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksProcessed","original":{"line":81,"column":23},"generated":{"line":1,"column":1064}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"getQueue","original":{"line":88,"column":2},"generated":{"line":1,"column":1079}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Object","original":{"line":89,"column":11},"generated":{"line":1,"column":1090}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Object","original":{"line":89,"column":11},"generated":{"line":1,"column":1097}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":89,"column":18},"generated":{"line":1,"column":1104}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":89,"column":25},"generated":{"line":1,"column":1111}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":89,"column":30},"generated":{"line":1,"column":1116}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"load","original":{"line":95,"column":2},"generated":{"line":1,"column":1124}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entries","original":{"line":95,"column":8},"generated":{"line":1,"column":1129}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"notKnown","original":{"line":96,"column":10},"generated":{"line":1,"column":1132}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"notKnown","original":{"line":96,"column":10},"generated":{"line":1,"column":1138}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":96,"column":21},"generated":{"line":1,"column":1140}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":97,"column":12},"generated":{"line":1,"column":1144}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":97,"column":12},"generated":{"line":1,"column":1150}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":97,"column":19},"generated":{"line":1,"column":1152}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":97,"column":25},"generated":{"line":1,"column":1154}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":97,"column":33},"generated":{"line":1,"column":1160}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":98,"column":13},"generated":{"line":1,"column":1162}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":98,"column":14},"generated":{"line":1,"column":1169}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_store","original":{"line":98,"column":19},"generated":{"line":1,"column":1174}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_oplog","original":{"line":98,"column":26},"generated":{"line":1,"column":1181}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"has","original":{"line":98,"column":33},"generated":{"line":1,"column":1188}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":98,"column":37},"generated":{"line":1,"column":1192}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":98,"column":47},"generated":{"line":1,"column":1197}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_fetching","original":{"line":98,"column":52},"generated":{"line":1,"column":1202}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":98,"column":62},"generated":{"line":1,"column":1212}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":98,"column":72},"generated":{"line":1,"column":1217}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":98,"column":77},"generated":{"line":1,"column":1222}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":98,"column":84},"generated":{"line":1,"column":1229}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":101,"column":8},"generated":{"line":1,"column":1233}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entries","original":{"line":102,"column":6},"generated":{"line":1,"column":1237}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"filter","original":{"line":103,"column":9},"generated":{"line":1,"column":1239}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"notNull","original":{"line":103,"column":16},"generated":{"line":1,"column":1246}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"filter","original":{"line":104,"column":9},"generated":{"line":1,"column":1249}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"notKnown","original":{"line":104,"column":16},"generated":{"line":1,"column":1256}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"forEach","original":{"line":105,"column":9},"generated":{"line":1,"column":1259}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":105,"column":17},"generated":{"line":1,"column":1267}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_addToQueue","original":{"line":105,"column":22},"generated":{"line":1,"column":1272}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"bind","original":{"line":105,"column":34},"generated":{"line":1,"column":1284}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":105,"column":39},"generated":{"line":1,"column":1289}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"setTimeout","original":{"line":107,"column":6},"generated":{"line":1,"column":1296}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":107,"column":17},"generated":{"line":1,"column":1307}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":107,"column":23},"generated":{"line":1,"column":1311}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_processQueue","original":{"line":107,"column":28},"generated":{"line":1,"column":1316}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":107,"column":45},"generated":{"line":1,"column":1332}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":108,"column":6},"generated":{"line":1,"column":1335}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"e","original":{"line":108,"column":13},"generated":{"line":1,"column":1341}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"console","original":{"line":109,"column":6},"generated":{"line":1,"column":1344}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"error","original":{"line":109,"column":14},"generated":{"line":1,"column":1352}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"e","original":{"line":109,"column":20},"generated":{"line":1,"column":1358}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"stop","original":{"line":113,"column":2},"generated":{"line":1,"column":1362}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"clearInterval","original":{"line":115,"column":4},"generated":{"line":1,"column":1369}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":115,"column":18},"generated":{"line":1,"column":1383}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_flushTimer","original":{"line":115,"column":23},"generated":{"line":1,"column":1388}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"removeAllListeners","original":{"line":117,"column":9},"generated":{"line":1,"column":1401}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"removeAllListeners","original":{"line":117,"column":9},"generated":{"line":1,"column":1406}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":117,"column":28},"generated":{"line":1,"column":1425}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"removeAllListeners","original":{"line":118,"column":9},"generated":{"line":1,"column":1439}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"removeAllListeners","original":{"line":118,"column":9},"generated":{"line":1,"column":1444}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":118,"column":28},"generated":{"line":1,"column":1463}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"removeAllListeners","original":{"line":119,"column":9},"generated":{"line":1,"column":1475}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"removeAllListeners","original":{"line":119,"column":9},"generated":{"line":1,"column":1480}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":119,"column":28},"generated":{"line":1,"column":1499}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_addToQueue","original":{"line":122,"column":2},"generated":{"line":1,"column":1516}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":122,"column":15},"generated":{"line":1,"column":1528}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":123,"column":10},"generated":{"line":1,"column":1531}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":123,"column":10},"generated":{"line":1,"column":1537}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":123,"column":17},"generated":{"line":1,"column":1539}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":123,"column":23},"generated":{"line":1,"column":1541}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":123,"column":31},"generated":{"line":1,"column":1547}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":124,"column":9},"generated":{"line":1,"column":1549}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":124,"column":9},"generated":{"line":1,"column":1554}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRequested","original":{"line":124,"column":16},"generated":{"line":1,"column":1561}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":124,"column":34},"generated":{"line":1,"column":1577}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":125,"column":9},"generated":{"line":1,"column":1579}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":125,"column":9},"generated":{"line":1,"column":1584}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":125,"column":16},"generated":{"line":1,"column":1591}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":125,"column":24},"generated":{"line":1,"column":1594}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_processQueue","original":{"line":128,"column":8},"generated":{"line":1,"column":1596}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":129,"column":8},"generated":{"line":1,"column":1618}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":129,"column":8},"generated":{"line":1,"column":1621}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRunning","original":{"line":129,"column":13},"generated":{"line":1,"column":1626}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":129,"column":28},"generated":{"line":1,"column":1639}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_concurrency","original":{"line":129,"column":33},"generated":{"line":1,"column":1644}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":129,"column":47},"generated":{"line":1,"column":1657}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"capacity","original":{"line":130,"column":12},"generated":{"line":1,"column":1658}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"capacity","original":{"line":130,"column":12},"generated":{"line":1,"column":1664}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":130,"column":23},"generated":{"line":1,"column":1666}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_concurrency","original":{"line":130,"column":28},"generated":{"line":1,"column":1671}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":130,"column":43},"generated":{"line":1,"column":1684}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRunning","original":{"line":130,"column":48},"generated":{"line":1,"column":1689}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"items","original":{"line":131,"column":12},"generated":{"line":1,"column":1702}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Object","original":{"line":131,"column":20},"generated":{"line":1,"column":1704}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":131,"column":27},"generated":{"line":1,"column":1711}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":131,"column":34},"generated":{"line":1,"column":1718}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":131,"column":39},"generated":{"line":1,"column":1723}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"slice","original":{"line":131,"column":47},"generated":{"line":1,"column":1731}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":131,"column":53},"generated":{"line":1,"column":1737}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"capacity","original":{"line":131,"column":56},"generated":{"line":1,"column":1739}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"filter","original":{"line":131,"column":66},"generated":{"line":1,"column":1742}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"notNull","original":{"line":131,"column":73},"generated":{"line":1,"column":1749}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"items","original":{"line":132,"column":6},"generated":{"line":1,"column":1752}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"forEach","original":{"line":132,"column":12},"generated":{"line":1,"column":1754}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":132,"column":20},"generated":{"line":1,"column":1762}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":132,"column":36},"generated":{"line":1,"column":1772}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":132,"column":41},"generated":{"line":1,"column":1777}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":132,"column":48},"generated":{"line":1,"column":1784}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":132,"column":54},"generated":{"line":1,"column":1786}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":132,"column":62},"generated":{"line":1,"column":1792}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"flattenAndGetUniques","original":{"line":134,"column":12},"generated":{"line":1,"column":1796}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"flattenAndGetUniques","original":{"line":134,"column":12},"generated":{"line":1,"column":1802}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"nexts","original":{"line":134,"column":36},"generated":{"line":1,"column":1804}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"nexts","original":{"line":134,"column":46},"generated":{"line":1,"column":1807}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"reduce","original":{"line":134,"column":52},"generated":{"line":1,"column":1809}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"flatMap","original":{"line":134,"column":59},"generated":{"line":1,"column":1816}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":134,"column":68},"generated":{"line":1,"column":1818}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"reduce","original":{"line":134,"column":72},"generated":{"line":1,"column":1822}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"uniqueValues","original":{"line":134,"column":79},"generated":{"line":1,"column":1829}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":134,"column":93},"generated":{"line":1,"column":1831}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"processValues","original":{"line":135,"column":12},"generated":{"line":1,"column":1835}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"nexts","original":{"line":135,"column":29},"generated":{"line":1,"column":1837}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":136,"column":14},"generated":{"line":1,"column":1841}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":136,"column":14},"generated":{"line":1,"column":1847}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Object","original":{"line":136,"column":23},"generated":{"line":1,"column":1849}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":136,"column":30},"generated":{"line":1,"column":1856}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"nexts","original":{"line":136,"column":37},"generated":{"line":1,"column":1863}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"filter","original":{"line":136,"column":44},"generated":{"line":1,"column":1866}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"notNull","original":{"line":136,"column":51},"generated":{"line":1,"column":1873}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"items","original":{"line":138,"column":13},"generated":{"line":1,"column":1876}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"items","original":{"line":138,"column":13},"generated":{"line":1,"column":1879}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":138,"column":19},"generated":{"line":1,"column":1881}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":138,"column":28},"generated":{"line":1,"column":1888}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":138,"column":33},"generated":{"line":1,"column":1891}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":138,"column":38},"generated":{"line":1,"column":1896}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":138,"column":46},"generated":{"line":1,"column":1904}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":138,"column":55},"generated":{"line":1,"column":1911}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":139,"column":31},"generated":{"line":1,"column":1914}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":139,"column":9},"generated":{"line":1,"column":1918}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksRunning","original":{"line":139,"column":14},"generated":{"line":1,"column":1923}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":139,"column":36},"generated":{"line":1,"column":1937}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":139,"column":41},"generated":{"line":1,"column":1942}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":139,"column":49},"generated":{"line":1,"column":1950}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":139,"column":58},"generated":{"line":1,"column":1957}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":139,"column":62},"generated":{"line":1,"column":1959}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"logs","original":{"line":140,"column":16},"generated":{"line":1,"column":1960}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"logs","original":{"line":140,"column":16},"generated":{"line":1,"column":1966}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":140,"column":23},"generated":{"line":1,"column":1968}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":140,"column":28},"generated":{"line":1,"column":1973}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"slice","original":{"line":140,"column":36},"generated":{"line":1,"column":1981}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":141,"column":15},"generated":{"line":1,"column":1989}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":141,"column":15},"generated":{"line":1,"column":1994}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":141,"column":25},"generated":{"line":1,"column":2002}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"emit","original":{"line":142,"column":15},"generated":{"line":1,"column":2005}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"emit","original":{"line":142,"column":15},"generated":{"line":1,"column":2010}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":142,"column":20},"generated":{"line":1,"column":2015}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"logs","original":{"line":142,"column":32},"generated":{"line":1,"column":2026}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":145,"column":12},"generated":{"line":1,"column":2029}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":145,"column":19},"generated":{"line":1,"column":2031}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":145,"column":28},"generated":{"line":1,"column":2038}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"load","original":{"line":146,"column":15},"generated":{"line":1,"column":2041}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"load","original":{"line":146,"column":15},"generated":{"line":1,"column":2046}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":146,"column":20},"generated":{"line":1,"column":2051}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"pMap","original":{"line":150,"column":13},"generated":{"line":1,"column":2055}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"pMap","original":{"line":150,"column":13},"generated":{"line":1,"column":2062}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"items","original":{"line":150,"column":18},"generated":{"line":1,"column":2064}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"e","original":{"line":150,"column":25},"generated":{"line":1,"column":2066}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":150,"column":30},"generated":{"line":1,"column":2069}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_processOne","original":{"line":150,"column":35},"generated":{"line":1,"column":2074}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"e","original":{"line":150,"column":47},"generated":{"line":1,"column":2086}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"then","original":{"line":151,"column":9},"generated":{"line":1,"column":2090}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"flattenAndGetUniques","original":{"line":151,"column":14},"generated":{"line":1,"column":2095}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"then","original":{"line":152,"column":9},"generated":{"line":1,"column":2098}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"processValues","original":{"line":152,"column":14},"generated":{"line":1,"column":2103}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_processOne","original":{"line":156,"column":8},"generated":{"line":1,"column":2107}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":156,"column":21},"generated":{"line":1,"column":2125}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":157,"column":10},"generated":{"line":1,"column":2128}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":157,"column":10},"generated":{"line":1,"column":2134}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":157,"column":17},"generated":{"line":1,"column":2136}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":157,"column":23},"generated":{"line":1,"column":2138}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":157,"column":31},"generated":{"line":1,"column":2144}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":159,"column":8},"generated":{"line":1,"column":2146}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":159,"column":8},"generated":{"line":1,"column":2149}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_store","original":{"line":159,"column":13},"generated":{"line":1,"column":2154}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_oplog","original":{"line":159,"column":20},"generated":{"line":1,"column":2161}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"has","original":{"line":159,"column":27},"generated":{"line":1,"column":2168}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":159,"column":31},"generated":{"line":1,"column":2172}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":159,"column":40},"generated":{"line":1,"column":2176}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_fetching","original":{"line":159,"column":45},"generated":{"line":1,"column":2181}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":159,"column":55},"generated":{"line":1,"column":2191}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":160,"column":6},"generated":{"line":1,"column":2194}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_fetching","original":{"line":163,"column":9},"generated":{"line":1,"column":2201}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_fetching","original":{"line":163,"column":9},"generated":{"line":1,"column":2206}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":163,"column":19},"generated":{"line":1,"column":2216}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":163,"column":27},"generated":{"line":1,"column":2219}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"emit","original":{"line":164,"column":9},"generated":{"line":1,"column":2221}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"emit","original":{"line":164,"column":9},"generated":{"line":1,"column":2226}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":164,"column":14},"generated":{"line":1,"column":2231}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"entry","original":{"line":164,"column":28},"generated":{"line":1,"column":2244}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":165,"column":9},"generated":{"line":1,"column":2247}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":165,"column":9},"generated":{"line":1,"column":2252}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksStarted","original":{"line":165,"column":16},"generated":{"line":1,"column":2259}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":165,"column":32},"generated":{"line":1,"column":2273}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"exclude","original":{"line":167,"column":10},"generated":{"line":1,"column":2275}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"log","original":{"line":168,"column":10},"generated":{"line":1,"column":2281}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Log","original":{"line":168,"column":22},"generated":{"line":1,"column":2289}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"fromEntryHash","original":{"line":168,"column":26},"generated":{"line":1,"column":2291}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":168,"column":40},"generated":{"line":1,"column":2305}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_store","original":{"line":168,"column":45},"generated":{"line":1,"column":2310}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_ipfs","original":{"line":168,"column":52},"generated":{"line":1,"column":2317}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":168,"column":59},"generated":{"line":1,"column":2323}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_store","original":{"line":168,"column":64},"generated":{"line":1,"column":2328}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"identity","original":{"line":168,"column":71},"generated":{"line":1,"column":2335}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":168,"column":81},"generated":{"line":1,"column":2344}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":168,"column":87},"generated":{"line":1,"column":2346}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"logId","original":{"line":168,"column":89},"generated":{"line":1,"column":2347}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":168,"column":96},"generated":{"line":1,"column":2353}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_store","original":{"line":168,"column":101},"generated":{"line":1,"column":2358}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_oplog","original":{"line":168,"column":108},"generated":{"line":1,"column":2365}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"id","original":{"line":168,"column":115},"generated":{"line":1,"column":2372}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"access","original":{"line":168,"column":119},"generated":{"line":1,"column":2375}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":168,"column":127},"generated":{"line":1,"column":2382}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_store","original":{"line":168,"column":132},"generated":{"line":1,"column":2387}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"access","original":{"line":168,"column":139},"generated":{"line":1,"column":2394}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":168,"column":147},"generated":{"line":1,"column":2401}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"batchSize","original":{"line":168,"column":155},"generated":{"line":1,"column":2408}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"exclude","original":{"line":168,"column":166},"generated":{"line":1,"column":2410}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":167,"column":20},"generated":{"line":1,"column":2418}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":169,"column":9},"generated":{"line":1,"column":2423}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":169,"column":9},"generated":{"line":1,"column":2428}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"push","original":{"line":169,"column":17},"generated":{"line":1,"column":2436}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"log","original":{"line":169,"column":22},"generated":{"line":1,"column":2441}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"latest","original":{"line":171,"column":10},"generated":{"line":1,"column":2444}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"latest","original":{"line":171,"column":10},"generated":{"line":1,"column":2450}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"log","original":{"line":171,"column":19},"generated":{"line":1,"column":2452}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":171,"column":23},"generated":{"line":1,"column":2454}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":171,"column":30},"generated":{"line":1,"column":2461}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"log","original":{"line":181,"column":11},"generated":{"line":1,"column":2464}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":172,"column":11},"generated":{"line":1,"column":2478}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_queue","original":{"line":172,"column":16},"generated":{"line":1,"column":2483}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":172,"column":23},"generated":{"line":1,"column":2490}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":175,"column":9},"generated":{"line":1,"column":2493}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_stats","original":{"line":175,"column":9},"generated":{"line":1,"column":2498}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"tasksProcessed","original":{"line":175,"column":16},"generated":{"line":1,"column":2505}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":175,"column":34},"generated":{"line":1,"column":2521}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"emit","original":{"line":178,"column":9},"generated":{"line":1,"column":2523}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"emit","original":{"line":178,"column":9},"generated":{"line":1,"column":2528}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":178,"column":14},"generated":{"line":1,"column":2533}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":178,"column":31},"generated":{"line":1,"column":2549}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_id","original":{"line":178,"column":36},"generated":{"line":1,"column":2554}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"hash","original":{"line":178,"column":41},"generated":{"line":1,"column":2558}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"latest","original":{"line":178,"column":47},"generated":{"line":1,"column":2560}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":178,"column":55},"generated":{"line":1,"column":2562}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":178,"column":61},"generated":{"line":1,"column":2567}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"_buffer","original":{"line":178,"column":66},"generated":{"line":1,"column":2572}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"length","original":{"line":178,"column":74},"generated":{"line":1,"column":2580}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"log","original":{"line":181,"column":11},"generated":{"line":1,"column":2588}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"values","original":{"line":181,"column":15},"generated":{"line":1,"column":2590}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"map","original":{"line":181,"column":22},"generated":{"line":1,"column":2597}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"getNext","original":{"line":181,"column":26},"generated":{"line":1,"column":2601}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"reduce","original":{"line":181,"column":35},"generated":{"line":1,"column":2604}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"flatMap","original":{"line":181,"column":42},"generated":{"line":1,"column":2611}},{"source":"node_modules/orbit-db-store/src/Replicator.js","original":{"line":181,"column":51},"generated":{"line":1,"column":2613}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"module","original":{"line":185,"column":0},"generated":{"line":1,"column":2618}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"exports","original":{"line":185,"column":7},"generated":{"line":1,"column":2625}},{"source":"node_modules/orbit-db-store/src/Replicator.js","name":"Replicator","original":{"line":185,"column":17},"generated":{"line":1,"column":2633}}],"sources":{"node_modules/orbit-db-store/src/Replicator.js":"const EventEmitter = require('events').EventEmitter\nconst pMap = require('p-map')\nconst Log = require('ipfs-log')\n\nconst Logger = require('logplease')\nconst logger = Logger.create('replicator', { color: Logger.Colors.Cyan })\nLogger.setLogLevel('ERROR')\n\nconst getNext = e => e.next\nconst flatMap = (res, val) => res.concat(val)\nconst notNull = entry => entry !== null && entry !== undefined\nconst uniqueValues = (res, val) => {\n  res[val] = val\n  return res\n}\n\nconst batchSize = 1\n\nclass Replicator extends EventEmitter {\n  constructor (store, concurrency) {\n    super()\n    this._store = store\n    this._fetching = {}\n    this._stats = {\n      tasksRequested: 0,\n      tasksStarted: 0,\n      tasksProcessed: 0\n    }\n    this._buffer = []\n\n    this._concurrency = concurrency || 128\n    this._queue = {}\n    this._q = new Set()\n\n    // Flush the queue as an emergency switch\n    this._flushTimer = setInterval(() => {\n      if (this.tasksRunning === 0 && Object.keys(this._queue).length > 0) {\n        logger.warn('Had to flush the queue!', Object.keys(this._queue).length, 'items in the queue, ', this.tasksRequested, this.tasksFinished, ' tasks requested/finished')\n        setTimeout(() => this._processQueue(), 0)\n      }\n    }, 3000)\n  }\n\n  /**\n   * Returns the number of tasks started during the life time\n   * @return {[Integer]} [Number of tasks started]\n   */\n  get tasksRequested () {\n    return this._stats.tasksRequested\n  }\n\n  /**\n   * Returns the number of tasks started during the life time\n   * @return {[Integer]} [Number of tasks running]\n   */\n  get tasksStarted () {\n    return this._stats.tasksStarted\n  }\n\n  /**\n   * Returns the number of tasks running currently\n   * @return {[Integer]} [Number of tasks running]\n   */\n  get tasksRunning () {\n    return this._stats.tasksStarted - this._stats.tasksProcessed\n  }\n\n  /**\n   * Returns the number of tasks currently queued\n   * @return {[Integer]} [Number of tasks queued]\n   */\n  get tasksQueued () {\n    return Math.max(Object.keys(this._queue).length - this.tasksRunning, 0)\n  }\n\n  /**\n   * Returns the number of tasks finished during the life time\n   * @return {[Integer]} [Number of tasks finished]\n   */\n  get tasksFinished () {\n    return this._stats.tasksProcessed\n  }\n\n  /**\n   * Returns the hashes currently queued\n   * @return {[Array<String>]} [Queued hashes]\n   */\n  getQueue () {\n    return Object.values(this._queue)\n  }\n\n  /*\n    Process new heads.\n   */\n  load (entries) {\n    const notKnown = entry => {\n      const hash = entry.hash || entry\n      return !this._store._oplog.has(hash) && !this._fetching[hash] && !this._queue[hash]\n    }\n\n    try {\n      entries\n        .filter(notNull)\n        .filter(notKnown)\n        .forEach(this._addToQueue.bind(this))\n\n      setTimeout(() => this._processQueue(), 0)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  stop () {\n    // Clears the queue flusher\n    clearInterval(this._flushTimer)\n    // Remove event listeners\n    this.removeAllListeners('load.added')\n    this.removeAllListeners('load.end')\n    this.removeAllListeners('load.progress')\n  }\n\n  _addToQueue (entry) {\n    const hash = entry.hash || entry\n    this._stats.tasksRequested += 1\n    this._queue[hash] = entry\n  }\n\n  async _processQueue () {\n    if (this.tasksRunning < this._concurrency) {\n      const capacity = this._concurrency - this.tasksRunning\n      const items = Object.values(this._queue).slice(0, capacity).filter(notNull)\n      items.forEach(entry => delete this._queue[entry.hash || entry])\n\n      const flattenAndGetUniques = (nexts) => nexts.reduce(flatMap, []).reduce(uniqueValues, {})\n      const processValues = (nexts) => {\n        const values = Object.values(nexts).filter(notNull)\n\n        if ((items.length > 0 && this._buffer.length > 0) ||\n        (this.tasksRunning === 0 && this._buffer.length > 0)) {\n          const logs = this._buffer.slice()\n          this._buffer = []\n          this.emit('load.end', logs)\n        }\n\n        if (values.length > 0) {\n          this.load(values)\n        }\n      }\n\n      return pMap(items, e => this._processOne(e))\n        .then(flattenAndGetUniques)\n        .then(processValues)\n    }\n  }\n\n  async _processOne (entry) {\n    const hash = entry.hash || entry\n\n    if (this._store._oplog.has(hash) || this._fetching[hash]) {\n      return\n    }\n\n    this._fetching[hash] = hash\n    this.emit('load.added', entry)\n    this._stats.tasksStarted += 1\n\n    const exclude = []\n    const log = await Log.fromEntryHash(this._store._ipfs, this._store.identity, hash, { logId: this._store._oplog.id, access: this._store.access, length: batchSize, exclude })\n    this._buffer.push(log)\n\n    const latest = log.values[0]\n    delete this._queue[hash]\n\n    // Mark this task as processed\n    this._stats.tasksProcessed += 1\n\n    // Notify subscribers that we made progress\n    this.emit('load.progress', this._id, hash, latest, null, this._buffer.length)\n\n    // Return all next pointers\n    return log.values.map(getNext).reduce(flatMap, [])\n  }\n}\n\nmodule.exports = Replicator\n"},"lineCount":null}},"error":null,"hash":"4bd8cc34a3ece4ed80e3a3a53afe0a3c","cacheData":{"env":{}}}