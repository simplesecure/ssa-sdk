{"id":"udlf","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/package.json","includedInParent":true,"mtime":1582579779567},{"name":"peer-id","loc":{"line":3,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/peer-id/src/index.js"},{"name":"ipfs-http-client/src/dht","loc":{"line":4,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/node_modules/ipfs-http-client/src/dht/index.js"},{"name":"ipfs-http-client/src/utils/default-config","loc":{"line":5,"column":30},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/node_modules/ipfs-http-client/src/utils/default-config.js"},{"name":"p-queue","loc":{"line":6,"column":36},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/p-queue/dist/index.js"},{"name":"debug","loc":{"line":7,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"}],"generated":{"js":"\"use strict\";const e=require(\"peer-id\"),t=require(\"ipfs-http-client/src/dht\"),i=require(\"ipfs-http-client/src/utils/default-config\"),{default:r}=require(\"p-queue\"),s=require(\"debug\"),o=s(\"libp2p-delegated-peer-routing\");o.error=s(\"libp2p-delegated-peer-routing:error\");const u=3e4,n={protocol:\"https\",port:443,host:\"node0.delegate.ipfs.io\"},a=4;class d{constructor(e){this.api=Object.assign({},i(),n,e),this.dht=t(this.api),this._httpQueue=new r({concurrency:a}),o(`enabled DelegatedPeerRouting via ${this.api.protocol}://${this.api.host}:${this.api.port}`)}async findPeer(t,i={}){e.isPeerId(t)&&(t=t.toB58String()),o(\"findPeer starts: \"+t),i.maxTimeout=i.maxTimeout||u;try{return await this._httpQueue.add(()=>this.dht.findPeer(t,{timeout:`${i.maxTimeout}ms`}))}catch(r){if(r.message.includes(\"not found\"))return;throw r}finally{o(\"findPeer finished: \"+t)}}}module.exports=d;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":40}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":42}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":50}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":78}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":80}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":88}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":134}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":142}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":145}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":153}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":7,"column":0},"generated":{"line":1,"column":164}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":7,"column":0},"generated":{"line":1,"column":166}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":7,"column":0},"generated":{"line":1,"column":174}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":9,"column":0},"generated":{"line":1,"column":183}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":9,"column":0},"generated":{"line":1,"column":185}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":9,"column":0},"generated":{"line":1,"column":187}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":10,"column":0},"generated":{"line":1,"column":220}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":10,"column":0},"generated":{"line":1,"column":222}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":10,"column":0},"generated":{"line":1,"column":228}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":10,"column":0},"generated":{"line":1,"column":230}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":12,"column":0},"generated":{"line":1,"column":269}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":12,"column":0},"generated":{"line":1,"column":275}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":12,"column":0},"generated":{"line":1,"column":277}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":13,"column":0},"generated":{"line":1,"column":281}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":13,"column":0},"generated":{"line":1,"column":283}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":14,"column":0},"generated":{"line":1,"column":284}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":14,"column":0},"generated":{"line":1,"column":293}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":15,"column":0},"generated":{"line":1,"column":301}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":15,"column":0},"generated":{"line":1,"column":306}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":16,"column":0},"generated":{"line":1,"column":310}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":16,"column":0},"generated":{"line":1,"column":315}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":18,"column":0},"generated":{"line":1,"column":341}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":18,"column":0},"generated":{"line":1,"column":343}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":20,"column":0},"generated":{"line":1,"column":345}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":20,"column":0},"generated":{"line":1,"column":351}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":21,"column":0},"generated":{"line":1,"column":353}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":21,"column":0},"generated":{"line":1,"column":365}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":368}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":373}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":377}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":384}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":391}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":394}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":398}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":400}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":403}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":408}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":412}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":414}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":419}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":27,"column":0},"generated":{"line":1,"column":424}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":27,"column":0},"generated":{"line":1,"column":429}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":27,"column":0},"generated":{"line":1,"column":440}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":27,"column":0},"generated":{"line":1,"column":444}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":27,"column":0},"generated":{"line":1,"column":446}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":28,"column":0},"generated":{"line":1,"column":447}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":28,"column":0},"generated":{"line":1,"column":459}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":463}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":501}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":506}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":510}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":524}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":529}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":533}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":541}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":546}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":550}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":41,"column":0},"generated":{"line":1,"column":558}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":41,"column":0},"generated":{"line":1,"column":573}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":41,"column":0},"generated":{"line":1,"column":575}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":41,"column":0},"generated":{"line":1,"column":577}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":42,"column":0},"generated":{"line":1,"column":581}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":42,"column":0},"generated":{"line":1,"column":583}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":42,"column":0},"generated":{"line":1,"column":592}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":43,"column":0},"generated":{"line":1,"column":597}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":43,"column":0},"generated":{"line":1,"column":599}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":43,"column":0},"generated":{"line":1,"column":601}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":45,"column":0},"generated":{"line":1,"column":616}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":45,"column":0},"generated":{"line":1,"column":618}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":45,"column":0},"generated":{"line":1,"column":638}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":641}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":643}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":654}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":656}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":668}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":49,"column":0},"generated":{"line":1,"column":670}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":674}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":687}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":692}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":703}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":707}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":711}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":716}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":720}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":729}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":731}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":51,"column":0},"generated":{"line":1,"column":732}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":51,"column":0},"generated":{"line":1,"column":743}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":51,"column":0},"generated":{"line":1,"column":745}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":53,"column":0},"generated":{"line":1,"column":763}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":53,"column":0},"generated":{"line":1,"column":769}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":54,"column":0},"generated":{"line":1,"column":772}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":54,"column":0},"generated":{"line":1,"column":775}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":54,"column":0},"generated":{"line":1,"column":777}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":54,"column":0},"generated":{"line":1,"column":785}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":54,"column":0},"generated":{"line":1,"column":794}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":55,"column":0},"generated":{"line":1,"column":807}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":58,"column":0},"generated":{"line":1,"column":814}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":58,"column":0},"generated":{"line":1,"column":820}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":59,"column":0},"generated":{"line":1,"column":822}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":60,"column":0},"generated":{"line":1,"column":830}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":60,"column":0},"generated":{"line":1,"column":832}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":60,"column":0},"generated":{"line":1,"column":854}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":65,"column":0},"generated":{"line":1,"column":859}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":65,"column":0},"generated":{"line":1,"column":866}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js","original":{"line":65,"column":0},"generated":{"line":1,"column":874}}],"sources":{"node_modules/ipfs/node_modules/libp2p-delegated-peer-routing/src/index.js":"'use strict'\n\nconst PeerId = require('peer-id')\nconst dht = require('ipfs-http-client/src/dht')\nconst defaultConfig = require('ipfs-http-client/src/utils/default-config')\nconst { default: PQueue } = require('p-queue')\nconst debug = require('debug')\n\nconst log = debug('libp2p-delegated-peer-routing')\nlog.error = debug('libp2p-delegated-peer-routing:error')\n\nconst DEFAULT_MAX_TIMEOUT = 30e3 // 30 second default\nconst DEFAULT_IPFS_API = {\n  protocol: 'https',\n  port: 443,\n  host: 'node0.delegate.ipfs.io'\n}\nconst CONCURRENT_HTTP_REQUESTS = 4\n\nclass DelegatedPeerRouting {\n  constructor (api) {\n    this.api = Object.assign({}, defaultConfig(), DEFAULT_IPFS_API, api)\n    this.dht = dht(this.api)\n\n    // limit concurrency to avoid request flood in web browser\n    // https://github.com/libp2p/js-libp2p-delegated-content-routing/issues/12\n    this._httpQueue = new PQueue({\n      concurrency: CONCURRENT_HTTP_REQUESTS\n    })\n    log(`enabled DelegatedPeerRouting via ${this.api.protocol}://${this.api.host}:${this.api.port}`)\n  }\n\n  /**\n   * Attempts to find the given peer\n   *\n   * @param {PeerID} id\n   * @param {object} options\n   * @param {number} options.maxTimeout How long the query can take. Defaults to 30 seconds\n   * @returns {Promise<PeerInfo>}\n   */\n  async findPeer (id, options = {}) {\n    if (PeerId.isPeerId(id)) {\n      id = id.toB58String()\n    }\n    log('findPeer starts: ' + id)\n\n    options.maxTimeout = options.maxTimeout || DEFAULT_MAX_TIMEOUT\n\n    try {\n      return await this._httpQueue.add(() => this.dht.findPeer(id, {\n        timeout: `${options.maxTimeout}ms`// The api requires specification of the time unit (s/ms)\n      }))\n    } catch (err) {\n      if (err.message.includes('not found')) {\n        return undefined\n      }\n\n      throw err\n    } finally {\n      log('findPeer finished: ' + id)\n    }\n  }\n}\n\nmodule.exports = DelegatedPeerRouting\n"},"lineCount":null}},"error":null,"hash":"eb891b06cf3a4fd5f1883a898fadf28e","cacheData":{"env":{}}}