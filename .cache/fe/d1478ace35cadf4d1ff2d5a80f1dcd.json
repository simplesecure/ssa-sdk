{"id":"Wnfo","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/package.json","includedInParent":true,"mtime":1582579780032},{"name":"pull-stream","loc":{"line":3,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-stream/index.js"},{"name":"async/timeout","loc":{"line":4,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/timeout.js"},{"name":"pull-length-prefixed","loc":{"line":5,"column":19},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-length-prefixed/src/index.js"},{"name":"async/setImmediate","loc":{"line":6,"column":29},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/setImmediate.js"},{"name":"err-code","loc":{"line":8,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/err-code/index.js"},{"name":"./rpc","loc":{"line":10,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/rpc/index.js"},{"name":"./constants","loc":{"line":11,"column":18},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/constants.js"},{"name":"./message","loc":{"line":12,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js"},{"name":"./utils","loc":{"line":13,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/utils.js"}],"generated":{"js":"\"use strict\";const e=require(\"pull-stream\"),t=require(\"async/timeout\"),r=require(\"pull-length-prefixed\"),i=require(\"async/setImmediate\"),s=require(\"err-code\"),n=require(\"./rpc\"),o=require(\"./constants\"),h=require(\"./message\"),d=require(\"./utils\");class a{constructor(e){this.dht=e,this.readMessageTimeout=o.READ_MESSAGE_TIMEOUT,this._log=d.logger(this.dht.peerInfo.id,\"net\"),this._rpc=n(this.dht),this._onPeerConnected=this._onPeerConnected.bind(this),this._running=!1}start(e){const t=t=>i(()=>e(t));return this._running?t(s(new Error(\"Network is already running\"),\"ERR_NETWORK_ALREADY_RUNNING\")):this.dht.isStarted?(this._running=!0,this.dht.switch.handle(o.PROTOCOL_DHT,this._rpc),this.dht.switch.on(\"peer-mux-established\",this._onPeerConnected),void t()):t(s(new Error(\"Can not start network\"),\"ERR_CANNOT_START_NETWORK\"))}stop(e){const t=t=>i(()=>e(t));if(!this.dht.isStarted&&!this.isStarted)return t(s(new Error(\"Network is already stopped\"),\"ERR_NETWORK_ALREADY_STOPPED\"));this._running=!1,this.dht.switch.removeListener(\"peer-mux-established\",this._onPeerConnected),this.dht.switch.unhandle(o.PROTOCOL_DHT),t()}get isStarted(){return this._running}get isConnected(){return this.dht.isStarted&&this.isStarted}_onPeerConnected(t){if(!this.isConnected)return this._log.error(\"Network is offline\");this.dht.switch.dial(t,o.PROTOCOL_DHT,(r,i)=>{if(r)return this._log(\"%s does not support protocol: %s\",t.id.toB58String(),o.PROTOCOL_DHT);e(e.empty(),i),this.dht._add(t,e=>{if(e)return this._log.error(\"Failed to add to the routing table\",e);this._log(\"added to the routing table: %s\",t.id.toB58String())})})}sendRequest(e,t,r){if(!this.isConnected)return r(s(new Error(\"Network is offline\"),\"ERR_NETWORK_OFFLINE\"));this._log(\"sending to: %s\",e.toB58String()),this.dht.switch.dial(e,o.PROTOCOL_DHT,(e,i)=>{if(e)return r(e);this._writeReadMessage(i,t.serialize(),r)})}sendMessage(e,t,r){if(!this.isConnected)return i(()=>r(s(new Error(\"Network is offline\"),\"ERR_NETWORK_OFFLINE\")));this._log(\"sending to: %s\",e.toB58String()),this.dht.switch.dial(e,o.PROTOCOL_DHT,(e,i)=>{if(e)return r(e);this._writeMessage(i,t.serialize(),r)})}_writeReadMessage(e,r,i){t(_,this.readMessageTimeout)(e,r,i)}_writeMessage(t,i,s){e(e.values([i]),r.encode(),t,e.onEnd(s))}}function _(t,i,n){e(e.values([i]),r.encode(),t,e.filter(e=>e.length<o.maxMessageSize),r.decode(),e.collect((e,t)=>{if(e)return n(e);if(0===t.length)return n(s(new Error(\"No message received\"),\"ERR_NO_MESSAGE_RECEIVED\"));let r;try{r=h.deserialize(t[0])}catch(e){return n(s(e,\"ERR_FAILED_DESERIALIZE_RESPONSE\"))}n(null,r)}))}module.exports=a;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":3,"column":13},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":3,"column":21},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"timeout","original":{"line":4,"column":6},"generated":{"line":1,"column":44}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":4,"column":16},"generated":{"line":1,"column":46}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":4,"column":24},"generated":{"line":1,"column":54}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"lp","original":{"line":5,"column":6},"generated":{"line":1,"column":71}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":5,"column":11},"generated":{"line":1,"column":73}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":5,"column":19},"generated":{"line":1,"column":81}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"setImmediate","original":{"line":6,"column":6},"generated":{"line":1,"column":105}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":6,"column":21},"generated":{"line":1,"column":107}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":6,"column":29},"generated":{"line":1,"column":115}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"errcode","original":{"line":8,"column":6},"generated":{"line":1,"column":137}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":8,"column":16},"generated":{"line":1,"column":139}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":8,"column":24},"generated":{"line":1,"column":147}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"rpc","original":{"line":10,"column":6},"generated":{"line":1,"column":159}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":10,"column":12},"generated":{"line":1,"column":161}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":10,"column":20},"generated":{"line":1,"column":169}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":11,"column":6},"generated":{"line":1,"column":178}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":11,"column":10},"generated":{"line":1,"column":180}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":11,"column":18},"generated":{"line":1,"column":188}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Message","original":{"line":12,"column":6},"generated":{"line":1,"column":203}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":12,"column":16},"generated":{"line":1,"column":205}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":12,"column":24},"generated":{"line":1,"column":213}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"utils","original":{"line":13,"column":6},"generated":{"line":1,"column":226}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"require","original":{"line":13,"column":14},"generated":{"line":1,"column":228}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":13,"column":22},"generated":{"line":1,"column":236}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":18,"column":0},"generated":{"line":1,"column":247}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Network","original":{"line":18,"column":6},"generated":{"line":1,"column":253}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"constructor","original":{"line":24,"column":2},"generated":{"line":1,"column":255}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"self","original":{"line":24,"column":15},"generated":{"line":1,"column":267}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":25,"column":9},"generated":{"line":1,"column":270}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":25,"column":9},"generated":{"line":1,"column":275}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"self","original":{"line":25,"column":15},"generated":{"line":1,"column":279}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"readMessageTimeout","original":{"line":26,"column":9},"generated":{"line":1,"column":281}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"readMessageTimeout","original":{"line":26,"column":9},"generated":{"line":1,"column":286}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":26,"column":30},"generated":{"line":1,"column":305}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"READ_MESSAGE_TIMEOUT","original":{"line":26,"column":32},"generated":{"line":1,"column":307}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":27,"column":9},"generated":{"line":1,"column":328}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":27,"column":9},"generated":{"line":1,"column":333}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"utils","original":{"line":27,"column":16},"generated":{"line":1,"column":338}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"logger","original":{"line":27,"column":22},"generated":{"line":1,"column":340}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":27,"column":29},"generated":{"line":1,"column":347}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":27,"column":34},"generated":{"line":1,"column":352}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"peerInfo","original":{"line":27,"column":38},"generated":{"line":1,"column":356}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"id","original":{"line":27,"column":47},"generated":{"line":1,"column":365}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":27,"column":51},"generated":{"line":1,"column":368}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_rpc","original":{"line":28,"column":9},"generated":{"line":1,"column":375}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_rpc","original":{"line":28,"column":9},"generated":{"line":1,"column":380}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"rpc","original":{"line":28,"column":16},"generated":{"line":1,"column":385}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":28,"column":20},"generated":{"line":1,"column":387}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":28,"column":25},"generated":{"line":1,"column":392}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_onPeerConnected","original":{"line":29,"column":9},"generated":{"line":1,"column":397}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_onPeerConnected","original":{"line":29,"column":9},"generated":{"line":1,"column":402}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":29,"column":28},"generated":{"line":1,"column":419}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_onPeerConnected","original":{"line":29,"column":33},"generated":{"line":1,"column":424}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"bind","original":{"line":29,"column":50},"generated":{"line":1,"column":441}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":29,"column":55},"generated":{"line":1,"column":446}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_running","original":{"line":30,"column":9},"generated":{"line":1,"column":452}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_running","original":{"line":30,"column":9},"generated":{"line":1,"column":457}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":30,"column":20},"generated":{"line":1,"column":467}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"start","original":{"line":39,"column":2},"generated":{"line":1,"column":469}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":39,"column":9},"generated":{"line":1,"column":475}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":40,"column":10},"generated":{"line":1,"column":478}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":40,"column":10},"generated":{"line":1,"column":484}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":40,"column":16},"generated":{"line":1,"column":486}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"setImmediate","original":{"line":40,"column":24},"generated":{"line":1,"column":489}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":40,"column":37},"generated":{"line":1,"column":491}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":40,"column":43},"generated":{"line":1,"column":495}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":40,"column":52},"generated":{"line":1,"column":497}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":42,"column":8},"generated":{"line":1,"column":501}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":42,"column":8},"generated":{"line":1,"column":508}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_running","original":{"line":42,"column":13},"generated":{"line":1,"column":513}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":43,"column":13},"generated":{"line":1,"column":522}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"errcode","original":{"line":43,"column":16},"generated":{"line":1,"column":524}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":43,"column":24},"generated":{"line":1,"column":526}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Error","original":{"line":43,"column":28},"generated":{"line":1,"column":530}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":43,"column":34},"generated":{"line":1,"column":536}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":43,"column":65},"generated":{"line":1,"column":566}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":47,"column":9},"generated":{"line":1,"column":598}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":47,"column":14},"generated":{"line":1,"column":603}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isStarted","original":{"line":47,"column":18},"generated":{"line":1,"column":607}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_running","original":{"line":51,"column":9},"generated":{"line":1,"column":618}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_running","original":{"line":51,"column":9},"generated":{"line":1,"column":623}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":51,"column":20},"generated":{"line":1,"column":633}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":54,"column":9},"generated":{"line":1,"column":635}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":54,"column":9},"generated":{"line":1,"column":640}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"switch","original":{"line":54,"column":13},"generated":{"line":1,"column":644}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"handle","original":{"line":54,"column":20},"generated":{"line":1,"column":651}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":54,"column":27},"generated":{"line":1,"column":658}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"PROTOCOL_DHT","original":{"line":54,"column":29},"generated":{"line":1,"column":660}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":54,"column":43},"generated":{"line":1,"column":673}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_rpc","original":{"line":54,"column":48},"generated":{"line":1,"column":678}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":57,"column":9},"generated":{"line":1,"column":684}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":57,"column":9},"generated":{"line":1,"column":689}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"switch","original":{"line":57,"column":13},"generated":{"line":1,"column":693}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"on","original":{"line":57,"column":20},"generated":{"line":1,"column":700}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":57,"column":23},"generated":{"line":1,"column":703}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":57,"column":47},"generated":{"line":1,"column":726}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_onPeerConnected","original":{"line":57,"column":52},"generated":{"line":1,"column":731}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":59,"column":4},"generated":{"line":1,"column":754}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":48,"column":13},"generated":{"line":1,"column":759}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"errcode","original":{"line":48,"column":16},"generated":{"line":1,"column":761}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":48,"column":24},"generated":{"line":1,"column":763}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Error","original":{"line":48,"column":28},"generated":{"line":1,"column":767}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":48,"column":34},"generated":{"line":1,"column":773}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":48,"column":60},"generated":{"line":1,"column":798}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"stop","original":{"line":68,"column":2},"generated":{"line":1,"column":827}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":68,"column":8},"generated":{"line":1,"column":832}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":69,"column":10},"generated":{"line":1,"column":835}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":69,"column":10},"generated":{"line":1,"column":841}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":69,"column":16},"generated":{"line":1,"column":843}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"setImmediate","original":{"line":69,"column":24},"generated":{"line":1,"column":846}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":69,"column":37},"generated":{"line":1,"column":848}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":69,"column":43},"generated":{"line":1,"column":852}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":69,"column":52},"generated":{"line":1,"column":854}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":71,"column":8},"generated":{"line":1,"column":858}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":71,"column":9},"generated":{"line":1,"column":862}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":71,"column":14},"generated":{"line":1,"column":867}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isStarted","original":{"line":71,"column":18},"generated":{"line":1,"column":871}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":71,"column":32},"generated":{"line":1,"column":883}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isStarted","original":{"line":71,"column":37},"generated":{"line":1,"column":888}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":72,"column":13},"generated":{"line":1,"column":898}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":72,"column":13},"generated":{"line":1,"column":905}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"errcode","original":{"line":72,"column":16},"generated":{"line":1,"column":907}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":72,"column":24},"generated":{"line":1,"column":909}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Error","original":{"line":72,"column":28},"generated":{"line":1,"column":913}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":72,"column":34},"generated":{"line":1,"column":919}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":72,"column":65},"generated":{"line":1,"column":949}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_running","original":{"line":74,"column":9},"generated":{"line":1,"column":981}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_running","original":{"line":74,"column":9},"generated":{"line":1,"column":986}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":74,"column":20},"generated":{"line":1,"column":996}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":75,"column":9},"generated":{"line":1,"column":998}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":75,"column":9},"generated":{"line":1,"column":1003}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"switch","original":{"line":75,"column":13},"generated":{"line":1,"column":1007}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"removeListener","original":{"line":75,"column":20},"generated":{"line":1,"column":1014}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":75,"column":35},"generated":{"line":1,"column":1029}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":75,"column":59},"generated":{"line":1,"column":1052}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_onPeerConnected","original":{"line":75,"column":64},"generated":{"line":1,"column":1057}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":77,"column":9},"generated":{"line":1,"column":1075}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":77,"column":9},"generated":{"line":1,"column":1080}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"switch","original":{"line":77,"column":13},"generated":{"line":1,"column":1084}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"unhandle","original":{"line":77,"column":20},"generated":{"line":1,"column":1091}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":77,"column":29},"generated":{"line":1,"column":1100}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"PROTOCOL_DHT","original":{"line":77,"column":31},"generated":{"line":1,"column":1102}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"cb","original":{"line":78,"column":4},"generated":{"line":1,"column":1116}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isStarted","original":{"line":86,"column":6},"generated":{"line":1,"column":1120}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":87,"column":11},"generated":{"line":1,"column":1136}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":87,"column":11},"generated":{"line":1,"column":1143}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_running","original":{"line":87,"column":16},"generated":{"line":1,"column":1148}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isConnected","original":{"line":95,"column":6},"generated":{"line":1,"column":1157}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":97,"column":11},"generated":{"line":1,"column":1175}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":97,"column":11},"generated":{"line":1,"column":1182}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":97,"column":16},"generated":{"line":1,"column":1187}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isStarted","original":{"line":97,"column":20},"generated":{"line":1,"column":1191}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":97,"column":33},"generated":{"line":1,"column":1202}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isStarted","original":{"line":97,"column":38},"generated":{"line":1,"column":1207}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_onPeerConnected","original":{"line":107,"column":2},"generated":{"line":1,"column":1217}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"peer","original":{"line":107,"column":20},"generated":{"line":1,"column":1234}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":108,"column":8},"generated":{"line":1,"column":1237}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":108,"column":9},"generated":{"line":1,"column":1241}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isConnected","original":{"line":108,"column":14},"generated":{"line":1,"column":1246}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":109,"column":13},"generated":{"line":1,"column":1258}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":109,"column":13},"generated":{"line":1,"column":1265}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":109,"column":18},"generated":{"line":1,"column":1270}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"error","original":{"line":109,"column":23},"generated":{"line":1,"column":1275}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":109,"column":29},"generated":{"line":1,"column":1281}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":112,"column":9},"generated":{"line":1,"column":1303}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":112,"column":9},"generated":{"line":1,"column":1308}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"switch","original":{"line":112,"column":13},"generated":{"line":1,"column":1312}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dial","original":{"line":112,"column":20},"generated":{"line":1,"column":1319}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"peer","original":{"line":112,"column":25},"generated":{"line":1,"column":1324}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":112,"column":31},"generated":{"line":1,"column":1326}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"PROTOCOL_DHT","original":{"line":112,"column":33},"generated":{"line":1,"column":1328}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":112,"column":47},"generated":{"line":1,"column":1341}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":112,"column":48},"generated":{"line":1,"column":1342}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":112,"column":53},"generated":{"line":1,"column":1344}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":113,"column":10},"generated":{"line":1,"column":1349}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":113,"column":10},"generated":{"line":1,"column":1352}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":114,"column":15},"generated":{"line":1,"column":1354}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":114,"column":15},"generated":{"line":1,"column":1361}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":114,"column":20},"generated":{"line":1,"column":1366}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":114,"column":25},"generated":{"line":1,"column":1371}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"peer","original":{"line":114,"column":61},"generated":{"line":1,"column":1406}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"id","original":{"line":114,"column":66},"generated":{"line":1,"column":1408}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"toB58String","original":{"line":114,"column":69},"generated":{"line":1,"column":1411}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":114,"column":84},"generated":{"line":1,"column":1425}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"PROTOCOL_DHT","original":{"line":114,"column":86},"generated":{"line":1,"column":1427}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":118,"column":6},"generated":{"line":1,"column":1441}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":118,"column":11},"generated":{"line":1,"column":1443}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"empty","original":{"line":118,"column":16},"generated":{"line":1,"column":1445}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":118,"column":25},"generated":{"line":1,"column":1453}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":120,"column":11},"generated":{"line":1,"column":1456}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":120,"column":11},"generated":{"line":1,"column":1461}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_add","original":{"line":120,"column":15},"generated":{"line":1,"column":1465}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"peer","original":{"line":120,"column":20},"generated":{"line":1,"column":1470}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":120,"column":27},"generated":{"line":1,"column":1472}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":121,"column":12},"generated":{"line":1,"column":1476}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":121,"column":12},"generated":{"line":1,"column":1479}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":122,"column":17},"generated":{"line":1,"column":1481}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":122,"column":17},"generated":{"line":1,"column":1488}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":122,"column":22},"generated":{"line":1,"column":1493}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"error","original":{"line":122,"column":27},"generated":{"line":1,"column":1498}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":122,"column":33},"generated":{"line":1,"column":1504}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":122,"column":71},"generated":{"line":1,"column":1541}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":125,"column":13},"generated":{"line":1,"column":1544}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":125,"column":13},"generated":{"line":1,"column":1549}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":125,"column":18},"generated":{"line":1,"column":1554}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"peer","original":{"line":125,"column":52},"generated":{"line":1,"column":1587}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"id","original":{"line":125,"column":57},"generated":{"line":1,"column":1589}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"toB58String","original":{"line":125,"column":60},"generated":{"line":1,"column":1592}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"sendRequest","original":{"line":138,"column":2},"generated":{"line":1,"column":1611}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"to","original":{"line":138,"column":15},"generated":{"line":1,"column":1623}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":138,"column":19},"generated":{"line":1,"column":1625}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":138,"column":24},"generated":{"line":1,"column":1627}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":140,"column":8},"generated":{"line":1,"column":1630}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":140,"column":9},"generated":{"line":1,"column":1634}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isConnected","original":{"line":140,"column":14},"generated":{"line":1,"column":1639}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":141,"column":13},"generated":{"line":1,"column":1651}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":141,"column":13},"generated":{"line":1,"column":1658}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"errcode","original":{"line":141,"column":22},"generated":{"line":1,"column":1660}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":141,"column":30},"generated":{"line":1,"column":1662}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Error","original":{"line":141,"column":34},"generated":{"line":1,"column":1666}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":141,"column":40},"generated":{"line":1,"column":1672}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":141,"column":63},"generated":{"line":1,"column":1694}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":144,"column":9},"generated":{"line":1,"column":1718}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":144,"column":9},"generated":{"line":1,"column":1723}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":144,"column":14},"generated":{"line":1,"column":1728}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"to","original":{"line":144,"column":32},"generated":{"line":1,"column":1745}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"toB58String","original":{"line":144,"column":35},"generated":{"line":1,"column":1747}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":145,"column":9},"generated":{"line":1,"column":1762}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":145,"column":9},"generated":{"line":1,"column":1767}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"switch","original":{"line":145,"column":13},"generated":{"line":1,"column":1771}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dial","original":{"line":145,"column":20},"generated":{"line":1,"column":1778}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"to","original":{"line":145,"column":25},"generated":{"line":1,"column":1783}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":145,"column":29},"generated":{"line":1,"column":1785}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"PROTOCOL_DHT","original":{"line":145,"column":31},"generated":{"line":1,"column":1787}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":145,"column":45},"generated":{"line":1,"column":1800}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":145,"column":46},"generated":{"line":1,"column":1801}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":145,"column":51},"generated":{"line":1,"column":1803}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":146,"column":10},"generated":{"line":1,"column":1808}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":146,"column":10},"generated":{"line":1,"column":1811}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":147,"column":15},"generated":{"line":1,"column":1813}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":147,"column":15},"generated":{"line":1,"column":1820}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":147,"column":24},"generated":{"line":1,"column":1822}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_writeReadMessage","original":{"line":150,"column":11},"generated":{"line":1,"column":1825}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_writeReadMessage","original":{"line":150,"column":11},"generated":{"line":1,"column":1830}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":150,"column":29},"generated":{"line":1,"column":1848}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":150,"column":35},"generated":{"line":1,"column":1850}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"serialize","original":{"line":150,"column":39},"generated":{"line":1,"column":1852}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":150,"column":52},"generated":{"line":1,"column":1864}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"sendMessage","original":{"line":162,"column":2},"generated":{"line":1,"column":1869}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"to","original":{"line":162,"column":15},"generated":{"line":1,"column":1881}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":162,"column":19},"generated":{"line":1,"column":1883}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":162,"column":24},"generated":{"line":1,"column":1885}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":163,"column":8},"generated":{"line":1,"column":1888}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":163,"column":9},"generated":{"line":1,"column":1892}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"isConnected","original":{"line":163,"column":14},"generated":{"line":1,"column":1897}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"setImmediate","original":{"line":164,"column":13},"generated":{"line":1,"column":1909}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"setImmediate","original":{"line":164,"column":13},"generated":{"line":1,"column":1916}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":164,"column":26},"generated":{"line":1,"column":1918}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":164,"column":32},"generated":{"line":1,"column":1922}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"errcode","original":{"line":164,"column":41},"generated":{"line":1,"column":1924}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":164,"column":49},"generated":{"line":1,"column":1926}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Error","original":{"line":164,"column":53},"generated":{"line":1,"column":1930}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":164,"column":59},"generated":{"line":1,"column":1936}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":164,"column":82},"generated":{"line":1,"column":1958}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":167,"column":9},"generated":{"line":1,"column":1983}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_log","original":{"line":167,"column":9},"generated":{"line":1,"column":1988}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":167,"column":14},"generated":{"line":1,"column":1993}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"to","original":{"line":167,"column":32},"generated":{"line":1,"column":2010}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"toB58String","original":{"line":167,"column":35},"generated":{"line":1,"column":2012}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":169,"column":9},"generated":{"line":1,"column":2027}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dht","original":{"line":169,"column":9},"generated":{"line":1,"column":2032}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"switch","original":{"line":169,"column":13},"generated":{"line":1,"column":2036}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"dial","original":{"line":169,"column":20},"generated":{"line":1,"column":2043}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"to","original":{"line":169,"column":25},"generated":{"line":1,"column":2048}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":169,"column":29},"generated":{"line":1,"column":2050}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"PROTOCOL_DHT","original":{"line":169,"column":31},"generated":{"line":1,"column":2052}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":169,"column":45},"generated":{"line":1,"column":2065}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":169,"column":46},"generated":{"line":1,"column":2066}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":169,"column":51},"generated":{"line":1,"column":2068}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":170,"column":10},"generated":{"line":1,"column":2073}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":170,"column":10},"generated":{"line":1,"column":2076}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":171,"column":15},"generated":{"line":1,"column":2078}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":171,"column":15},"generated":{"line":1,"column":2085}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":171,"column":24},"generated":{"line":1,"column":2087}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_writeMessage","original":{"line":174,"column":11},"generated":{"line":1,"column":2090}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_writeMessage","original":{"line":174,"column":11},"generated":{"line":1,"column":2095}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":174,"column":25},"generated":{"line":1,"column":2109}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":174,"column":31},"generated":{"line":1,"column":2111}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"serialize","original":{"line":174,"column":35},"generated":{"line":1,"column":2113}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":174,"column":48},"generated":{"line":1,"column":2125}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_writeReadMessage","original":{"line":189,"column":2},"generated":{"line":1,"column":2130}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":189,"column":21},"generated":{"line":1,"column":2148}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":189,"column":27},"generated":{"line":1,"column":2150}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":189,"column":32},"generated":{"line":1,"column":2152}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"timeout","original":{"line":190,"column":4},"generated":{"line":1,"column":2155}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"writeReadMessage","original":{"line":191,"column":6},"generated":{"line":1,"column":2157}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":192,"column":6},"generated":{"line":1,"column":2159}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"readMessageTimeout","original":{"line":192,"column":11},"generated":{"line":1,"column":2164}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"timeout","original":{"line":190,"column":4},"generated":{"line":1,"column":2183}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":193,"column":6},"generated":{"line":1,"column":2184}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":193,"column":12},"generated":{"line":1,"column":2186}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":193,"column":17},"generated":{"line":1,"column":2188}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"_writeMessage","original":{"line":205,"column":2},"generated":{"line":1,"column":2191}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":205,"column":17},"generated":{"line":1,"column":2205}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":205,"column":23},"generated":{"line":1,"column":2207}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":205,"column":28},"generated":{"line":1,"column":2209}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":206,"column":4},"generated":{"line":1,"column":2212}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":207,"column":6},"generated":{"line":1,"column":2214}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"values","original":{"line":207,"column":11},"generated":{"line":1,"column":2216}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":207,"column":18},"generated":{"line":1,"column":2223}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":207,"column":19},"generated":{"line":1,"column":2224}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"lp","original":{"line":208,"column":6},"generated":{"line":1,"column":2228}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"encode","original":{"line":208,"column":9},"generated":{"line":1,"column":2230}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":209,"column":6},"generated":{"line":1,"column":2239}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":210,"column":6},"generated":{"line":1,"column":2241}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"onEnd","original":{"line":210,"column":11},"generated":{"line":1,"column":2243}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":210,"column":17},"generated":{"line":1,"column":2249}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":215,"column":0},"generated":{"line":1,"column":2254}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"writeReadMessage","original":{"line":215,"column":9},"generated":{"line":1,"column":2263}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":215,"column":27},"generated":{"line":1,"column":2265}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":215,"column":33},"generated":{"line":1,"column":2267}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":215,"column":38},"generated":{"line":1,"column":2269}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":216,"column":2},"generated":{"line":1,"column":2272}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":217,"column":4},"generated":{"line":1,"column":2274}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"values","original":{"line":217,"column":9},"generated":{"line":1,"column":2276}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":217,"column":16},"generated":{"line":1,"column":2283}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":217,"column":17},"generated":{"line":1,"column":2284}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"lp","original":{"line":218,"column":4},"generated":{"line":1,"column":2288}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"encode","original":{"line":218,"column":7},"generated":{"line":1,"column":2290}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"conn","original":{"line":219,"column":4},"generated":{"line":1,"column":2299}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":220,"column":4},"generated":{"line":1,"column":2301}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"filter","original":{"line":220,"column":9},"generated":{"line":1,"column":2303}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":220,"column":17},"generated":{"line":1,"column":2310}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"msg","original":{"line":220,"column":25},"generated":{"line":1,"column":2313}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"length","original":{"line":220,"column":29},"generated":{"line":1,"column":2315}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"c","original":{"line":220,"column":38},"generated":{"line":1,"column":2322}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"maxMessageSize","original":{"line":220,"column":40},"generated":{"line":1,"column":2324}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"lp","original":{"line":221,"column":4},"generated":{"line":1,"column":2340}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"decode","original":{"line":221,"column":7},"generated":{"line":1,"column":2342}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"pull","original":{"line":222,"column":4},"generated":{"line":1,"column":2351}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"collect","original":{"line":222,"column":9},"generated":{"line":1,"column":2353}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":222,"column":17},"generated":{"line":1,"column":2361}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":222,"column":18},"generated":{"line":1,"column":2362}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"res","original":{"line":222,"column":23},"generated":{"line":1,"column":2364}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":223,"column":10},"generated":{"line":1,"column":2369}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":223,"column":10},"generated":{"line":1,"column":2372}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":224,"column":15},"generated":{"line":1,"column":2374}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":224,"column":15},"generated":{"line":1,"column":2381}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":224,"column":24},"generated":{"line":1,"column":2383}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"res","original":{"line":226,"column":10},"generated":{"line":1,"column":2386}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":226,"column":25},"generated":{"line":1,"column":2389}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"res","original":{"line":226,"column":10},"generated":{"line":1,"column":2393}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"length","original":{"line":226,"column":14},"generated":{"line":1,"column":2395}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":227,"column":15},"generated":{"line":1,"column":2402}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":227,"column":15},"generated":{"line":1,"column":2409}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"errcode","original":{"line":227,"column":24},"generated":{"line":1,"column":2411}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":227,"column":32},"generated":{"line":1,"column":2413}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Error","original":{"line":227,"column":36},"generated":{"line":1,"column":2417}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":227,"column":42},"generated":{"line":1,"column":2423}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":227,"column":66},"generated":{"line":1,"column":2446}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"response","original":{"line":230,"column":10},"generated":{"line":1,"column":2474}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"response","original":{"line":230,"column":10},"generated":{"line":1,"column":2478}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":231,"column":10},"generated":{"line":1,"column":2480}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"response","original":{"line":232,"column":8},"generated":{"line":1,"column":2484}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Message","original":{"line":232,"column":19},"generated":{"line":1,"column":2486}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"deserialize","original":{"line":232,"column":27},"generated":{"line":1,"column":2488}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"res","original":{"line":232,"column":39},"generated":{"line":1,"column":2500}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":232,"column":43},"generated":{"line":1,"column":2502}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":233,"column":8},"generated":{"line":1,"column":2506}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":233,"column":15},"generated":{"line":1,"column":2512}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":234,"column":15},"generated":{"line":1,"column":2515}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":234,"column":15},"generated":{"line":1,"column":2522}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"errcode","original":{"line":234,"column":24},"generated":{"line":1,"column":2524}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"err","original":{"line":234,"column":32},"generated":{"line":1,"column":2526}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":234,"column":37},"generated":{"line":1,"column":2528}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"callback","original":{"line":237,"column":6},"generated":{"line":1,"column":2564}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","original":{"line":237,"column":15},"generated":{"line":1,"column":2566}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"response","original":{"line":237,"column":21},"generated":{"line":1,"column":2571}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"module","original":{"line":242,"column":0},"generated":{"line":1,"column":2577}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"exports","original":{"line":242,"column":7},"generated":{"line":1,"column":2584}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js","name":"Network","original":{"line":242,"column":17},"generated":{"line":1,"column":2592}}],"sources":{"node_modules/ipfs/node_modules/libp2p-kad-dht/src/network.js":"'use strict'\n\nconst pull = require('pull-stream')\nconst timeout = require('async/timeout')\nconst lp = require('pull-length-prefixed')\nconst setImmediate = require('async/setImmediate')\n\nconst errcode = require('err-code')\n\nconst rpc = require('./rpc')\nconst c = require('./constants')\nconst Message = require('./message')\nconst utils = require('./utils')\n\n/**\n * Handle network operations for the dht\n */\nclass Network {\n  /**\n   * Create a new network.\n   *\n   * @param {KadDHT} self\n   */\n  constructor (self) {\n    this.dht = self\n    this.readMessageTimeout = c.READ_MESSAGE_TIMEOUT\n    this._log = utils.logger(this.dht.peerInfo.id, 'net')\n    this._rpc = rpc(this.dht)\n    this._onPeerConnected = this._onPeerConnected.bind(this)\n    this._running = false\n  }\n\n  /**\n   * Start the network.\n   *\n   * @param {function(Error)} callback\n   * @returns {void}\n   */\n  start (callback) {\n    const cb = (err) => setImmediate(() => callback(err))\n\n    if (this._running) {\n      return cb(errcode(new Error('Network is already running'), 'ERR_NETWORK_ALREADY_RUNNING'))\n    }\n\n    // TODO add a way to check if switch has started or not\n    if (!this.dht.isStarted) {\n      return cb(errcode(new Error('Can not start network'), 'ERR_CANNOT_START_NETWORK'))\n    }\n\n    this._running = true\n\n    // handle incoming connections\n    this.dht.switch.handle(c.PROTOCOL_DHT, this._rpc)\n\n    // handle new connections\n    this.dht.switch.on('peer-mux-established', this._onPeerConnected)\n\n    cb()\n  }\n\n  /**\n   * Stop all network activity.\n   *\n   * @param {function(Error)} callback\n   * @returns {void}\n   */\n  stop (callback) {\n    const cb = (err) => setImmediate(() => callback(err))\n\n    if (!this.dht.isStarted && !this.isStarted) {\n      return cb(errcode(new Error('Network is already stopped'), 'ERR_NETWORK_ALREADY_STOPPED'))\n    }\n    this._running = false\n    this.dht.switch.removeListener('peer-mux-established', this._onPeerConnected)\n\n    this.dht.switch.unhandle(c.PROTOCOL_DHT)\n    cb()\n  }\n\n  /**\n   * Is the network online?\n   *\n   * @type {bool}\n   */\n  get isStarted () {\n    return this._running\n  }\n\n  /**\n   * Are all network components there?\n   *\n   * @type {bool}\n   */\n  get isConnected () {\n    // TODO add a way to check if switch has started or not\n    return this.dht.isStarted && this.isStarted\n  }\n\n  /**\n   * Handle new connections in the switch.\n   *\n   * @param {PeerInfo} peer\n   * @returns {void}\n   * @private\n   */\n  _onPeerConnected (peer) {\n    if (!this.isConnected) {\n      return this._log.error('Network is offline')\n    }\n\n    this.dht.switch.dial(peer, c.PROTOCOL_DHT, (err, conn) => {\n      if (err) {\n        return this._log('%s does not support protocol: %s', peer.id.toB58String(), c.PROTOCOL_DHT)\n      }\n\n      // TODO: conn.close()\n      pull(pull.empty(), conn)\n\n      this.dht._add(peer, (err) => {\n        if (err) {\n          return this._log.error('Failed to add to the routing table', err)\n        }\n\n        this._log('added to the routing table: %s', peer.id.toB58String())\n      })\n    })\n  }\n\n  /**\n   * Send a request and record RTT for latency measurements.\n   *\n   * @param {PeerId} to - The peer that should receive a message\n   * @param {Message} msg - The message to send.\n   * @param {function(Error, Message)} callback\n   * @returns {void}\n   */\n  sendRequest (to, msg, callback) {\n    // TODO: record latency\n    if (!this.isConnected) {\n      return callback(errcode(new Error('Network is offline'), 'ERR_NETWORK_OFFLINE'))\n    }\n\n    this._log('sending to: %s', to.toB58String())\n    this.dht.switch.dial(to, c.PROTOCOL_DHT, (err, conn) => {\n      if (err) {\n        return callback(err)\n      }\n\n      this._writeReadMessage(conn, msg.serialize(), callback)\n    })\n  }\n\n  /**\n   * Sends a message without expecting an answer.\n   *\n   * @param {PeerId} to\n   * @param {Message} msg\n   * @param {function(Error)} callback\n   * @returns {void}\n   */\n  sendMessage (to, msg, callback) {\n    if (!this.isConnected) {\n      return setImmediate(() => callback(errcode(new Error('Network is offline'), 'ERR_NETWORK_OFFLINE')))\n    }\n\n    this._log('sending to: %s', to.toB58String())\n\n    this.dht.switch.dial(to, c.PROTOCOL_DHT, (err, conn) => {\n      if (err) {\n        return callback(err)\n      }\n\n      this._writeMessage(conn, msg.serialize(), callback)\n    })\n  }\n\n  /**\n   * Write a message and read its response.\n   * If no response is received after the specified timeout\n   * this will error out.\n   *\n   * @param {Connection} conn - the connection to use\n   * @param {Buffer} msg - the message to send\n   * @param {function(Error, Message)} callback\n   * @returns {void}\n   * @private\n   */\n  _writeReadMessage (conn, msg, callback) {\n    timeout(\n      writeReadMessage,\n      this.readMessageTimeout\n    )(conn, msg, callback)\n  }\n\n  /**\n   * Write a message to the given connection.\n   *\n   * @param {Connection} conn - the connection to use\n   * @param {Buffer} msg - the message to send\n   * @param {function(Error)} callback\n   * @returns {void}\n   * @private\n   */\n  _writeMessage (conn, msg, callback) {\n    pull(\n      pull.values([msg]),\n      lp.encode(),\n      conn,\n      pull.onEnd(callback)\n    )\n  }\n}\n\nfunction writeReadMessage (conn, msg, callback) {\n  pull(\n    pull.values([msg]),\n    lp.encode(),\n    conn,\n    pull.filter((msg) => msg.length < c.maxMessageSize),\n    lp.decode(),\n    pull.collect((err, res) => {\n      if (err) {\n        return callback(err)\n      }\n      if (res.length === 0) {\n        return callback(errcode(new Error('No message received'), 'ERR_NO_MESSAGE_RECEIVED'))\n      }\n\n      let response\n      try {\n        response = Message.deserialize(res[0])\n      } catch (err) {\n        return callback(errcode(err, 'ERR_FAILED_DESERIALIZE_RESPONSE'))\n      }\n\n      callback(null, response)\n    })\n  )\n}\n\nmodule.exports = Network\n"},"lineCount":null}},"error":null,"hash":"0bea81745ead8a8776df19d78917c3d4","cacheData":{"env":{}}}