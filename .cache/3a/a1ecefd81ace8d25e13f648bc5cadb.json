{"id":"B66C","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/package.json","includedInParent":true,"mtime":1582579778659},{"name":"events","loc":{"line":3,"column":29},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/connection.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/events/events.js"},{"name":"pull-stream","loc":{"line":4,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/connection.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/pull-stream/index.js"},{"name":"pull-pushable","loc":{"line":5,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/connection.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/pull-pushable/index.js"},{"name":"./protocol","loc":{"line":7,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/connection.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/protocol.js"},{"name":"./encoding","loc":{"line":8,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/connection.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/encoding.js"},{"name":"./peer-id","loc":{"line":9,"column":26},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/connection.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/peer-id.js"},{"name":"./libp2p","loc":{"line":10,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/connection.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs-pubsub-room/src/libp2p.js"}],"generated":{"js":"\"use strict\";const e=require(\"events\"),t=require(\"pull-stream\"),i=require(\"pull-pushable\"),n=require(\"./protocol\"),s=require(\"./encoding\"),o=require(\"./peer-id\"),c=require(\"./libp2p\");module.exports=class extends e{constructor(e,t,i){super(),this._id=e,this._ipfs=t,this._room=i,this._connection=null,this._connecting=!1}push(e){this._connection?this._connection.push(s(e)):(this.once(\"connect\",()=>this.push(e)),this._connecting||this._getConnection())}stop(){this._connection&&this._connection.end()}_getConnection(){this._connecting=!0,this._getPeerAddresses(this._id,(e,s)=>{e?this.emit(\"error\",e):s.length?c(this._ipfs).dialProtocol(s[0],n,(e,n)=>{if(e)return void this.emit(\"disconnect\");this._connecting=!1;const s=i();this._connection=s,t(s,n,t.onEnd(()=>{delete this._connection,this.emit(\"disconnect\")})),this.emit(\"connect\",s)}):this.emit(\"disconnect\")})}_getPeerAddresses(e,t){this._ipfs.swarm.peers((i,n)=>{i?t(i):t(null,n.filter(t=>o(t.peer)===e).map(e=>e.peer))})}};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":3,"column":0},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":3,"column":0},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":3,"column":0},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":4,"column":0},"generated":{"line":1,"column":39}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":4,"column":0},"generated":{"line":1,"column":41}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":4,"column":0},"generated":{"line":1,"column":49}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":5,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":5,"column":0},"generated":{"line":1,"column":66}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":5,"column":0},"generated":{"line":1,"column":74}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":7,"column":0},"generated":{"line":1,"column":91}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":7,"column":0},"generated":{"line":1,"column":93}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":7,"column":0},"generated":{"line":1,"column":101}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":8,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":8,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":8,"column":0},"generated":{"line":1,"column":125}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":9,"column":0},"generated":{"line":1,"column":139}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":9,"column":0},"generated":{"line":1,"column":141}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":9,"column":0},"generated":{"line":1,"column":149}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":10,"column":0},"generated":{"line":1,"column":162}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":10,"column":0},"generated":{"line":1,"column":164}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":10,"column":0},"generated":{"line":1,"column":172}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":12,"column":0},"generated":{"line":1,"column":184}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":12,"column":0},"generated":{"line":1,"column":191}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":12,"column":0},"generated":{"line":1,"column":199}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":12,"column":0},"generated":{"line":1,"column":213}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":13,"column":0},"generated":{"line":1,"column":215}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":13,"column":0},"generated":{"line":1,"column":227}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":13,"column":0},"generated":{"line":1,"column":229}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":13,"column":0},"generated":{"line":1,"column":231}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":14,"column":0},"generated":{"line":1,"column":234}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":15,"column":0},"generated":{"line":1,"column":242}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":15,"column":0},"generated":{"line":1,"column":247}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":15,"column":0},"generated":{"line":1,"column":251}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":16,"column":0},"generated":{"line":1,"column":253}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":16,"column":0},"generated":{"line":1,"column":258}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":16,"column":0},"generated":{"line":1,"column":264}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":17,"column":0},"generated":{"line":1,"column":266}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":17,"column":0},"generated":{"line":1,"column":271}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":17,"column":0},"generated":{"line":1,"column":277}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":18,"column":0},"generated":{"line":1,"column":279}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":18,"column":0},"generated":{"line":1,"column":284}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":18,"column":0},"generated":{"line":1,"column":296}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":19,"column":0},"generated":{"line":1,"column":301}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":19,"column":0},"generated":{"line":1,"column":306}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":19,"column":0},"generated":{"line":1,"column":319}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":22,"column":0},"generated":{"line":1,"column":321}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":22,"column":0},"generated":{"line":1,"column":326}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":23,"column":0},"generated":{"line":1,"column":329}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":23,"column":0},"generated":{"line":1,"column":334}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":24,"column":0},"generated":{"line":1,"column":346}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":24,"column":0},"generated":{"line":1,"column":351}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":24,"column":0},"generated":{"line":1,"column":363}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":24,"column":0},"generated":{"line":1,"column":368}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":24,"column":0},"generated":{"line":1,"column":370}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":26,"column":0},"generated":{"line":1,"column":375}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":26,"column":0},"generated":{"line":1,"column":380}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":26,"column":0},"generated":{"line":1,"column":385}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":26,"column":0},"generated":{"line":1,"column":395}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":26,"column":0},"generated":{"line":1,"column":399}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":26,"column":0},"generated":{"line":1,"column":404}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":26,"column":0},"generated":{"line":1,"column":409}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":27,"column":0},"generated":{"line":1,"column":413}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":27,"column":0},"generated":{"line":1,"column":418}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":28,"column":0},"generated":{"line":1,"column":431}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":28,"column":0},"generated":{"line":1,"column":436}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":33,"column":0},"generated":{"line":1,"column":454}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":34,"column":0},"generated":{"line":1,"column":461}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":34,"column":0},"generated":{"line":1,"column":466}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":35,"column":0},"generated":{"line":1,"column":479}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":35,"column":0},"generated":{"line":1,"column":484}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":35,"column":0},"generated":{"line":1,"column":496}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":39,"column":0},"generated":{"line":1,"column":502}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":40,"column":0},"generated":{"line":1,"column":519}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":40,"column":0},"generated":{"line":1,"column":524}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":40,"column":0},"generated":{"line":1,"column":537}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":41,"column":0},"generated":{"line":1,"column":539}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":41,"column":0},"generated":{"line":1,"column":544}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":41,"column":0},"generated":{"line":1,"column":562}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":41,"column":0},"generated":{"line":1,"column":567}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":41,"column":0},"generated":{"line":1,"column":571}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":41,"column":0},"generated":{"line":1,"column":572}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":41,"column":0},"generated":{"line":1,"column":574}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":42,"column":0},"generated":{"line":1,"column":579}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":43,"column":0},"generated":{"line":1,"column":581}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":43,"column":0},"generated":{"line":1,"column":586}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":43,"column":0},"generated":{"line":1,"column":591}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":43,"column":0},"generated":{"line":1,"column":599}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":47,"column":0},"generated":{"line":1,"column":602}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":47,"column":0},"generated":{"line":1,"column":604}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":611}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":613}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":618}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":625}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":638}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":640}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":643}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":645}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":646}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":52,"column":0},"generated":{"line":1,"column":648}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":53,"column":0},"generated":{"line":1,"column":653}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":53,"column":0},"generated":{"line":1,"column":656}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":55,"column":0},"generated":{"line":1,"column":658}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":54,"column":0},"generated":{"line":1,"column":670}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":54,"column":0},"generated":{"line":1,"column":675}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":54,"column":0},"generated":{"line":1,"column":680}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":57,"column":0},"generated":{"line":1,"column":694}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":57,"column":0},"generated":{"line":1,"column":699}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":57,"column":0},"generated":{"line":1,"column":712}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":58,"column":0},"generated":{"line":1,"column":714}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":58,"column":0},"generated":{"line":1,"column":720}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":58,"column":0},"generated":{"line":1,"column":722}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":59,"column":0},"generated":{"line":1,"column":726}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":59,"column":0},"generated":{"line":1,"column":731}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":59,"column":0},"generated":{"line":1,"column":743}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":60,"column":0},"generated":{"line":1,"column":745}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":61,"column":0},"generated":{"line":1,"column":747}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":62,"column":0},"generated":{"line":1,"column":749}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":63,"column":0},"generated":{"line":1,"column":751}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":63,"column":0},"generated":{"line":1,"column":753}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":63,"column":0},"generated":{"line":1,"column":759}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":64,"column":0},"generated":{"line":1,"column":771}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":64,"column":0},"generated":{"line":1,"column":776}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":65,"column":0},"generated":{"line":1,"column":788}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":65,"column":0},"generated":{"line":1,"column":793}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":65,"column":0},"generated":{"line":1,"column":798}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":68,"column":0},"generated":{"line":1,"column":815}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":68,"column":0},"generated":{"line":1,"column":820}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":68,"column":0},"generated":{"line":1,"column":825}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":68,"column":0},"generated":{"line":1,"column":835}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":48,"column":0},"generated":{"line":1,"column":840}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":48,"column":0},"generated":{"line":1,"column":845}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":48,"column":0},"generated":{"line":1,"column":850}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":73,"column":0},"generated":{"line":1,"column":866}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":73,"column":0},"generated":{"line":1,"column":884}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":73,"column":0},"generated":{"line":1,"column":886}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":74,"column":0},"generated":{"line":1,"column":889}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":74,"column":0},"generated":{"line":1,"column":894}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":74,"column":0},"generated":{"line":1,"column":900}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":74,"column":0},"generated":{"line":1,"column":906}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":74,"column":0},"generated":{"line":1,"column":912}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":74,"column":0},"generated":{"line":1,"column":913}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":74,"column":0},"generated":{"line":1,"column":915}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":75,"column":0},"generated":{"line":1,"column":920}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":76,"column":0},"generated":{"line":1,"column":922}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":76,"column":0},"generated":{"line":1,"column":924}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":80,"column":0},"generated":{"line":1,"column":927}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":81,"column":0},"generated":{"line":1,"column":929}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":82,"column":0},"generated":{"line":1,"column":934}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":83,"column":0},"generated":{"line":1,"column":936}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":83,"column":0},"generated":{"line":1,"column":943}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":83,"column":0},"generated":{"line":1,"column":946}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":83,"column":0},"generated":{"line":1,"column":948}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":83,"column":0},"generated":{"line":1,"column":950}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":83,"column":0},"generated":{"line":1,"column":958}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":84,"column":0},"generated":{"line":1,"column":961}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":84,"column":0},"generated":{"line":1,"column":965}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":84,"column":0},"generated":{"line":1,"column":968}},{"source":"node_modules/ipfs-pubsub-room/src/connection.js","original":{"line":84,"column":0},"generated":{"line":1,"column":970}}],"sources":{"node_modules/ipfs-pubsub-room/src/connection.js":"'use strict'\n\nconst EventEmitter = require('events')\nconst pull = require('pull-stream')\nconst Pushable = require('pull-pushable')\n\nconst PROTOCOL = require('./protocol')\nconst encoding = require('./encoding')\nconst getPeerId = require('./peer-id')\nconst libp2p = require('./libp2p')\n\nmodule.exports = class Connection extends EventEmitter {\n  constructor (id, ipfs, room) {\n    super()\n    this._id = id\n    this._ipfs = ipfs\n    this._room = room\n    this._connection = null\n    this._connecting = false\n  }\n\n  push (message) {\n    if (this._connection) {\n      this._connection.push(encoding(message))\n    } else {\n      this.once('connect', () => this.push(message))\n      if (!this._connecting) {\n        this._getConnection()\n      }\n    }\n  }\n\n  stop () {\n    if (this._connection) {\n      this._connection.end()\n    }\n  }\n\n  _getConnection () {\n    this._connecting = true\n    this._getPeerAddresses(this._id, (err, peerAddresses) => {\n      if (err) {\n        this.emit('error', err)\n        return // early\n      }\n\n      if (!peerAddresses.length) {\n        this.emit('disconnect')\n        return // early\n      }\n\n      libp2p(this._ipfs).dialProtocol(peerAddresses[0], PROTOCOL, (err, conn) => {\n        if (err) {\n          this.emit('disconnect')\n          return // early\n        }\n        this._connecting = false\n        const pushable = Pushable()\n        this._connection = pushable\n        pull(\n          pushable,\n          conn,\n          pull.onEnd(() => {\n            delete this._connection\n            this.emit('disconnect')\n          })\n        )\n        this.emit('connect', pushable)\n      })\n    })\n  }\n\n  _getPeerAddresses (peerId, callback) {\n    this._ipfs.swarm.peers((err, peersAddresses) => {\n      if (err) {\n        callback(err)\n        return // early\n      }\n\n      callback(\n        null,\n        peersAddresses\n          .filter((peerAddress) => getPeerId(peerAddress.peer) === peerId)\n          .map(peerAddress => peerAddress.peer))\n    })\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"6939c468daa714a822f09af733973c10","cacheData":{"env":{}}}