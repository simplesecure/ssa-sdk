{"id":"SIdB","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/package.json","includedInParent":true,"mtime":1582579780031},{"name":"pull-stream/pull","loc":{"line":3,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-stream/pull.js"},{"name":"pull-stream/sources/values","loc":{"line":4,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-stream/sources/values.js"},{"name":"pull-length-prefixed","loc":{"line":5,"column":19},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-length-prefixed/src/index.js"},{"name":"./message","loc":{"line":7,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/identify/message.js"},{"name":"buffer","parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/node-libs-browser/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar e=require(\"buffer\").Buffer;const r=require(\"pull-stream/pull\"),o=require(\"pull-stream/sources/values\"),s=require(\"pull-length-prefixed\"),u=require(\"./message\");module.exports=((l,t)=>{l.getObservedAddrs((d,i)=>{if(d)return;i=i[0];let p=e.alloc(0);t.id.pubKey&&(p=t.id.pubKey.bytes);const f=u.encode({protocolVersion:\"ipfs/0.1.0\",agentVersion:\"na\",publicKey:p,listenAddrs:t.multiaddrs.toArray().map(e=>e.buffer),observedAddr:i?i.buffer:e.from(\"\"),protocols:Array.from(t.protocols)});r(o([f]),s.encode(),l)})});"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":9,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":9,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":9,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":9,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":9,"column":0},"generated":{"line":2,"column":24}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":3,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pull","original":{"line":3,"column":6},"generated":{"line":2,"column":37}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"require","original":{"line":3,"column":13},"generated":{"line":2,"column":39}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":3,"column":21},"generated":{"line":2,"column":47}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"values","original":{"line":4,"column":6},"generated":{"line":2,"column":67}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"require","original":{"line":4,"column":15},"generated":{"line":2,"column":69}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":4,"column":23},"generated":{"line":2,"column":77}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"lp","original":{"line":5,"column":6},"generated":{"line":2,"column":107}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"require","original":{"line":5,"column":11},"generated":{"line":2,"column":109}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":5,"column":19},"generated":{"line":2,"column":117}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"msg","original":{"line":7,"column":6},"generated":{"line":2,"column":141}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"require","original":{"line":7,"column":12},"generated":{"line":2,"column":143}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":7,"column":20},"generated":{"line":2,"column":151}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"module","original":{"line":9,"column":0},"generated":{"line":2,"column":164}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"exports","original":{"line":9,"column":7},"generated":{"line":2,"column":171}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":9,"column":17},"generated":{"line":2,"column":179}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"conn","original":{"line":9,"column":18},"generated":{"line":2,"column":181}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pInfoSelf","original":{"line":9,"column":24},"generated":{"line":2,"column":183}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"conn","original":{"line":11,"column":2},"generated":{"line":2,"column":188}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"getObservedAddrs","original":{"line":11,"column":7},"generated":{"line":2,"column":190}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":11,"column":24},"generated":{"line":2,"column":207}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"err","original":{"line":11,"column":25},"generated":{"line":2,"column":208}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"observedAddrs","original":{"line":11,"column":30},"generated":{"line":2,"column":210}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"err","original":{"line":12,"column":8},"generated":{"line":2,"column":215}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"err","original":{"line":12,"column":8},"generated":{"line":2,"column":218}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":12,"column":15},"generated":{"line":2,"column":220}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"observedAddrs","original":{"line":13,"column":4},"generated":{"line":2,"column":227}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"observedAddrs","original":{"line":13,"column":20},"generated":{"line":2,"column":229}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":13,"column":34},"generated":{"line":2,"column":231}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"publicKey","original":{"line":15,"column":8},"generated":{"line":2,"column":234}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"publicKey","original":{"line":15,"column":8},"generated":{"line":2,"column":238}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"Buffer","original":{"line":15,"column":20},"generated":{"line":2,"column":240}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"alloc","original":{"line":15,"column":27},"generated":{"line":2,"column":242}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":15,"column":33},"generated":{"line":2,"column":248}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pInfoSelf","original":{"line":16,"column":8},"generated":{"line":2,"column":251}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"id","original":{"line":16,"column":18},"generated":{"line":2,"column":253}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pubKey","original":{"line":16,"column":21},"generated":{"line":2,"column":256}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"publicKey","original":{"line":17,"column":6},"generated":{"line":2,"column":265}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pInfoSelf","original":{"line":17,"column":18},"generated":{"line":2,"column":267}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"id","original":{"line":17,"column":28},"generated":{"line":2,"column":269}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pubKey","original":{"line":17,"column":31},"generated":{"line":2,"column":272}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"bytes","original":{"line":17,"column":38},"generated":{"line":2,"column":279}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"msgSend","original":{"line":20,"column":10},"generated":{"line":2,"column":286}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"msgSend","original":{"line":20,"column":10},"generated":{"line":2,"column":292}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"msg","original":{"line":20,"column":20},"generated":{"line":2,"column":294}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"encode","original":{"line":20,"column":24},"generated":{"line":2,"column":296}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":20,"column":31},"generated":{"line":2,"column":303}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"protocolVersion","original":{"line":21,"column":6},"generated":{"line":2,"column":304}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":21,"column":23},"generated":{"line":2,"column":320}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"agentVersion","original":{"line":22,"column":6},"generated":{"line":2,"column":333}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":22,"column":20},"generated":{"line":2,"column":346}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"publicKey","original":{"line":23,"column":6},"generated":{"line":2,"column":351}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"publicKey","original":{"line":23,"column":17},"generated":{"line":2,"column":361}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"listenAddrs","original":{"line":24,"column":6},"generated":{"line":2,"column":363}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pInfoSelf","original":{"line":24,"column":19},"generated":{"line":2,"column":375}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"multiaddrs","original":{"line":24,"column":29},"generated":{"line":2,"column":377}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"toArray","original":{"line":24,"column":40},"generated":{"line":2,"column":388}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"map","original":{"line":24,"column":50},"generated":{"line":2,"column":398}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"ma","original":{"line":24,"column":55},"generated":{"line":2,"column":402}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"ma","original":{"line":24,"column":62},"generated":{"line":2,"column":405}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"buffer","original":{"line":24,"column":65},"generated":{"line":2,"column":407}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"observedAddr","original":{"line":25,"column":6},"generated":{"line":2,"column":415}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"observedAddrs","original":{"line":25,"column":20},"generated":{"line":2,"column":428}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"observedAddrs","original":{"line":25,"column":36},"generated":{"line":2,"column":430}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"buffer","original":{"line":25,"column":50},"generated":{"line":2,"column":432}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"Buffer","original":{"line":25,"column":59},"generated":{"line":2,"column":439}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"from","original":{"line":25,"column":66},"generated":{"line":2,"column":441}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":25,"column":71},"generated":{"line":2,"column":446}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"protocols","original":{"line":26,"column":6},"generated":{"line":2,"column":450}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"Array","original":{"line":26,"column":17},"generated":{"line":2,"column":460}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"from","original":{"line":26,"column":23},"generated":{"line":2,"column":466}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pInfoSelf","original":{"line":26,"column":28},"generated":{"line":2,"column":471}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"protocols","original":{"line":26,"column":38},"generated":{"line":2,"column":473}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"pull","original":{"line":29,"column":4},"generated":{"line":2,"column":486}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"values","original":{"line":30,"column":6},"generated":{"line":2,"column":488}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","original":{"line":30,"column":13},"generated":{"line":2,"column":490}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"msgSend","original":{"line":30,"column":14},"generated":{"line":2,"column":491}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"lp","original":{"line":31,"column":6},"generated":{"line":2,"column":495}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"encode","original":{"line":31,"column":9},"generated":{"line":2,"column":497}},{"source":"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js","name":"conn","original":{"line":32,"column":6},"generated":{"line":2,"column":506}}],"sources":{"node_modules/ipfs/node_modules/libp2p/src/identify/listener.js":"'use strict'\n\nconst pull = require('pull-stream/pull')\nconst values = require('pull-stream/sources/values')\nconst lp = require('pull-length-prefixed')\n\nconst msg = require('./message')\n\nmodule.exports = (conn, pInfoSelf) => {\n  // send what I see from the other + my Info\n  conn.getObservedAddrs((err, observedAddrs) => {\n    if (err) { return }\n    observedAddrs = observedAddrs[0]\n\n    let publicKey = Buffer.alloc(0)\n    if (pInfoSelf.id.pubKey) {\n      publicKey = pInfoSelf.id.pubKey.bytes\n    }\n\n    const msgSend = msg.encode({\n      protocolVersion: 'ipfs/0.1.0',\n      agentVersion: 'na',\n      publicKey: publicKey,\n      listenAddrs: pInfoSelf.multiaddrs.toArray().map((ma) => ma.buffer),\n      observedAddr: observedAddrs ? observedAddrs.buffer : Buffer.from(''),\n      protocols: Array.from(pInfoSelf.protocols)\n    })\n\n    pull(\n      values([msgSend]),\n      lp.encode(),\n      conn\n    )\n  })\n}\n"},"lineCount":null}},"error":null,"hash":"8cf344f7277d9d2249fef035122c26a7","cacheData":{"env":{}}}