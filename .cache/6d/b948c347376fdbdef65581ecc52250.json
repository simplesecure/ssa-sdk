{"id":"Zr0Y","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-unixfs-importer/package.json","includedInParent":true,"mtime":1582579780317},{"name":"./dir-sharded","loc":{"line":3,"column":27},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/dir-sharded.js"}],"generated":{"js":"\"use strict\";const t=require(\"./dir-sharded\");async function e(e,r){const a=new t({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1},r);for await(const{key:t,child:n}of e.eachChildSeries())await a.put(t,n);return a}module.exports=async function t(r,a,n,i){let o=a;a.flat&&a.directChildrenCount()>=n&&(o=await e(a,i));const c=o.parent;return c&&(o!==a&&(r&&(r.parent=o),await c.put(o.parentKey,o)),c)?t(o,c,n,i):o};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"DirSharded","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"require","original":{"line":3,"column":19},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":3,"column":27},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":31,"column":0},"generated":{"line":1,"column":46}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"convertToShard","original":{"line":31,"column":15},"generated":{"line":1,"column":61}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"oldDir","original":{"line":31,"column":31},"generated":{"line":1,"column":63}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"options","original":{"line":31,"column":39},"generated":{"line":1,"column":65}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":32,"column":8},"generated":{"line":1,"column":68}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":32,"column":8},"generated":{"line":1,"column":74}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":32,"column":17},"generated":{"line":1,"column":76}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"DirSharded","original":{"line":32,"column":21},"generated":{"line":1,"column":80}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":32,"column":32},"generated":{"line":1,"column":82}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"root","original":{"line":33,"column":4},"generated":{"line":1,"column":83}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"oldDir","original":{"line":33,"column":10},"generated":{"line":1,"column":88}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"root","original":{"line":33,"column":17},"generated":{"line":1,"column":90}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dir","original":{"line":34,"column":4},"generated":{"line":1,"column":95}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":34,"column":9},"generated":{"line":1,"column":100}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":35,"column":4},"generated":{"line":1,"column":102}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"oldDir","original":{"line":35,"column":12},"generated":{"line":1,"column":109}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":35,"column":19},"generated":{"line":1,"column":111}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parentKey","original":{"line":36,"column":4},"generated":{"line":1,"column":118}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"oldDir","original":{"line":36,"column":15},"generated":{"line":1,"column":128}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parentKey","original":{"line":36,"column":22},"generated":{"line":1,"column":130}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"path","original":{"line":37,"column":4},"generated":{"line":1,"column":140}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"oldDir","original":{"line":37,"column":10},"generated":{"line":1,"column":145}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"path","original":{"line":37,"column":17},"generated":{"line":1,"column":147}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dirty","original":{"line":38,"column":4},"generated":{"line":1,"column":152}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"oldDir","original":{"line":38,"column":11},"generated":{"line":1,"column":158}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dirty","original":{"line":38,"column":18},"generated":{"line":1,"column":160}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"flat","original":{"line":39,"column":4},"generated":{"line":1,"column":166}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":39,"column":10},"generated":{"line":1,"column":172}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"options","original":{"line":40,"column":5},"generated":{"line":1,"column":175}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":42,"column":13},"generated":{"line":1,"column":178}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":42,"column":13},"generated":{"line":1,"column":188}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":42,"column":19},"generated":{"line":1,"column":194}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"key","original":{"line":42,"column":21},"generated":{"line":1,"column":198}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":42,"column":19},"generated":{"line":1,"column":200}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"child","original":{"line":42,"column":26},"generated":{"line":1,"column":206}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"oldDir","original":{"line":42,"column":37},"generated":{"line":1,"column":211}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"eachChildSeries","original":{"line":42,"column":44},"generated":{"line":1,"column":213}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":43,"column":10},"generated":{"line":1,"column":237}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"put","original":{"line":43,"column":17},"generated":{"line":1,"column":239}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"key","original":{"line":43,"column":21},"generated":{"line":1,"column":243}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"child","original":{"line":43,"column":26},"generated":{"line":1,"column":245}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":46,"column":9},"generated":{"line":1,"column":248}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":46,"column":9},"generated":{"line":1,"column":255}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"module","original":{"line":5,"column":0},"generated":{"line":1,"column":257}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"exports","original":{"line":5,"column":7},"generated":{"line":1,"column":264}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","original":{"line":5,"column":17},"generated":{"line":1,"column":272}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"flatToShard","original":{"line":5,"column":32},"generated":{"line":1,"column":287}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"child","original":{"line":5,"column":45},"generated":{"line":1,"column":289}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dir","original":{"line":5,"column":52},"generated":{"line":1,"column":291}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"threshold","original":{"line":5,"column":57},"generated":{"line":1,"column":293}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"options","original":{"line":5,"column":68},"generated":{"line":1,"column":295}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":6,"column":6},"generated":{"line":1,"column":298}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":6,"column":6},"generated":{"line":1,"column":302}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dir","original":{"line":6,"column":15},"generated":{"line":1,"column":304}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dir","original":{"line":8,"column":6},"generated":{"line":1,"column":306}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"flat","original":{"line":8,"column":10},"generated":{"line":1,"column":308}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dir","original":{"line":8,"column":18},"generated":{"line":1,"column":314}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"directChildrenCount","original":{"line":8,"column":22},"generated":{"line":1,"column":316}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"threshold","original":{"line":8,"column":47},"generated":{"line":1,"column":339}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":9,"column":4},"generated":{"line":1,"column":343}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"convertToShard","original":{"line":9,"column":19},"generated":{"line":1,"column":351}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dir","original":{"line":9,"column":34},"generated":{"line":1,"column":353}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"options","original":{"line":9,"column":39},"generated":{"line":1,"column":355}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":12,"column":8},"generated":{"line":1,"column":359}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":12,"column":8},"generated":{"line":1,"column":365}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":12,"column":17},"generated":{"line":1,"column":367}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":12,"column":24},"generated":{"line":1,"column":369}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":14,"column":6},"generated":{"line":1,"column":376}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":14,"column":6},"generated":{"line":1,"column":383}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":15,"column":8},"generated":{"line":1,"column":387}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"dir","original":{"line":15,"column":19},"generated":{"line":1,"column":391}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"child","original":{"line":16,"column":10},"generated":{"line":1,"column":395}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"child","original":{"line":17,"column":8},"generated":{"line":1,"column":399}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":17,"column":14},"generated":{"line":1,"column":401}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":17,"column":23},"generated":{"line":1,"column":408}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":20,"column":12},"generated":{"line":1,"column":417}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"put","original":{"line":20,"column":19},"generated":{"line":1,"column":419}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":20,"column":23},"generated":{"line":1,"column":423}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parentKey","original":{"line":20,"column":30},"generated":{"line":1,"column":425}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":20,"column":41},"generated":{"line":1,"column":435}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":23,"column":8},"generated":{"line":1,"column":439}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"flatToShard","original":{"line":24,"column":13},"generated":{"line":1,"column":442}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":24,"column":25},"generated":{"line":1,"column":444}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"parent","original":{"line":24,"column":33},"generated":{"line":1,"column":446}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"threshold","original":{"line":24,"column":41},"generated":{"line":1,"column":448}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"options","original":{"line":24,"column":52},"generated":{"line":1,"column":450}},{"source":"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js","name":"newDir","original":{"line":28,"column":9},"generated":{"line":1,"column":453}}],"sources":{"node_modules/ipfs/node_modules/ipfs-unixfs-importer/src/flat-to-shard.js":"'use strict'\n\nconst DirSharded = require('./dir-sharded')\n\nmodule.exports = async function flatToShard (child, dir, threshold, options) {\n  let newDir = dir\n\n  if (dir.flat && dir.directChildrenCount() >= threshold) {\n    newDir = await convertToShard(dir, options)\n  }\n\n  const parent = newDir.parent\n\n  if (parent) {\n    if (newDir !== dir) {\n      if (child) {\n        child.parent = newDir\n      }\n\n      await parent.put(newDir.parentKey, newDir)\n    }\n\n    if (parent) {\n      return flatToShard(newDir, parent, threshold, options)\n    }\n  }\n\n  return newDir\n}\n\nasync function convertToShard (oldDir, options) {\n  const newDir = new DirSharded({\n    root: oldDir.root,\n    dir: true,\n    parent: oldDir.parent,\n    parentKey: oldDir.parentKey,\n    path: oldDir.path,\n    dirty: oldDir.dirty,\n    flat: false\n  }, options)\n\n  for await (const { key, child } of oldDir.eachChildSeries()) {\n    await newDir.put(key, child)\n  }\n\n  return newDir\n}\n"},"lineCount":null}},"error":null,"hash":"d9082b7ea8429cf07493777123873ca4","cacheData":{"env":{}}}