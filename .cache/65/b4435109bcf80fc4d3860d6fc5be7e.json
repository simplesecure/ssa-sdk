{"id":"WmgX","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/3box-orbitdb-plugins/package.json","includedInParent":true,"mtime":1582579778660},{"name":"orbit-db-io","loc":{"line":1,"column":19},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db-io/index.js"},{"name":"safe-buffer","loc":{"line":2,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/safe-buffer/index.js"},{"name":"did-resolver","loc":{"line":4,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/did-resolver/lib/resolver.js"}],"generated":{"js":"\nconst t=require(\"orbit-db-io\"),e=require(\"safe-buffer\").Buffer,i=require(\"did-resolver\").default,r=\"legacy-ipfs-3box\",s=async t=>{const e=await i(t);return e.publicKey.find(t=>{const i=t.id.split(\"#\");return i[0]===e.id&&(\"subSigningKey\"===i[1]||\"signingKey\"===i[1])}).publicKeyHex};class n{constructor(t,e){this._ipfs=t,this._write=Array.from(e.write||[])}static get type(){return r}get write(){return this._write}async canAppend(t,e){const i=0===t.v?t.key:await s(t.identity.id);return!(!this.write.includes(i)&&!this.write.includes(\"*\"))&&(0===t.v||await e.verifyIdentity(t.identity))}async load(e){0===e.indexOf(\"/ipfs\")&&(e=e.split(\"/\")[2]);try{const r=await t.read(this._ipfs,e);this._write=r.write}catch(i){console.log(\"LegacyIPFS3BoxAccessController.load ERROR:\",i)}}async save(i){let r;const s={admin:[],write:this.write,read:[]};try{r=await t.write(this._ipfs,\"raw\",e.from(JSON.stringify(s,null,2)),{format:\"dag-pb\"})}catch(n){console.log(\"LegacyIPFS3BoxAccessController.save ERROR:\",n)}return{address:r,skipManifest:!0}}static async create(t,e={}){return e={...e,write:e.write||[t.identity.publicKey]},new n(t._ipfs,e)}}module.exports=n;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":1,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":1,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":1,"column":0},"generated":{"line":2,"column":8}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":1,"column":0},"generated":{"line":2,"column":16}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":2,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":2,"column":0},"generated":{"line":2,"column":33}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":2,"column":0},"generated":{"line":2,"column":41}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":2,"column":0},"generated":{"line":2,"column":56}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":4,"column":0},"generated":{"line":2,"column":63}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":4,"column":0},"generated":{"line":2,"column":65}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":4,"column":0},"generated":{"line":2,"column":73}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":4,"column":0},"generated":{"line":2,"column":89}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":5,"column":0},"generated":{"line":2,"column":97}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":5,"column":0},"generated":{"line":2,"column":99}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":7,"column":0},"generated":{"line":2,"column":118}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":7,"column":0},"generated":{"line":2,"column":120}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":7,"column":0},"generated":{"line":2,"column":126}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":9,"column":0},"generated":{"line":2,"column":130}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":9,"column":0},"generated":{"line":2,"column":136}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":9,"column":0},"generated":{"line":2,"column":144}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":9,"column":0},"generated":{"line":2,"column":146}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":10,"column":0},"generated":{"line":2,"column":149}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":10,"column":0},"generated":{"line":2,"column":156}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":10,"column":0},"generated":{"line":2,"column":158}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":10,"column":0},"generated":{"line":2,"column":168}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":10,"column":0},"generated":{"line":2,"column":173}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":11,"column":0},"generated":{"line":2,"column":177}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":11,"column":0},"generated":{"line":2,"column":183}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":11,"column":0},"generated":{"line":2,"column":185}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":11,"column":0},"generated":{"line":2,"column":187}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":11,"column":0},"generated":{"line":2,"column":190}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":11,"column":0},"generated":{"line":2,"column":196}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":12,"column":0},"generated":{"line":2,"column":201}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":12,"column":0},"generated":{"line":2,"column":208}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":12,"column":0},"generated":{"line":2,"column":210}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":12,"column":0},"generated":{"line":2,"column":215}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":12,"column":0},"generated":{"line":2,"column":217}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":13,"column":0},"generated":{"line":2,"column":222}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":13,"column":0},"generated":{"line":2,"column":240}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":13,"column":0},"generated":{"line":2,"column":242}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":13,"column":0},"generated":{"line":2,"column":246}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":13,"column":0},"generated":{"line":2,"column":261}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":13,"column":0},"generated":{"line":2,"column":263}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":14,"column":0},"generated":{"line":2,"column":269}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":17,"column":0},"generated":{"line":2,"column":283}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":17,"column":0},"generated":{"line":2,"column":289}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":18,"column":0},"generated":{"line":2,"column":291}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":18,"column":0},"generated":{"line":2,"column":303}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":18,"column":0},"generated":{"line":2,"column":305}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":20,"column":0},"generated":{"line":2,"column":308}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":20,"column":0},"generated":{"line":2,"column":313}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":20,"column":0},"generated":{"line":2,"column":319}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":21,"column":0},"generated":{"line":2,"column":321}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":21,"column":0},"generated":{"line":2,"column":326}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":21,"column":0},"generated":{"line":2,"column":333}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":21,"column":0},"generated":{"line":2,"column":339}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":21,"column":0},"generated":{"line":2,"column":344}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":21,"column":0},"generated":{"line":2,"column":346}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":21,"column":0},"generated":{"line":2,"column":353}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":25,"column":0},"generated":{"line":2,"column":357}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":25,"column":0},"generated":{"line":2,"column":375}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":25,"column":0},"generated":{"line":2,"column":382}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":28,"column":0},"generated":{"line":2,"column":384}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":29,"column":0},"generated":{"line":2,"column":396}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":29,"column":0},"generated":{"line":2,"column":403}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":29,"column":0},"generated":{"line":2,"column":408}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":32,"column":0},"generated":{"line":2,"column":415}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":32,"column":0},"generated":{"line":2,"column":431}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":32,"column":0},"generated":{"line":2,"column":433}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":436}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":442}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":444}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":448}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":450}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":452}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":454}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":464}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":466}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":468}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":34,"column":0},"generated":{"line":2,"column":477}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":35,"column":0},"generated":{"line":2,"column":481}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":35,"column":0},"generated":{"line":2,"column":490}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":35,"column":0},"generated":{"line":2,"column":495}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":35,"column":0},"generated":{"line":2,"column":501}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":35,"column":0},"generated":{"line":2,"column":510}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":36,"column":0},"generated":{"line":2,"column":515}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":36,"column":0},"generated":{"line":2,"column":520}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":36,"column":0},"generated":{"line":2,"column":526}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":36,"column":0},"generated":{"line":2,"column":535}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":37,"column":0},"generated":{"line":2,"column":543}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":37,"column":0},"generated":{"line":2,"column":547}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":37,"column":0},"generated":{"line":2,"column":549}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":37,"column":0},"generated":{"line":2,"column":558}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":37,"column":0},"generated":{"line":2,"column":560}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":37,"column":0},"generated":{"line":2,"column":575}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":37,"column":0},"generated":{"line":2,"column":577}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":42,"column":0},"generated":{"line":2,"column":588}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":42,"column":0},"generated":{"line":2,"column":599}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":602}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":606}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":608}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":616}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":627}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":629}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":631}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":637}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":45,"column":0},"generated":{"line":2,"column":642}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":47,"column":0},"generated":{"line":2,"column":646}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":48,"column":0},"generated":{"line":2,"column":650}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":48,"column":0},"generated":{"line":2,"column":656}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":48,"column":0},"generated":{"line":2,"column":664}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":48,"column":0},"generated":{"line":2,"column":666}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":48,"column":0},"generated":{"line":2,"column":671}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":48,"column":0},"generated":{"line":2,"column":676}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":48,"column":0},"generated":{"line":2,"column":682}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":49,"column":0},"generated":{"line":2,"column":685}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":49,"column":0},"generated":{"line":2,"column":690}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":49,"column":0},"generated":{"line":2,"column":697}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":49,"column":0},"generated":{"line":2,"column":699}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":50,"column":0},"generated":{"line":2,"column":705}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":50,"column":0},"generated":{"line":2,"column":711}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":51,"column":0},"generated":{"line":2,"column":714}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":51,"column":0},"generated":{"line":2,"column":722}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":51,"column":0},"generated":{"line":2,"column":726}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":51,"column":0},"generated":{"line":2,"column":771}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":55,"column":0},"generated":{"line":2,"column":775}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":55,"column":0},"generated":{"line":2,"column":786}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":56,"column":0},"generated":{"line":2,"column":789}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":56,"column":0},"generated":{"line":2,"column":793}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":795}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":801}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":803}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":804}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":810}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":813}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":819}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":824}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":830}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":57,"column":0},"generated":{"line":2,"column":835}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":58,"column":0},"generated":{"line":2,"column":839}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":843}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":851}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":853}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":859}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":864}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":870}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":876}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":878}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":883}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":888}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":898}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":900}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":905}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":909}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":910}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":59,"column":0},"generated":{"line":2,"column":917}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":61,"column":0},"generated":{"line":2,"column":928}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":61,"column":0},"generated":{"line":2,"column":934}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":62,"column":0},"generated":{"line":2,"column":937}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":62,"column":0},"generated":{"line":2,"column":945}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":62,"column":0},"generated":{"line":2,"column":949}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":62,"column":0},"generated":{"line":2,"column":994}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":65,"column":0},"generated":{"line":2,"column":997}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":65,"column":0},"generated":{"line":2,"column":1003}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":65,"column":0},"generated":{"line":2,"column":1004}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":65,"column":0},"generated":{"line":2,"column":1012}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":65,"column":0},"generated":{"line":2,"column":1014}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":65,"column":0},"generated":{"line":2,"column":1028}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":68,"column":0},"generated":{"line":2,"column":1031}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":68,"column":0},"generated":{"line":2,"column":1051}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":68,"column":0},"generated":{"line":2,"column":1053}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":68,"column":0},"generated":{"line":2,"column":1055}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":70,"column":0},"generated":{"line":2,"column":1059}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1066}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1068}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1072}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1074}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1080}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1082}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1089}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1090}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1092}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":69,"column":0},"generated":{"line":2,"column":1101}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":70,"column":0},"generated":{"line":2,"column":1113}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":70,"column":0},"generated":{"line":2,"column":1117}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":70,"column":0},"generated":{"line":2,"column":1119}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":70,"column":0},"generated":{"line":2,"column":1121}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":70,"column":0},"generated":{"line":2,"column":1127}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":74,"column":0},"generated":{"line":2,"column":1131}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":74,"column":0},"generated":{"line":2,"column":1138}},{"source":"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js","original":{"line":74,"column":0},"generated":{"line":2,"column":1146}}],"sources":{"node_modules/3box-orbitdb-plugins/src/legacyIpfs3boxAccessController.js":"const io = require('orbit-db-io')\nconst Buffer = require('safe-buffer').Buffer\n//const AccessController = require('./access-controller-interface')\nconst resolve = require('did-resolver').default\nconst type = 'legacy-ipfs-3box'\n\nconst publicKeyFromDID = async did => {\n  // TODO - this should look at authentication keys and get publicKey from that\n  const doc = await resolve(did)\n  return doc.publicKey.find(entry => {\n    const id = entry.id.split('#')\n    return id[0] === doc.id &&\n      (id[1] === 'subSigningKey' || id[1] === 'signingKey')\n  }).publicKeyHex\n}\n\nclass LegacyIPFS3BoxAccessController {\n  constructor (ipfs, options) {\n    //super()\n    this._ipfs = ipfs\n    this._write = Array.from(options.write || [])\n  }\n\n  // Returns the type of the access controller\n  static get type () { return type }\n\n  // Return a Set of keys that have `access` capability\n  get write () {\n    return this._write\n  }\n\n  async canAppend (entry, identityProvider) {\n    // Allow if access list contain the writer's publicKey or is '*'\n    const publicKey = entry.v === 0 ? entry.key : await publicKeyFromDID(entry.identity.id)\n    if (this.write.includes(publicKey) ||\n      this.write.includes('*')) {\n      return entry.v === 0 ? true : await identityProvider.verifyIdentity(entry.identity)\n    }\n    return false\n  }\n\n  async load (address) {\n    // Transform '/ipfs/QmPFtHi3cmfZerxtH9ySLdzpg1yFhocYDZgEZywdUXHxFU'\n    // to 'QmPFtHi3cmfZerxtH9ySLdzpg1yFhocYDZgEZywdUXHxFU'\n    if (address.indexOf('/ipfs') === 0) { address = address.split('/')[2] }\n\n    try {\n      const access = await io.read(this._ipfs, address)\n      this._write = access.write\n    } catch (e) {\n      console.log('LegacyIPFS3BoxAccessController.load ERROR:', e)\n    }\n  }\n\n  async save (options) {\n    let cid\n    const access = { admin: [], write: this.write, read: [] }\n    try {\n      cid = await io.write(this._ipfs, 'raw', Buffer.from(JSON.stringify(access, null, 2)), { format: 'dag-pb'})\n\n    } catch (e) {\n      console.log('LegacyIPFS3BoxAccessController.save ERROR:', e)\n    }\n    // return the manifest data\n    return { address: cid, skipManifest: true }\n  }\n\n  static async create (orbitdb, options = {}) {\n    options = { ...options, ...{ write: options.write || [orbitdb.identity.publicKey] } }\n    return new LegacyIPFS3BoxAccessController(orbitdb._ipfs, options)\n  }\n}\n\nmodule.exports = LegacyIPFS3BoxAccessController\n"},"lineCount":null}},"error":null,"hash":"7019eec907cfe5b25df9c901fb9913b8","cacheData":{"env":{}}}