{"id":"febi","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/package.json","includedInParent":true,"mtime":1582579780394},{"name":"debug","loc":{"line":3,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"},{"name":"async/waterfall","loc":{"line":4,"column":26},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/waterfall.js"},{"name":"../support","loc":{"line":6,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/support.js"},{"name":"./crypto","loc":{"line":7,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/crypto.js"}],"generated":{"js":"\"use strict\";const r=require(\"debug\"),e=require(\"async/waterfall\"),o=require(\"../support\"),p=require(\"./crypto\"),s=r(\"libp2p:secio\");s.error=r(\"libp2p:secio:error\"),module.exports=function(r,i){s(\"1. propose - start\"),s(\"1. propose - writing proposal\"),o.write(r,p.createProposal(r)),e([e=>o.read(r.shake,e),(e,o)=>{s(\"1. propose - reading proposal\",e),p.identify(r,e,o)},e=>p.selectProtocols(r,e)],r=>{if(r)return i(r);s(\"1. propose - finish\"),i()})};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"debug","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"require","original":{"line":3,"column":14},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":3,"column":22},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"waterfall","original":{"line":4,"column":6},"generated":{"line":1,"column":38}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"require","original":{"line":4,"column":18},"generated":{"line":1,"column":40}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":4,"column":26},"generated":{"line":1,"column":48}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"support","original":{"line":6,"column":6},"generated":{"line":1,"column":67}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"require","original":{"line":6,"column":16},"generated":{"line":1,"column":69}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":6,"column":24},"generated":{"line":1,"column":77}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"crypto","original":{"line":7,"column":6},"generated":{"line":1,"column":91}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"require","original":{"line":7,"column":15},"generated":{"line":1,"column":93}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":7,"column":23},"generated":{"line":1,"column":101}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"log","original":{"line":9,"column":6},"generated":{"line":1,"column":113}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"debug","original":{"line":9,"column":12},"generated":{"line":1,"column":115}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":9,"column":18},"generated":{"line":1,"column":117}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"log","original":{"line":10,"column":0},"generated":{"line":1,"column":133}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"error","original":{"line":10,"column":4},"generated":{"line":1,"column":135}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"debug","original":{"line":10,"column":12},"generated":{"line":1,"column":141}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":10,"column":18},"generated":{"line":1,"column":143}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"module","original":{"line":14,"column":0},"generated":{"line":1,"column":165}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"exports","original":{"line":14,"column":7},"generated":{"line":1,"column":172}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":14,"column":17},"generated":{"line":1,"column":180}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"state","original":{"line":14,"column":35},"generated":{"line":1,"column":189}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"callback","original":{"line":14,"column":42},"generated":{"line":1,"column":191}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"log","original":{"line":15,"column":2},"generated":{"line":1,"column":194}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":15,"column":6},"generated":{"line":1,"column":196}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"log","original":{"line":17,"column":2},"generated":{"line":1,"column":218}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":17,"column":6},"generated":{"line":1,"column":220}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"support","original":{"line":18,"column":2},"generated":{"line":1,"column":253}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"write","original":{"line":18,"column":10},"generated":{"line":1,"column":255}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"state","original":{"line":18,"column":16},"generated":{"line":1,"column":261}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"crypto","original":{"line":18,"column":23},"generated":{"line":1,"column":263}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"createProposal","original":{"line":18,"column":30},"generated":{"line":1,"column":265}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"state","original":{"line":18,"column":45},"generated":{"line":1,"column":280}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"waterfall","original":{"line":20,"column":2},"generated":{"line":1,"column":284}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":20,"column":12},"generated":{"line":1,"column":286}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"cb","original":{"line":21,"column":5},"generated":{"line":1,"column":287}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"support","original":{"line":21,"column":12},"generated":{"line":1,"column":290}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"read","original":{"line":21,"column":20},"generated":{"line":1,"column":292}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"state","original":{"line":21,"column":25},"generated":{"line":1,"column":297}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"shake","original":{"line":21,"column":31},"generated":{"line":1,"column":299}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"cb","original":{"line":21,"column":38},"generated":{"line":1,"column":305}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":22,"column":4},"generated":{"line":1,"column":308}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"msg","original":{"line":22,"column":5},"generated":{"line":1,"column":309}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"cb","original":{"line":22,"column":10},"generated":{"line":1,"column":311}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"log","original":{"line":23,"column":6},"generated":{"line":1,"column":316}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":23,"column":10},"generated":{"line":1,"column":318}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"msg","original":{"line":23,"column":43},"generated":{"line":1,"column":350}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"crypto","original":{"line":24,"column":6},"generated":{"line":1,"column":353}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"identify","original":{"line":24,"column":13},"generated":{"line":1,"column":355}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"state","original":{"line":24,"column":22},"generated":{"line":1,"column":364}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"msg","original":{"line":24,"column":29},"generated":{"line":1,"column":366}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"cb","original":{"line":24,"column":34},"generated":{"line":1,"column":368}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"cb","original":{"line":26,"column":5},"generated":{"line":1,"column":372}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"crypto","original":{"line":26,"column":12},"generated":{"line":1,"column":375}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"selectProtocols","original":{"line":26,"column":19},"generated":{"line":1,"column":377}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"state","original":{"line":26,"column":35},"generated":{"line":1,"column":393}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"cb","original":{"line":26,"column":42},"generated":{"line":1,"column":395}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"err","original":{"line":27,"column":6},"generated":{"line":1,"column":399}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"err","original":{"line":28,"column":8},"generated":{"line":1,"column":403}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"err","original":{"line":28,"column":8},"generated":{"line":1,"column":406}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"callback","original":{"line":29,"column":13},"generated":{"line":1,"column":408}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"callback","original":{"line":29,"column":13},"generated":{"line":1,"column":415}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"err","original":{"line":29,"column":22},"generated":{"line":1,"column":417}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"log","original":{"line":32,"column":4},"generated":{"line":1,"column":420}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","original":{"line":32,"column":8},"generated":{"line":1,"column":422}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js","name":"callback","original":{"line":33,"column":4},"generated":{"line":1,"column":445}}],"sources":{"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js":"'use strict'\n\nconst debug = require('debug')\nconst waterfall = require('async/waterfall')\n\nconst support = require('../support')\nconst crypto = require('./crypto')\n\nconst log = debug('libp2p:secio')\nlog.error = debug('libp2p:secio:error')\n\n// step 1. Propose\n// -- propose cipher suite + send pubkeys + nonce\nmodule.exports = function propose (state, callback) {\n  log('1. propose - start')\n\n  log('1. propose - writing proposal')\n  support.write(state, crypto.createProposal(state))\n\n  waterfall([\n    (cb) => support.read(state.shake, cb),\n    (msg, cb) => {\n      log('1. propose - reading proposal', msg)\n      crypto.identify(state, msg, cb)\n    },\n    (cb) => crypto.selectProtocols(state, cb)\n  ], (err) => {\n    if (err) {\n      return callback(err)\n    }\n\n    log('1. propose - finish')\n    callback()\n  })\n}\n"},"lineCount":null}},"error":null,"hash":"f09131bbc77ef6a1121c8c4c649efcdf","cacheData":{"env":{}}}