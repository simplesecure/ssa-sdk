{"id":"e2LH","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/package.json","includedInParent":true,"mtime":1582579779683},{"name":"ipfs-http-client/src/dht","loc":{"line":3,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/node_modules/ipfs-http-client/src/dht/index.js"},{"name":"ipfs-http-client/src/files-regular/refs","loc":{"line":4,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/node_modules/ipfs-http-client/src/files-regular/refs.js"},{"name":"ipfs-http-client/src/utils/default-config","loc":{"line":5,"column":30},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/node_modules/ipfs-http-client/src/utils/default-config.js"},{"name":"p-queue","loc":{"line":6,"column":36},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/p-queue/dist/index.js"},{"name":"debug","loc":{"line":7,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"}],"generated":{"js":"\"use strict\";const e=require(\"ipfs-http-client/src/dht\"),t=require(\"ipfs-http-client/src/files-regular/refs\"),i=require(\"ipfs-http-client/src/utils/default-config\"),{default:s}=require(\"p-queue\"),r=require(\"debug\"),o=r(\"libp2p-delegated-content-routing\");o.error=r(\"libp2p-delegated-content-routing:error\");const n=3e4,d={protocol:\"https\",port:443,host:\"node0.delegate.ipfs.io\"},c=4;class u{constructor(r,n){if(null==r)throw new Error(\"missing self peerId\");this.api=Object.assign({},i(),d,n),this.dht=e(this.api),this.refs=t(this.api),this.peerId=r;const u={concurrency:c};this._httpQueue=new s(u),this._httpQueueRefs=new s(Object.assign({},u,{concurrency:2})),o(`enabled DelegatedContentRouting via ${this.api.protocol}://${this.api.host}:${this.api.port}`)}async*findProviders(e,t={}){const i=e.toBaseEncodedString();o(\"findProviders starts: \"+i),t.maxTimeout=t.maxTimeout||n;const s=await this._httpQueue.add(()=>this.dht.findProvs(e,{timeout:`${t.maxTimeout}ms`}));for(let r=0;r<s.length;r++)yield s[r];o(\"findProviders finished: \"+i)}async provide(e){const t=e.toBaseEncodedString();o(\"provide starts: \"+t),await this._httpQueueRefs.add(()=>this.refs(t,{recursive:!1})),o(\"provide finished: \"+t)}}module.exports=u;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":59}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":67}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":110}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":112}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":120}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":166}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":174}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":177}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":185}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":7,"column":0},"generated":{"line":1,"column":196}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":7,"column":0},"generated":{"line":1,"column":198}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":7,"column":0},"generated":{"line":1,"column":206}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":9,"column":0},"generated":{"line":1,"column":215}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":9,"column":0},"generated":{"line":1,"column":217}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":9,"column":0},"generated":{"line":1,"column":219}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":10,"column":0},"generated":{"line":1,"column":255}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":10,"column":0},"generated":{"line":1,"column":257}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":10,"column":0},"generated":{"line":1,"column":263}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":10,"column":0},"generated":{"line":1,"column":265}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":12,"column":0},"generated":{"line":1,"column":307}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":12,"column":0},"generated":{"line":1,"column":313}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":12,"column":0},"generated":{"line":1,"column":315}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":13,"column":0},"generated":{"line":1,"column":319}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":13,"column":0},"generated":{"line":1,"column":321}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":14,"column":0},"generated":{"line":1,"column":322}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":14,"column":0},"generated":{"line":1,"column":331}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":15,"column":0},"generated":{"line":1,"column":339}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":15,"column":0},"generated":{"line":1,"column":344}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":16,"column":0},"generated":{"line":1,"column":348}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":16,"column":0},"generated":{"line":1,"column":353}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":19,"column":0},"generated":{"line":1,"column":379}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":19,"column":0},"generated":{"line":1,"column":381}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":24,"column":0},"generated":{"line":1,"column":383}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":24,"column":0},"generated":{"line":1,"column":389}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":31,"column":0},"generated":{"line":1,"column":391}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":31,"column":0},"generated":{"line":1,"column":403}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":31,"column":0},"generated":{"line":1,"column":405}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":32,"column":0},"generated":{"line":1,"column":408}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":32,"column":0},"generated":{"line":1,"column":411}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":32,"column":0},"generated":{"line":1,"column":417}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":33,"column":0},"generated":{"line":1,"column":419}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":33,"column":0},"generated":{"line":1,"column":425}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":33,"column":0},"generated":{"line":1,"column":429}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":33,"column":0},"generated":{"line":1,"column":435}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":36,"column":0},"generated":{"line":1,"column":458}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":36,"column":0},"generated":{"line":1,"column":463}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":36,"column":0},"generated":{"line":1,"column":467}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":36,"column":0},"generated":{"line":1,"column":474}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":36,"column":0},"generated":{"line":1,"column":481}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":36,"column":0},"generated":{"line":1,"column":484}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":36,"column":0},"generated":{"line":1,"column":488}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":36,"column":0},"generated":{"line":1,"column":490}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":37,"column":0},"generated":{"line":1,"column":493}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":37,"column":0},"generated":{"line":1,"column":498}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":37,"column":0},"generated":{"line":1,"column":502}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":37,"column":0},"generated":{"line":1,"column":504}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":37,"column":0},"generated":{"line":1,"column":509}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":38,"column":0},"generated":{"line":1,"column":514}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":38,"column":0},"generated":{"line":1,"column":519}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":38,"column":0},"generated":{"line":1,"column":524}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":38,"column":0},"generated":{"line":1,"column":526}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":38,"column":0},"generated":{"line":1,"column":531}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":39,"column":0},"generated":{"line":1,"column":536}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":39,"column":0},"generated":{"line":1,"column":541}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":39,"column":0},"generated":{"line":1,"column":548}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":43,"column":0},"generated":{"line":1,"column":550}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":43,"column":0},"generated":{"line":1,"column":556}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":43,"column":0},"generated":{"line":1,"column":558}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":43,"column":0},"generated":{"line":1,"column":559}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":43,"column":0},"generated":{"line":1,"column":571}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":44,"column":0},"generated":{"line":1,"column":574}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":44,"column":0},"generated":{"line":1,"column":579}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":44,"column":0},"generated":{"line":1,"column":590}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":44,"column":0},"generated":{"line":1,"column":594}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":44,"column":0},"generated":{"line":1,"column":596}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":599}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":604}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":619}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":623}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":625}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":632}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":639}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":642}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":47,"column":0},"generated":{"line":1,"column":644}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":48,"column":0},"generated":{"line":1,"column":645}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":48,"column":0},"generated":{"line":1,"column":657}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":662}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":703}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":708}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":712}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":726}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":731}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":735}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":743}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":748}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":752}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":63,"column":0},"generated":{"line":1,"column":760}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":63,"column":0},"generated":{"line":1,"column":780}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":63,"column":0},"generated":{"line":1,"column":782}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":63,"column":0},"generated":{"line":1,"column":784}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":64,"column":0},"generated":{"line":1,"column":788}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":64,"column":0},"generated":{"line":1,"column":794}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":64,"column":0},"generated":{"line":1,"column":796}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":64,"column":0},"generated":{"line":1,"column":798}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":65,"column":0},"generated":{"line":1,"column":820}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":65,"column":0},"generated":{"line":1,"column":822}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":65,"column":0},"generated":{"line":1,"column":847}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":66,"column":0},"generated":{"line":1,"column":850}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":66,"column":0},"generated":{"line":1,"column":852}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":66,"column":0},"generated":{"line":1,"column":863}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":66,"column":0},"generated":{"line":1,"column":865}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":66,"column":0},"generated":{"line":1,"column":877}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":879}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":885}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":893}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":898}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":909}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":913}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":917}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":922}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":926}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":936}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":68,"column":0},"generated":{"line":1,"column":938}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":69,"column":0},"generated":{"line":1,"column":939}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":69,"column":0},"generated":{"line":1,"column":950}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":69,"column":0},"generated":{"line":1,"column":952}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":72,"column":0},"generated":{"line":1,"column":970}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":72,"column":0},"generated":{"line":1,"column":974}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":72,"column":0},"generated":{"line":1,"column":978}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":72,"column":0},"generated":{"line":1,"column":980}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":72,"column":0},"generated":{"line":1,"column":982}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":72,"column":0},"generated":{"line":1,"column":984}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":72,"column":0},"generated":{"line":1,"column":986}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":72,"column":0},"generated":{"line":1,"column":993}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":73,"column":0},"generated":{"line":1,"column":1003}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":73,"column":0},"generated":{"line":1,"column":1005}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1008}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1010}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1037}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1040}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1054}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":90,"column":0},"generated":{"line":1,"column":1057}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":90,"column":0},"generated":{"line":1,"column":1063}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":90,"column":0},"generated":{"line":1,"column":1065}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":90,"column":0},"generated":{"line":1,"column":1067}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1089}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1091}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1110}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":92,"column":0},"generated":{"line":1,"column":1119}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":92,"column":0},"generated":{"line":1,"column":1124}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":92,"column":0},"generated":{"line":1,"column":1139}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":92,"column":0},"generated":{"line":1,"column":1143}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1147}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1152}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1157}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1159}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1160}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1171}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1176}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1178}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1199}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1203}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1210}},{"source":"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1218}}],"sources":{"node_modules/ipfs/node_modules/libp2p-delegated-content-routing/src/index.js":"'use strict'\n\nconst dht = require('ipfs-http-client/src/dht')\nconst refs = require('ipfs-http-client/src/files-regular/refs')\nconst defaultConfig = require('ipfs-http-client/src/utils/default-config')\nconst { default: PQueue } = require('p-queue')\nconst debug = require('debug')\n\nconst log = debug('libp2p-delegated-content-routing')\nlog.error = debug('libp2p-delegated-content-routing:error')\n\nconst DEFAULT_MAX_TIMEOUT = 30e3 // 30 second default\nconst DEFAULT_IPFS_API = {\n  protocol: 'https',\n  port: 443,\n  host: 'node0.delegate.ipfs.io'\n}\n\nconst CONCURRENT_HTTP_REQUESTS = 4\n\n/**\n * An implementation of content routing, using a delegated peer.\n */\nclass DelegatedContentRouting {\n  /**\n   * Create a new DelegatedContentRouting instance.\n   *\n   * @param {PeerID} peerId - the id of the node that is using this routing.\n   * @param {object} [api] - (Optional) the api endpoint of the delegated node to use.\n   */\n  constructor (peerId, api) {\n    if (peerId == null) {\n      throw new Error('missing self peerId')\n    }\n\n    this.api = Object.assign({}, defaultConfig(), DEFAULT_IPFS_API, api)\n    this.dht = dht(this.api)\n    this.refs = refs(this.api)\n    this.peerId = peerId\n\n    // limit concurrency to avoid request flood in web browser\n    // https://github.com/libp2p/js-libp2p-delegated-content-routing/issues/12\n    const concurrency = { concurrency: CONCURRENT_HTTP_REQUESTS }\n    this._httpQueue = new PQueue(concurrency)\n    // sometimes refs requests take long time, they need separate queue\n    // to not suffocate regular bussiness\n    this._httpQueueRefs = new PQueue(Object.assign({}, concurrency, {\n      concurrency: 2\n    }))\n    log(`enabled DelegatedContentRouting via ${this.api.protocol}://${this.api.host}:${this.api.port}`)\n  }\n\n  /**\n   * Search the dht for providers of the given CID.\n   *\n   * - call `findProviders` on the delegated node.\n   *\n   * @param {CID} key\n   * @param {object} options\n   * @param {number} options.maxTimeout How long the query can take. Defaults to 30 seconds\n   * @returns {AsyncIterable<PeerInfo>}\n   */\n  async * findProviders (key, options = {}) {\n    const keyString = key.toBaseEncodedString()\n    log('findProviders starts: ' + keyString)\n    options.maxTimeout = options.maxTimeout || DEFAULT_MAX_TIMEOUT\n\n    const results = await this._httpQueue.add(() => this.dht.findProvs(key, {\n      timeout: `${options.maxTimeout}ms` // The api requires specification of the time unit (s/ms)\n    }))\n\n    for (let i = 0; i < results.length; i++) {\n      yield results[i]\n    }\n    log('findProviders finished: ' + keyString)\n  }\n\n  /**\n   * Announce to the network that the delegated node can provide the given key.\n   *\n   * Currently this uses the following hack\n   * - delegate is one of bootstrap nodes, so we are always connected to it\n   * - call refs on the delegated node, so it fetches the content\n   *\n   * @param {CID} key\n   * @param {function(Error)} callback\n   * @returns {Promise<void>}\n   */\n  async provide (key) {\n    const keyString = key.toBaseEncodedString()\n    log('provide starts: ' + keyString)\n    await this._httpQueueRefs.add(() =>\n      this.refs(keyString, { recursive: false })\n    )\n    log('provide finished: ' + keyString)\n  }\n}\n\nmodule.exports = DelegatedContentRouting\n"},"lineCount":null}},"error":null,"hash":"7f98a75845e494b7b9d616d599621cdd","cacheData":{"env":{}}}