{"id":"UlQe","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/package.json","includedInParent":true,"mtime":1582579778668},{"name":"ipns","loc":{"line":3,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/resolver.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipns/src/index.js"},{"name":"libp2p-crypto","loc":{"line":4,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/resolver.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-crypto/src/index.js"},{"name":"peer-id","loc":{"line":5,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/resolver.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/peer-id/src/index.js"},{"name":"err-code","loc":{"line":6,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/resolver.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/err-code/index.js"},{"name":"cids","loc":{"line":7,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/resolver.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/cids/src/index.js"},{"name":"debug","loc":{"line":9,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/resolver.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"},{"name":"interface-datastore","loc":{"line":13,"column":27},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/resolver.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/interface-datastore/src/index.js"}],"generated":{"js":"\"use strict\";const r=require(\"ipns\"),e=require(\"libp2p-crypto\"),t=require(\"peer-id\"),o=require(\"err-code\"),i=require(\"cids\"),n=require(\"debug\"),s=n(\"ipfs:ipns:resolver\");s.error=n(\"ipfs:ipns:resolver:error\");const{Errors:c}=require(\"interface-datastore\"),a=c.notFoundError().code,u=32;class E{constructor(r){this._routing=r}async resolve(r,e){if(e=e||{},\"string\"!=typeof r)throw o(new Error(\"invalid name\"),\"ERR_INVALID_NAME\");const t=(e=e||{}).recursive&&\"true\"===e.recursive.toString(),i=r.split(\"/\");if(3!==i.length||\"\"!==i[0])throw o(new Error(\"invalid name\"),\"ERR_INVALID_NAME\");const n=i[2];let c;t&&(c=u);const a=await this.resolver(n,c);return s(`${r} was locally resolved correctly`),a}async resolver(r,e){if(0===e){const r=`could not resolve name (recursion limit of ${u} exceeded)`;throw s.error(r),o(new Error(r),\"ERR_RESOLVE_RECURSION_LIMIT\")}const t=await this._resolveName(r),i=t.split(\"/\");return\"ipfs\"!==i[1]&&e?this.resolver(i[2],e-1):t}async _resolveName(n){const c=t.createFromBytes(new i(n).multihash),{routingKey:u}=r.getIdKeys(c.toBytes());let E,l,d;try{E=await this._routing.get(u.toBuffer())}catch(R){if(s.error(R),R.code===a)throw o(new Error(`record requested for ${n} was not found in the network`),\"ERR_NO_RECORD_FOUND\");throw o(new Error(`unexpected error getting the ipns record ${c.id}`),\"ERR_UNEXPECTED_ERROR_GETTING_RECORD\")}try{l=r.unmarshal(E)}catch(R){throw s.error(R),o(new Error(\"found ipns record that we couldn't convert to a value\"),\"ERR_INVALID_RECORD_RECEIVED\")}if(l.pubKey)return this._validateRecord(c,l);try{d=await this._routing.get(u.toBuffer())}catch(R){if(s.error(R),R.code===a)throw o(new Error(`public key requested for ${n} was not found in the network`),\"ERR_NO_RECORD_FOUND\");throw o(new Error(`unexpected error getting the public key for the ipns record ${c.id}`),\"ERR_UNEXPECTED_ERROR_GETTING_PUB_KEY\")}try{c.pubKey=e.keys.unmarshalPublicKey(d)}catch(R){throw s.error(R),o(new Error(\"found public key record that we couldn't convert to a value\"),\"ERR_INVALID_PUB_KEY_RECEIVED\")}return this._validateRecord(c,l)}async _validateRecord(e,t){const o=await r.extractPublicKey(e,t);return await r.validate(o,t),t.value.toString()}}exports=module.exports=E;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipns","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"require","original":{"line":3,"column":13},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":3,"column":21},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"crypto","original":{"line":4,"column":6},"generated":{"line":1,"column":37}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"require","original":{"line":4,"column":15},"generated":{"line":1,"column":39}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":4,"column":23},"generated":{"line":1,"column":47}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"PeerId","original":{"line":5,"column":6},"generated":{"line":1,"column":64}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"require","original":{"line":5,"column":15},"generated":{"line":1,"column":66}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":5,"column":23},"generated":{"line":1,"column":74}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":6,"column":6},"generated":{"line":1,"column":85}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"require","original":{"line":6,"column":16},"generated":{"line":1,"column":87}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":6,"column":24},"generated":{"line":1,"column":95}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"CID","original":{"line":7,"column":6},"generated":{"line":1,"column":107}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"require","original":{"line":7,"column":12},"generated":{"line":1,"column":109}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":7,"column":20},"generated":{"line":1,"column":117}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"debug","original":{"line":9,"column":6},"generated":{"line":1,"column":125}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"require","original":{"line":9,"column":14},"generated":{"line":1,"column":127}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":9,"column":22},"generated":{"line":1,"column":135}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"log","original":{"line":10,"column":6},"generated":{"line":1,"column":144}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"debug","original":{"line":10,"column":12},"generated":{"line":1,"column":146}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":10,"column":18},"generated":{"line":1,"column":148}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"log","original":{"line":11,"column":0},"generated":{"line":1,"column":170}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"error","original":{"line":11,"column":4},"generated":{"line":1,"column":172}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"debug","original":{"line":11,"column":12},"generated":{"line":1,"column":178}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":11,"column":18},"generated":{"line":1,"column":180}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":13,"column":0},"generated":{"line":1,"column":208}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":13,"column":6},"generated":{"line":1,"column":214}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Errors","original":{"line":13,"column":8},"generated":{"line":1,"column":221}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"require","original":{"line":13,"column":19},"generated":{"line":1,"column":224}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":13,"column":27},"generated":{"line":1,"column":232}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ERR_NOT_FOUND","original":{"line":14,"column":6},"generated":{"line":1,"column":255}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Errors","original":{"line":14,"column":22},"generated":{"line":1,"column":257}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"notFoundError","original":{"line":14,"column":29},"generated":{"line":1,"column":259}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"code","original":{"line":14,"column":45},"generated":{"line":1,"column":275}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"defaultMaximumRecursiveDepth","original":{"line":16,"column":6},"generated":{"line":1,"column":280}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":16,"column":37},"generated":{"line":1,"column":282}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":18,"column":0},"generated":{"line":1,"column":285}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"IpnsResolver","original":{"line":18,"column":6},"generated":{"line":1,"column":291}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"constructor","original":{"line":19,"column":2},"generated":{"line":1,"column":293}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"routing","original":{"line":19,"column":15},"generated":{"line":1,"column":305}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_routing","original":{"line":20,"column":9},"generated":{"line":1,"column":308}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_routing","original":{"line":20,"column":9},"generated":{"line":1,"column":313}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"routing","original":{"line":20,"column":20},"generated":{"line":1,"column":322}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"resolve","original":{"line":23,"column":8},"generated":{"line":1,"column":324}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":23,"column":17},"generated":{"line":1,"column":338}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"options","original":{"line":23,"column":23},"generated":{"line":1,"column":340}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":26,"column":8},"generated":{"line":1,"column":343}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"options","original":{"line":24,"column":4},"generated":{"line":1,"column":346}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"options","original":{"line":24,"column":14},"generated":{"line":1,"column":348}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":24,"column":25},"generated":{"line":1,"column":351}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":26,"column":24},"generated":{"line":1,"column":354}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":26,"column":15},"generated":{"line":1,"column":371}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":27,"column":12},"generated":{"line":1,"column":373}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":27,"column":12},"generated":{"line":1,"column":379}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":27,"column":20},"generated":{"line":1,"column":381}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":27,"column":24},"generated":{"line":1,"column":385}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":27,"column":30},"generated":{"line":1,"column":391}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":27,"column":47},"generated":{"line":1,"column":407}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"recursive","original":{"line":31,"column":10},"generated":{"line":1,"column":427}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"recursive","original":{"line":31,"column":10},"generated":{"line":1,"column":433}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"options","original":{"line":30,"column":4},"generated":{"line":1,"column":436}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"options","original":{"line":30,"column":14},"generated":{"line":1,"column":438}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":30,"column":25},"generated":{"line":1,"column":441}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"recursive","original":{"line":31,"column":30},"generated":{"line":1,"column":445}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":31,"column":76},"generated":{"line":1,"column":456}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"options","original":{"line":31,"column":43},"generated":{"line":1,"column":465}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"recursive","original":{"line":31,"column":51},"generated":{"line":1,"column":467}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"toString","original":{"line":31,"column":61},"generated":{"line":1,"column":477}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":33,"column":10},"generated":{"line":1,"column":488}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":33,"column":25},"generated":{"line":1,"column":490}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"split","original":{"line":33,"column":30},"generated":{"line":1,"column":492}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":33,"column":36},"generated":{"line":1,"column":498}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":35,"column":8},"generated":{"line":1,"column":503}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":35,"column":32},"generated":{"line":1,"column":506}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":35,"column":8},"generated":{"line":1,"column":510}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"length","original":{"line":35,"column":21},"generated":{"line":1,"column":512}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":35,"column":57},"generated":{"line":1,"column":520}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":35,"column":37},"generated":{"line":1,"column":525}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":35,"column":50},"generated":{"line":1,"column":527}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":36,"column":12},"generated":{"line":1,"column":530}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":36,"column":12},"generated":{"line":1,"column":536}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":36,"column":20},"generated":{"line":1,"column":538}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":36,"column":24},"generated":{"line":1,"column":542}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":36,"column":30},"generated":{"line":1,"column":548}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":36,"column":47},"generated":{"line":1,"column":564}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"key","original":{"line":39,"column":10},"generated":{"line":1,"column":584}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"key","original":{"line":39,"column":10},"generated":{"line":1,"column":590}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":39,"column":16},"generated":{"line":1,"column":592}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":39,"column":29},"generated":{"line":1,"column":594}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":42,"column":8},"generated":{"line":1,"column":597}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":42,"column":8},"generated":{"line":1,"column":601}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"recursive","original":{"line":44,"column":8},"generated":{"line":1,"column":603}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":45,"column":6},"generated":{"line":1,"column":607}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"defaultMaximumRecursiveDepth","original":{"line":45,"column":14},"generated":{"line":1,"column":609}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"res","original":{"line":48,"column":10},"generated":{"line":1,"column":612}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"res","original":{"line":48,"column":10},"generated":{"line":1,"column":618}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":48,"column":22},"generated":{"line":1,"column":626}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"resolver","original":{"line":48,"column":27},"generated":{"line":1,"column":631}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"key","original":{"line":48,"column":36},"generated":{"line":1,"column":640}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":48,"column":41},"generated":{"line":1,"column":642}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"res","original":{"line":51,"column":11},"generated":{"line":1,"column":645}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"log","original":{"line":50,"column":4},"generated":{"line":1,"column":652}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":50,"column":11},"generated":{"line":1,"column":657}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"res","original":{"line":51,"column":11},"generated":{"line":1,"column":693}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"resolver","original":{"line":55,"column":8},"generated":{"line":1,"column":695}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":55,"column":18},"generated":{"line":1,"column":710}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":55,"column":24},"generated":{"line":1,"column":712}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":57,"column":8},"generated":{"line":1,"column":715}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":57,"column":18},"generated":{"line":1,"column":718}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":57,"column":8},"generated":{"line":1,"column":722}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":57,"column":21},"generated":{"line":1,"column":724}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errMsg","original":{"line":58,"column":12},"generated":{"line":1,"column":725}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errMsg","original":{"line":58,"column":12},"generated":{"line":1,"column":731}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"defaultMaximumRecursiveDepth","original":{"line":58,"column":67},"generated":{"line":1,"column":779}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":61,"column":12},"generated":{"line":1,"column":793}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"log","original":{"line":59,"column":6},"generated":{"line":1,"column":799}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"error","original":{"line":59,"column":10},"generated":{"line":1,"column":801}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errMsg","original":{"line":59,"column":16},"generated":{"line":1,"column":807}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":61,"column":12},"generated":{"line":1,"column":810}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":61,"column":20},"generated":{"line":1,"column":812}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":61,"column":24},"generated":{"line":1,"column":816}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errMsg","original":{"line":61,"column":30},"generated":{"line":1,"column":822}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":61,"column":39},"generated":{"line":1,"column":825}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"res","original":{"line":64,"column":10},"generated":{"line":1,"column":856}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"res","original":{"line":64,"column":10},"generated":{"line":1,"column":862}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":64,"column":22},"generated":{"line":1,"column":870}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_resolveName","original":{"line":64,"column":27},"generated":{"line":1,"column":875}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":64,"column":40},"generated":{"line":1,"column":888}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":65,"column":10},"generated":{"line":1,"column":891}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"res","original":{"line":65,"column":25},"generated":{"line":1,"column":893}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"split","original":{"line":65,"column":29},"generated":{"line":1,"column":895}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":65,"column":35},"generated":{"line":1,"column":901}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":68,"column":8},"generated":{"line":1,"column":906}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":68,"column":28},"generated":{"line":1,"column":912}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":68,"column":8},"generated":{"line":1,"column":921}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":68,"column":21},"generated":{"line":1,"column":923}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":68,"column":39},"generated":{"line":1,"column":927}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":73,"column":11},"generated":{"line":1,"column":929}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"resolver","original":{"line":73,"column":16},"generated":{"line":1,"column":934}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"nameSegments","original":{"line":73,"column":25},"generated":{"line":1,"column":943}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":73,"column":38},"generated":{"line":1,"column":945}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"depth","original":{"line":73,"column":42},"generated":{"line":1,"column":948}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":73,"column":50},"generated":{"line":1,"column":950}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"res","original":{"line":69,"column":13},"generated":{"line":1,"column":953}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_resolveName","original":{"line":77,"column":8},"generated":{"line":1,"column":955}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":77,"column":22},"generated":{"line":1,"column":974}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":78,"column":10},"generated":{"line":1,"column":977}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":78,"column":10},"generated":{"line":1,"column":983}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"PeerId","original":{"line":78,"column":19},"generated":{"line":1,"column":985}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"createFromBytes","original":{"line":78,"column":26},"generated":{"line":1,"column":987}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":78,"column":42},"generated":{"line":1,"column":1003}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"CID","original":{"line":78,"column":46},"generated":{"line":1,"column":1007}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":78,"column":50},"generated":{"line":1,"column":1009}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"multihash","original":{"line":78,"column":56},"generated":{"line":1,"column":1012}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":79,"column":10},"generated":{"line":1,"column":1024}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"routingKey","original":{"line":79,"column":12},"generated":{"line":1,"column":1035}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipns","original":{"line":79,"column":27},"generated":{"line":1,"column":1038}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"getIdKeys","original":{"line":79,"column":32},"generated":{"line":1,"column":1040}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":79,"column":42},"generated":{"line":1,"column":1050}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"toBytes","original":{"line":79,"column":49},"generated":{"line":1,"column":1052}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"record","original":{"line":80,"column":8},"generated":{"line":1,"column":1063}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"record","original":{"line":80,"column":8},"generated":{"line":1,"column":1067}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":95,"column":8},"generated":{"line":1,"column":1069}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"pubKey","original":{"line":110,"column":8},"generated":{"line":1,"column":1071}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":82,"column":8},"generated":{"line":1,"column":1073}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"record","original":{"line":83,"column":6},"generated":{"line":1,"column":1077}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":83,"column":21},"generated":{"line":1,"column":1085}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_routing","original":{"line":83,"column":26},"generated":{"line":1,"column":1090}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"get","original":{"line":83,"column":35},"generated":{"line":1,"column":1099}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"routingKey","original":{"line":83,"column":39},"generated":{"line":1,"column":1103}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"toBuffer","original":{"line":83,"column":50},"generated":{"line":1,"column":1105}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":84,"column":6},"generated":{"line":1,"column":1117}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":84,"column":13},"generated":{"line":1,"column":1123}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":87,"column":10},"generated":{"line":1,"column":1126}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"log","original":{"line":85,"column":6},"generated":{"line":1,"column":1129}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"error","original":{"line":85,"column":10},"generated":{"line":1,"column":1131}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":85,"column":16},"generated":{"line":1,"column":1137}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":87,"column":10},"generated":{"line":1,"column":1140}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"code","original":{"line":87,"column":14},"generated":{"line":1,"column":1142}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ERR_NOT_FOUND","original":{"line":87,"column":23},"generated":{"line":1,"column":1149}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":88,"column":14},"generated":{"line":1,"column":1151}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":88,"column":14},"generated":{"line":1,"column":1157}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":88,"column":22},"generated":{"line":1,"column":1159}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":88,"column":26},"generated":{"line":1,"column":1163}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":88,"column":56},"generated":{"line":1,"column":1193}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":88,"column":94},"generated":{"line":1,"column":1227}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":91,"column":12},"generated":{"line":1,"column":1250}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":91,"column":12},"generated":{"line":1,"column":1256}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":91,"column":20},"generated":{"line":1,"column":1258}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":91,"column":24},"generated":{"line":1,"column":1262}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":91,"column":74},"generated":{"line":1,"column":1312}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"id","original":{"line":91,"column":81},"generated":{"line":1,"column":1314}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":91,"column":88},"generated":{"line":1,"column":1320}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":96,"column":8},"generated":{"line":1,"column":1359}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":97,"column":6},"generated":{"line":1,"column":1363}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipns","original":{"line":97,"column":18},"generated":{"line":1,"column":1365}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"unmarshal","original":{"line":97,"column":23},"generated":{"line":1,"column":1367}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"record","original":{"line":97,"column":33},"generated":{"line":1,"column":1377}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":98,"column":6},"generated":{"line":1,"column":1380}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":98,"column":13},"generated":{"line":1,"column":1386}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":101,"column":12},"generated":{"line":1,"column":1389}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"log","original":{"line":99,"column":6},"generated":{"line":1,"column":1395}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"error","original":{"line":99,"column":10},"generated":{"line":1,"column":1397}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":99,"column":16},"generated":{"line":1,"column":1403}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":101,"column":12},"generated":{"line":1,"column":1406}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":101,"column":20},"generated":{"line":1,"column":1408}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":101,"column":24},"generated":{"line":1,"column":1412}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":101,"column":30},"generated":{"line":1,"column":1418}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":101,"column":89},"generated":{"line":1,"column":1475}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":105,"column":8},"generated":{"line":1,"column":1506}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":105,"column":8},"generated":{"line":1,"column":1509}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"pubKey","original":{"line":105,"column":18},"generated":{"line":1,"column":1511}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":106,"column":13},"generated":{"line":1,"column":1518}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":106,"column":13},"generated":{"line":1,"column":1525}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_validateRecord","original":{"line":106,"column":18},"generated":{"line":1,"column":1530}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":106,"column":34},"generated":{"line":1,"column":1546}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":106,"column":42},"generated":{"line":1,"column":1548}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":111,"column":8},"generated":{"line":1,"column":1551}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"pubKey","original":{"line":112,"column":6},"generated":{"line":1,"column":1555}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":112,"column":21},"generated":{"line":1,"column":1563}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_routing","original":{"line":112,"column":26},"generated":{"line":1,"column":1568}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"get","original":{"line":112,"column":35},"generated":{"line":1,"column":1577}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"routingKey","original":{"line":112,"column":39},"generated":{"line":1,"column":1581}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"toBuffer","original":{"line":112,"column":50},"generated":{"line":1,"column":1583}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":113,"column":6},"generated":{"line":1,"column":1595}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":113,"column":13},"generated":{"line":1,"column":1601}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":116,"column":10},"generated":{"line":1,"column":1604}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"log","original":{"line":114,"column":6},"generated":{"line":1,"column":1607}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"error","original":{"line":114,"column":10},"generated":{"line":1,"column":1609}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":114,"column":16},"generated":{"line":1,"column":1615}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":116,"column":10},"generated":{"line":1,"column":1618}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"code","original":{"line":116,"column":14},"generated":{"line":1,"column":1620}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ERR_NOT_FOUND","original":{"line":116,"column":23},"generated":{"line":1,"column":1627}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":117,"column":14},"generated":{"line":1,"column":1629}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":117,"column":14},"generated":{"line":1,"column":1635}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":117,"column":22},"generated":{"line":1,"column":1637}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":117,"column":26},"generated":{"line":1,"column":1641}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"name","original":{"line":117,"column":60},"generated":{"line":1,"column":1675}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":117,"column":98},"generated":{"line":1,"column":1709}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":120,"column":12},"generated":{"line":1,"column":1732}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":120,"column":12},"generated":{"line":1,"column":1738}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":120,"column":20},"generated":{"line":1,"column":1740}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":120,"column":24},"generated":{"line":1,"column":1744}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":120,"column":93},"generated":{"line":1,"column":1813}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"id","original":{"line":120,"column":100},"generated":{"line":1,"column":1815}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":120,"column":107},"generated":{"line":1,"column":1821}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":123,"column":8},"generated":{"line":1,"column":1861}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":125,"column":6},"generated":{"line":1,"column":1865}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"pubKey","original":{"line":125,"column":13},"generated":{"line":1,"column":1867}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"crypto","original":{"line":125,"column":22},"generated":{"line":1,"column":1874}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"keys","original":{"line":125,"column":29},"generated":{"line":1,"column":1876}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"unmarshalPublicKey","original":{"line":125,"column":34},"generated":{"line":1,"column":1881}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"pubKey","original":{"line":125,"column":53},"generated":{"line":1,"column":1900}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":126,"column":6},"generated":{"line":1,"column":1903}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":126,"column":13},"generated":{"line":1,"column":1909}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":129,"column":12},"generated":{"line":1,"column":1912}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"log","original":{"line":127,"column":6},"generated":{"line":1,"column":1918}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"error","original":{"line":127,"column":10},"generated":{"line":1,"column":1920}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"err","original":{"line":127,"column":16},"generated":{"line":1,"column":1926}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"errcode","original":{"line":129,"column":12},"generated":{"line":1,"column":1929}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":129,"column":20},"generated":{"line":1,"column":1931}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"Error","original":{"line":129,"column":24},"generated":{"line":1,"column":1935}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":129,"column":30},"generated":{"line":1,"column":1941}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":129,"column":95},"generated":{"line":1,"column":2004}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":132,"column":11},"generated":{"line":1,"column":2036}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","original":{"line":132,"column":11},"generated":{"line":1,"column":2043}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_validateRecord","original":{"line":132,"column":16},"generated":{"line":1,"column":2048}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":132,"column":32},"generated":{"line":1,"column":2064}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":132,"column":40},"generated":{"line":1,"column":2066}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"_validateRecord","original":{"line":136,"column":8},"generated":{"line":1,"column":2069}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":136,"column":25},"generated":{"line":1,"column":2091}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":136,"column":33},"generated":{"line":1,"column":2093}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"pubKey","original":{"line":137,"column":10},"generated":{"line":1,"column":2096}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"pubKey","original":{"line":137,"column":10},"generated":{"line":1,"column":2102}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipns","original":{"line":137,"column":25},"generated":{"line":1,"column":2110}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"extractPublicKey","original":{"line":137,"column":30},"generated":{"line":1,"column":2112}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"peerId","original":{"line":137,"column":47},"generated":{"line":1,"column":2129}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":137,"column":55},"generated":{"line":1,"column":2131}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":142,"column":11},"generated":{"line":1,"column":2134}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipns","original":{"line":140,"column":10},"generated":{"line":1,"column":2147}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"validate","original":{"line":140,"column":15},"generated":{"line":1,"column":2149}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"pubKey","original":{"line":140,"column":24},"generated":{"line":1,"column":2158}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":140,"column":32},"generated":{"line":1,"column":2160}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"ipnsEntry","original":{"line":142,"column":11},"generated":{"line":1,"column":2163}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"value","original":{"line":142,"column":21},"generated":{"line":1,"column":2165}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"toString","original":{"line":142,"column":27},"generated":{"line":1,"column":2171}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"exports","original":{"line":146,"column":0},"generated":{"line":1,"column":2183}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"module","original":{"line":146,"column":10},"generated":{"line":1,"column":2191}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"exports","original":{"line":146,"column":17},"generated":{"line":1,"column":2198}},{"source":"node_modules/ipfs/src/core/ipns/resolver.js","name":"IpnsResolver","original":{"line":146,"column":27},"generated":{"line":1,"column":2206}}],"sources":{"node_modules/ipfs/src/core/ipns/resolver.js":"'use strict'\n\nconst ipns = require('ipns')\nconst crypto = require('libp2p-crypto')\nconst PeerId = require('peer-id')\nconst errcode = require('err-code')\nconst CID = require('cids')\n\nconst debug = require('debug')\nconst log = debug('ipfs:ipns:resolver')\nlog.error = debug('ipfs:ipns:resolver:error')\n\nconst { Errors } = require('interface-datastore')\nconst ERR_NOT_FOUND = Errors.notFoundError().code\n\nconst defaultMaximumRecursiveDepth = 32\n\nclass IpnsResolver {\n  constructor (routing) {\n    this._routing = routing\n  }\n\n  async resolve (name, options) {\n    options = options || {}\n\n    if (typeof name !== 'string') {\n      throw errcode(new Error('invalid name'), 'ERR_INVALID_NAME')\n    }\n\n    options = options || {}\n    const recursive = options.recursive && options.recursive.toString() === 'true'\n\n    const nameSegments = name.split('/')\n\n    if (nameSegments.length !== 3 || nameSegments[0] !== '') {\n      throw errcode(new Error('invalid name'), 'ERR_INVALID_NAME')\n    }\n\n    const key = nameSegments[2]\n\n    // Define a maximum depth if recursive option enabled\n    let depth\n\n    if (recursive) {\n      depth = defaultMaximumRecursiveDepth\n    }\n\n    const res = await this.resolver(key, depth)\n\n    log(`${name} was locally resolved correctly`)\n    return res\n  }\n\n  // Recursive resolver according to the specified depth\n  async resolver (name, depth) {\n    // Exceeded recursive maximum depth\n    if (depth === 0) {\n      const errMsg = `could not resolve name (recursion limit of ${defaultMaximumRecursiveDepth} exceeded)`\n      log.error(errMsg)\n\n      throw errcode(new Error(errMsg), 'ERR_RESOLVE_RECURSION_LIMIT')\n    }\n\n    const res = await this._resolveName(name)\n    const nameSegments = res.split('/')\n\n    // If obtained a ipfs cid or recursive option is disabled\n    if (nameSegments[1] === 'ipfs' || !depth) {\n      return res\n    }\n\n    // continue recursively until depth equals 0\n    return this.resolver(nameSegments[2], depth - 1)\n  }\n\n  // resolve ipns entries from the provided routing\n  async _resolveName (name) {\n    const peerId = PeerId.createFromBytes(new CID(name).multihash) // TODO: change to `PeerId.createFromCID` when https://github.com/libp2p/js-peer-id/pull/105 lands and js-ipfs switched to async peer-id lib\n    const { routingKey } = ipns.getIdKeys(peerId.toBytes())\n    let record\n\n    try {\n      record = await this._routing.get(routingKey.toBuffer())\n    } catch (err) {\n      log.error(err)\n\n      if (err.code === ERR_NOT_FOUND) {\n        throw errcode(new Error(`record requested for ${name} was not found in the network`), 'ERR_NO_RECORD_FOUND')\n      }\n\n      throw errcode(new Error(`unexpected error getting the ipns record ${peerId.id}`), 'ERR_UNEXPECTED_ERROR_GETTING_RECORD')\n    }\n\n    // IPNS entry\n    let ipnsEntry\n    try {\n      ipnsEntry = ipns.unmarshal(record)\n    } catch (err) {\n      log.error(err)\n\n      throw errcode(new Error('found ipns record that we couldn\\'t convert to a value'), 'ERR_INVALID_RECORD_RECEIVED')\n    }\n\n    // if the record has a public key validate it\n    if (ipnsEntry.pubKey) {\n      return this._validateRecord(peerId, ipnsEntry)\n    }\n\n    // Otherwise, try to get the public key from routing\n    let pubKey\n    try {\n      pubKey = await this._routing.get(routingKey.toBuffer())\n    } catch (err) {\n      log.error(err)\n\n      if (err.code === ERR_NOT_FOUND) {\n        throw errcode(new Error(`public key requested for ${name} was not found in the network`), 'ERR_NO_RECORD_FOUND')\n      }\n\n      throw errcode(new Error(`unexpected error getting the public key for the ipns record ${peerId.id}`), 'ERR_UNEXPECTED_ERROR_GETTING_PUB_KEY')\n    }\n\n    try {\n      // Insert it into the peer id, in order to be validated by IPNS validator\n      peerId.pubKey = crypto.keys.unmarshalPublicKey(pubKey)\n    } catch (err) {\n      log.error(err)\n\n      throw errcode(new Error('found public key record that we couldn\\'t convert to a value'), 'ERR_INVALID_PUB_KEY_RECEIVED')\n    }\n\n    return this._validateRecord(peerId, ipnsEntry)\n  }\n\n  // validate a resolved record\n  async _validateRecord (peerId, ipnsEntry) {\n    const pubKey = await ipns.extractPublicKey(peerId, ipnsEntry)\n\n    // IPNS entry validation\n    await ipns.validate(pubKey, ipnsEntry)\n\n    return ipnsEntry.value.toString()\n  }\n}\n\nexports = module.exports = IpnsResolver\n"},"lineCount":null}},"error":null,"hash":"ea07db7689afc07a2c510d91756e66ce","cacheData":{"env":{}}}