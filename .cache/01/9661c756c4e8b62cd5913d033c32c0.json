{"id":"n4Hs","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/datastore-core/node_modules/interface-datastore/package.json","includedInParent":true,"mtime":1582583893093},{"name":"./utils","loc":{"line":6,"column":47},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/datastore-core/node_modules/interface-datastore/src/utils.js"},{"name":"./key","loc":{"line":7,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/datastore-core/node_modules/interface-datastore/src/key.js"},{"name":"./errors","loc":{"line":10,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/datastore-core/node_modules/interface-datastore/src/errors.js"}],"generated":{"js":"\"use strict\";const{filter:t,sortAll:e,take:r,map:s}=require(\"./utils\"),a=require(\"./key\"),i=require(\"./errors\");class n{constructor(){this.data={}}async open(){}async put(t,e){this.data[t.toString()]=e}async get(t){if(!(await this.has(t)))throw i.notFoundError();return this.data[t.toString()]}async has(t){return void 0!==this.data[t.toString()]}async delete(t){delete this.data[t.toString()]}batch(){let t=[],e=[];return{put(e,r){t.push([e,r])},delete(t){e.push(t)},commit:async()=>{t.forEach(t=>{this.data[t[0].toString()]=t[1]}),t=[],e.forEach(t=>{delete this.data[t.toString()]}),e=[]}}}query(i){let n=Object.entries(this.data);if(n=s(n,t=>({key:new a(t[0]),value:t[1]})),null!=i.prefix&&(n=t(n,t=>t.key.toString().startsWith(i.prefix))),Array.isArray(i.filters)&&(n=i.filters.reduce((e,r)=>t(e,r),n)),Array.isArray(i.orders)&&(n=i.orders.reduce((t,r)=>e(t,r),n)),null!=i.offset){let e=0;n=t(n,()=>e++>=i.offset)}return null!=i.limit&&(n=r(n,i.limit)),!0===i.keysOnly&&(n=s(n,t=>({key:t.key}))),n}async close(){}}module.exports=n;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":2,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":6,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":6,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"filter","original":{"line":6,"column":8},"generated":{"line":1,"column":26}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":6,"column":6},"generated":{"line":1,"column":28}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"sortAll","original":{"line":6,"column":16},"generated":{"line":1,"column":36}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":6,"column":6},"generated":{"line":1,"column":38}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"take","original":{"line":6,"column":25},"generated":{"line":1,"column":43}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":6,"column":6},"generated":{"line":1,"column":45}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"map","original":{"line":6,"column":31},"generated":{"line":1,"column":49}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"require","original":{"line":6,"column":39},"generated":{"line":1,"column":52}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":6,"column":47},"generated":{"line":1,"column":60}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"Key","original":{"line":7,"column":6},"generated":{"line":1,"column":71}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"require","original":{"line":7,"column":12},"generated":{"line":1,"column":73}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":7,"column":20},"generated":{"line":1,"column":81}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"Errors","original":{"line":10,"column":6},"generated":{"line":1,"column":90}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"require","original":{"line":10,"column":15},"generated":{"line":1,"column":92}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":10,"column":23},"generated":{"line":1,"column":100}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":12,"column":0},"generated":{"line":1,"column":112}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"MemoryDatastore","original":{"line":12,"column":6},"generated":{"line":1,"column":118}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"constructor","original":{"line":15,"column":2},"generated":{"line":1,"column":120}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":16,"column":9},"generated":{"line":1,"column":134}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":16,"column":9},"generated":{"line":1,"column":139}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":16,"column":16},"generated":{"line":1,"column":144}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"open","original":{"line":19,"column":8},"generated":{"line":1,"column":147}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"put","original":{"line":21,"column":8},"generated":{"line":1,"column":161}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":21,"column":13},"generated":{"line":1,"column":171}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"val","original":{"line":21,"column":30},"generated":{"line":1,"column":173}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":22,"column":9},"generated":{"line":1,"column":176}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":22,"column":9},"generated":{"line":1,"column":181}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":22,"column":14},"generated":{"line":1,"column":186}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"toString","original":{"line":22,"column":18},"generated":{"line":1,"column":188}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"val","original":{"line":22,"column":32},"generated":{"line":1,"column":200}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"get","original":{"line":25,"column":8},"generated":{"line":1,"column":202}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":25,"column":13},"generated":{"line":1,"column":212}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":27,"column":8},"generated":{"line":1,"column":215}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":26,"column":25},"generated":{"line":1,"column":226}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"has","original":{"line":26,"column":30},"generated":{"line":1,"column":231}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":26,"column":34},"generated":{"line":1,"column":235}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":27,"column":17},"generated":{"line":1,"column":239}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"Errors","original":{"line":27,"column":23},"generated":{"line":1,"column":245}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"notFoundError","original":{"line":27,"column":30},"generated":{"line":1,"column":247}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":28,"column":11},"generated":{"line":1,"column":263}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":28,"column":11},"generated":{"line":1,"column":270}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":28,"column":16},"generated":{"line":1,"column":275}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":28,"column":21},"generated":{"line":1,"column":280}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"toString","original":{"line":28,"column":25},"generated":{"line":1,"column":282}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"has","original":{"line":31,"column":8},"generated":{"line":1,"column":294}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":31,"column":13},"generated":{"line":1,"column":304}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":32,"column":11},"generated":{"line":1,"column":307}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"undefined","original":{"line":32,"column":41},"generated":{"line":1,"column":319}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":32,"column":11},"generated":{"line":1,"column":323}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":32,"column":16},"generated":{"line":1,"column":328}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":32,"column":21},"generated":{"line":1,"column":333}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"toString","original":{"line":32,"column":25},"generated":{"line":1,"column":335}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"delete","original":{"line":35,"column":8},"generated":{"line":1,"column":347}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":35,"column":16},"generated":{"line":1,"column":360}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":36,"column":11},"generated":{"line":1,"column":370}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":36,"column":16},"generated":{"line":1,"column":375}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":36,"column":21},"generated":{"line":1,"column":380}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"toString","original":{"line":36,"column":25},"generated":{"line":1,"column":382}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"batch","original":{"line":39,"column":2},"generated":{"line":1,"column":394}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"puts","original":{"line":40,"column":8},"generated":{"line":1,"column":402}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"puts","original":{"line":40,"column":8},"generated":{"line":1,"column":406}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":40,"column":15},"generated":{"line":1,"column":408}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"dels","original":{"line":41,"column":8},"generated":{"line":1,"column":411}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":41,"column":15},"generated":{"line":1,"column":413}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":43,"column":11},"generated":{"line":1,"column":416}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":43,"column":11},"generated":{"line":1,"column":422}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"put","original":{"line":44,"column":6},"generated":{"line":1,"column":423}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":44,"column":11},"generated":{"line":1,"column":427}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"value","original":{"line":44,"column":28},"generated":{"line":1,"column":429}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"puts","original":{"line":45,"column":8},"generated":{"line":1,"column":432}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"push","original":{"line":45,"column":13},"generated":{"line":1,"column":434}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":45,"column":18},"generated":{"line":1,"column":439}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":45,"column":19},"generated":{"line":1,"column":440}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"value","original":{"line":45,"column":24},"generated":{"line":1,"column":442}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"delete","original":{"line":47,"column":6},"generated":{"line":1,"column":447}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":47,"column":14},"generated":{"line":1,"column":454}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"dels","original":{"line":48,"column":8},"generated":{"line":1,"column":457}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"push","original":{"line":48,"column":13},"generated":{"line":1,"column":459}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":48,"column":18},"generated":{"line":1,"column":464}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"commit","original":{"line":50,"column":6},"generated":{"line":1,"column":468}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":50,"column":14},"generated":{"line":1,"column":475}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"puts","original":{"line":51,"column":8},"generated":{"line":1,"column":485}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"forEach","original":{"line":51,"column":13},"generated":{"line":1,"column":487}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"v","original":{"line":51,"column":21},"generated":{"line":1,"column":495}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":52,"column":15},"generated":{"line":1,"column":499}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":52,"column":15},"generated":{"line":1,"column":504}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"v","original":{"line":52,"column":20},"generated":{"line":1,"column":509}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":52,"column":22},"generated":{"line":1,"column":511}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"toString","original":{"line":52,"column":25},"generated":{"line":1,"column":514}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"v","original":{"line":52,"column":39},"generated":{"line":1,"column":526}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":52,"column":41},"generated":{"line":1,"column":528}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"puts","original":{"line":54,"column":8},"generated":{"line":1,"column":533}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":54,"column":15},"generated":{"line":1,"column":535}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"dels","original":{"line":56,"column":8},"generated":{"line":1,"column":538}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"forEach","original":{"line":56,"column":13},"generated":{"line":1,"column":540}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":56,"column":21},"generated":{"line":1,"column":548}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":57,"column":17},"generated":{"line":1,"column":559}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":57,"column":22},"generated":{"line":1,"column":564}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":57,"column":27},"generated":{"line":1,"column":569}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"toString","original":{"line":57,"column":31},"generated":{"line":1,"column":571}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"dels","original":{"line":59,"column":8},"generated":{"line":1,"column":585}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":59,"column":15},"generated":{"line":1,"column":587}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"query","original":{"line":64,"column":2},"generated":{"line":1,"column":592}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":64,"column":9},"generated":{"line":1,"column":598}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":65,"column":8},"generated":{"line":1,"column":601}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":65,"column":8},"generated":{"line":1,"column":605}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"Object","original":{"line":65,"column":13},"generated":{"line":1,"column":607}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"entries","original":{"line":65,"column":20},"generated":{"line":1,"column":614}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":65,"column":28},"generated":{"line":1,"column":622}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"data","original":{"line":65,"column":33},"generated":{"line":1,"column":627}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":81,"column":8},"generated":{"line":1,"column":633}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":67,"column":4},"generated":{"line":1,"column":636}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"map","original":{"line":67,"column":9},"generated":{"line":1,"column":638}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":67,"column":13},"generated":{"line":1,"column":640}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"entry","original":{"line":67,"column":17},"generated":{"line":1,"column":642}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":67,"column":27},"generated":{"line":1,"column":646}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":67,"column":29},"generated":{"line":1,"column":647}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":67,"column":34},"generated":{"line":1,"column":651}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"Key","original":{"line":67,"column":38},"generated":{"line":1,"column":655}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"entry","original":{"line":67,"column":42},"generated":{"line":1,"column":657}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":67,"column":48},"generated":{"line":1,"column":659}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"value","original":{"line":67,"column":53},"generated":{"line":1,"column":663}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"entry","original":{"line":67,"column":60},"generated":{"line":1,"column":669}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":67,"column":66},"generated":{"line":1,"column":671}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":69,"column":20},"generated":{"line":1,"column":677}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":69,"column":8},"generated":{"line":1,"column":683}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"prefix","original":{"line":69,"column":10},"generated":{"line":1,"column":685}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":70,"column":6},"generated":{"line":1,"column":694}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"filter","original":{"line":70,"column":11},"generated":{"line":1,"column":696}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":70,"column":18},"generated":{"line":1,"column":698}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"e","original":{"line":70,"column":22},"generated":{"line":1,"column":700}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"e","original":{"line":70,"column":27},"generated":{"line":1,"column":703}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":70,"column":29},"generated":{"line":1,"column":705}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"toString","original":{"line":70,"column":33},"generated":{"line":1,"column":709}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"startsWith","original":{"line":70,"column":44},"generated":{"line":1,"column":720}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":70,"column":55},"generated":{"line":1,"column":731}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"prefix","original":{"line":70,"column":57},"generated":{"line":1,"column":733}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"Array","original":{"line":73,"column":8},"generated":{"line":1,"column":743}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"isArray","original":{"line":73,"column":14},"generated":{"line":1,"column":749}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":73,"column":22},"generated":{"line":1,"column":757}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"filters","original":{"line":73,"column":24},"generated":{"line":1,"column":759}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":74,"column":6},"generated":{"line":1,"column":770}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":74,"column":11},"generated":{"line":1,"column":772}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"filters","original":{"line":74,"column":13},"generated":{"line":1,"column":774}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"reduce","original":{"line":74,"column":21},"generated":{"line":1,"column":782}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":74,"column":28},"generated":{"line":1,"column":789}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":74,"column":29},"generated":{"line":1,"column":790}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"f","original":{"line":74,"column":33},"generated":{"line":1,"column":792}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"filter","original":{"line":74,"column":39},"generated":{"line":1,"column":796}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":74,"column":46},"generated":{"line":1,"column":798}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"f","original":{"line":74,"column":50},"generated":{"line":1,"column":800}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":74,"column":54},"generated":{"line":1,"column":803}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"Array","original":{"line":77,"column":8},"generated":{"line":1,"column":807}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"isArray","original":{"line":77,"column":14},"generated":{"line":1,"column":813}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":77,"column":22},"generated":{"line":1,"column":821}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"orders","original":{"line":77,"column":24},"generated":{"line":1,"column":823}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":78,"column":6},"generated":{"line":1,"column":833}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":78,"column":11},"generated":{"line":1,"column":835}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"orders","original":{"line":78,"column":13},"generated":{"line":1,"column":837}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"reduce","original":{"line":78,"column":20},"generated":{"line":1,"column":844}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":78,"column":27},"generated":{"line":1,"column":851}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":78,"column":28},"generated":{"line":1,"column":852}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"f","original":{"line":78,"column":32},"generated":{"line":1,"column":854}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"sortAll","original":{"line":78,"column":38},"generated":{"line":1,"column":858}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":78,"column":46},"generated":{"line":1,"column":860}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"f","original":{"line":78,"column":50},"generated":{"line":1,"column":862}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":78,"column":54},"generated":{"line":1,"column":865}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":81,"column":20},"generated":{"line":1,"column":869}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":81,"column":8},"generated":{"line":1,"column":875}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"offset","original":{"line":81,"column":10},"generated":{"line":1,"column":877}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":81,"column":26},"generated":{"line":1,"column":884}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"i","original":{"line":82,"column":10},"generated":{"line":1,"column":885}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"i","original":{"line":82,"column":10},"generated":{"line":1,"column":889}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":82,"column":14},"generated":{"line":1,"column":891}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":83,"column":6},"generated":{"line":1,"column":893}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"filter","original":{"line":83,"column":11},"generated":{"line":1,"column":895}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":83,"column":18},"generated":{"line":1,"column":897}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":83,"column":22},"generated":{"line":1,"column":899}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"i","original":{"line":83,"column":28},"generated":{"line":1,"column":903}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":83,"column":35},"generated":{"line":1,"column":908}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"offset","original":{"line":83,"column":37},"generated":{"line":1,"column":910}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":94,"column":11},"generated":{"line":1,"column":918}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":86,"column":19},"generated":{"line":1,"column":925}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":86,"column":8},"generated":{"line":1,"column":931}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"limit","original":{"line":86,"column":10},"generated":{"line":1,"column":933}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":87,"column":6},"generated":{"line":1,"column":941}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"take","original":{"line":87,"column":11},"generated":{"line":1,"column":943}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":87,"column":16},"generated":{"line":1,"column":945}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":87,"column":20},"generated":{"line":1,"column":947}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"limit","original":{"line":87,"column":22},"generated":{"line":1,"column":949}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":90,"column":23},"generated":{"line":1,"column":958}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"q","original":{"line":90,"column":8},"generated":{"line":1,"column":962}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"keysOnly","original":{"line":90,"column":10},"generated":{"line":1,"column":964}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":91,"column":6},"generated":{"line":1,"column":975}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"map","original":{"line":91,"column":11},"generated":{"line":1,"column":977}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":91,"column":15},"generated":{"line":1,"column":979}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"e","original":{"line":91,"column":19},"generated":{"line":1,"column":981}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","original":{"line":91,"column":25},"generated":{"line":1,"column":985}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":91,"column":27},"generated":{"line":1,"column":986}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"e","original":{"line":91,"column":32},"generated":{"line":1,"column":990}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"key","original":{"line":91,"column":34},"generated":{"line":1,"column":992}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"it","original":{"line":94,"column":11},"generated":{"line":1,"column":1000}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"close","original":{"line":97,"column":8},"generated":{"line":1,"column":1002}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"module","original":{"line":100,"column":0},"generated":{"line":1,"column":1018}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"exports","original":{"line":100,"column":7},"generated":{"line":1,"column":1025}},{"source":"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js","name":"MemoryDatastore","original":{"line":100,"column":17},"generated":{"line":1,"column":1033}}],"sources":{"node_modules/datastore-core/node_modules/interface-datastore/src/memory.js":"/* @flow */\n'use strict'\n\n/* :: import type {Batch, Query, QueryResult, Callback} from './' */\n\nconst { filter, sortAll, take, map } = require('./utils')\nconst Key = require('./key')\n\n// Errors\nconst Errors = require('./errors')\n\nclass MemoryDatastore {\n  /* :: data: {[key: string]: Buffer} */\n\n  constructor () {\n    this.data = {}\n  }\n\n  async open () /* : Promise */ {}\n\n  async put (key /* : Key */, val /* : Buffer */) /* : Promise */ {\n    this.data[key.toString()] = val\n  }\n\n  async get (key /* : Key */) /* : Promise<Buffer> */ {\n    const exists = await this.has(key)\n    if (!exists) throw Errors.notFoundError()\n    return this.data[key.toString()]\n  }\n\n  async has (key /* : Key */) /* : Promise<Boolean> */ {\n    return this.data[key.toString()] !== undefined\n  }\n\n  async delete (key /* : Key */) /* : Promise */ {\n    delete this.data[key.toString()]\n  }\n\n  batch () /* : Batch<Buffer> */ {\n    let puts = []\n    let dels = []\n\n    return {\n      put (key /* : Key */, value /* : Buffer */) /* : void */ {\n        puts.push([key, value])\n      },\n      delete (key /* : Key */) /* : void */ {\n        dels.push(key)\n      },\n      commit: async () /* : Promise */ => {\n        puts.forEach(v => {\n          this.data[v[0].toString()] = v[1]\n        })\n        puts = []\n\n        dels.forEach(key => {\n          delete this.data[key.toString()]\n        })\n        dels = []\n      }\n    }\n  }\n\n  query (q /* : Query<Buffer> */) /* : Iterator */ {\n    let it = Object.entries(this.data)\n\n    it = map(it, entry => ({ key: new Key(entry[0]), value: entry[1] }))\n\n    if (q.prefix != null) {\n      it = filter(it, e => e.key.toString().startsWith(q.prefix))\n    }\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sortAll(it, f), it)\n    }\n\n    if (q.offset != null) {\n      let i = 0\n      it = filter(it, () => i++ >= q.offset)\n    }\n\n    if (q.limit != null) {\n      it = take(it, q.limit)\n    }\n\n    if (q.keysOnly === true) {\n      it = map(it, e => ({ key: e.key }))\n    }\n\n    return it\n  }\n\n  async close () /* : Promise */ {}\n}\n\nmodule.exports = MemoryDatastore\n"},"lineCount":null}},"error":null,"hash":"1fd9477e6d3612cc2945ffc8e24497b4","cacheData":{"env":{}}}