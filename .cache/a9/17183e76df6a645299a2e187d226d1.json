{"id":"X2Gu","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-bitswap/package.json","includedInParent":true,"mtime":1582579780694},{"name":"just-debounce-it","loc":{"line":3,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/just-debounce-it/index.js"},{"name":"../types/message","loc":{"line":5,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-bitswap/src/types/message/index.js"},{"name":"../utils","loc":{"line":6,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-bitswap/src/utils.js"}],"generated":{"js":"\"use strict\";const e=require(\"just-debounce-it\"),s=require(\"../types/message\"),t=require(\"../utils\").logger;module.exports=class{constructor(s,i,r){this.peerId=i,this.network=r,this.refcnt=1,this._entries=[],this._log=t(s,\"msgqueue\",i.toB58String().slice(0,8)),this.sendEntries=e(this._sendEntries.bind(this),200)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new s(!1);this._entries.forEach(s=>{s.cancel?e.cancel(s.cid):e.addEntry(s.cid,s.priority)}),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(s){return void this._log.error(\"cant connect to peer %s: %s\",this.peerId.toB58String(),s.message)}this._log(\"sending message to peer %s\",this.peerId.toB58String()),this.network.sendMessage(this.peerId,e).catch(e=>{this._log.error(\"send error: %s\",e.message)})}};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":3,"column":0},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":3,"column":0},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":3,"column":0},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":5,"column":0},"generated":{"line":1,"column":49}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":5,"column":0},"generated":{"line":1,"column":51}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":5,"column":0},"generated":{"line":1,"column":59}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":6,"column":0},"generated":{"line":1,"column":79}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":6,"column":0},"generated":{"line":1,"column":81}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":6,"column":0},"generated":{"line":1,"column":89}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":6,"column":0},"generated":{"line":1,"column":101}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":8,"column":0},"generated":{"line":1,"column":108}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":8,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":8,"column":0},"generated":{"line":1,"column":123}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":9,"column":0},"generated":{"line":1,"column":129}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":9,"column":0},"generated":{"line":1,"column":141}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":9,"column":0},"generated":{"line":1,"column":143}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":9,"column":0},"generated":{"line":1,"column":145}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":10,"column":0},"generated":{"line":1,"column":148}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":10,"column":0},"generated":{"line":1,"column":153}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":10,"column":0},"generated":{"line":1,"column":160}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":11,"column":0},"generated":{"line":1,"column":162}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":11,"column":0},"generated":{"line":1,"column":167}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":11,"column":0},"generated":{"line":1,"column":175}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":12,"column":0},"generated":{"line":1,"column":177}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":12,"column":0},"generated":{"line":1,"column":182}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":12,"column":0},"generated":{"line":1,"column":189}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":14,"column":0},"generated":{"line":1,"column":191}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":14,"column":0},"generated":{"line":1,"column":196}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":14,"column":0},"generated":{"line":1,"column":205}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":208}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":213}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":218}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":220}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":222}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":233}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":235}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":249}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":255}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":15,"column":0},"generated":{"line":1,"column":257}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":16,"column":0},"generated":{"line":1,"column":261}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":16,"column":0},"generated":{"line":1,"column":266}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":16,"column":0},"generated":{"line":1,"column":278}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":16,"column":0},"generated":{"line":1,"column":280}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":16,"column":0},"generated":{"line":1,"column":285}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":16,"column":0},"generated":{"line":1,"column":298}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":16,"column":0},"generated":{"line":1,"column":303}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":16,"column":0},"generated":{"line":1,"column":309}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":19,"column":0},"generated":{"line":1,"column":314}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":19,"column":0},"generated":{"line":1,"column":325}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":20,"column":0},"generated":{"line":1,"column":328}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":20,"column":0},"generated":{"line":1,"column":330}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":24,"column":0},"generated":{"line":1,"column":337}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":24,"column":0},"generated":{"line":1,"column":342}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":24,"column":0},"generated":{"line":1,"column":347}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":27,"column":0},"generated":{"line":1,"column":350}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":27,"column":0},"generated":{"line":1,"column":361}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":28,"column":0},"generated":{"line":1,"column":364}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":28,"column":0},"generated":{"line":1,"column":369}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":28,"column":0},"generated":{"line":1,"column":378}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":28,"column":0},"generated":{"line":1,"column":383}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":28,"column":0},"generated":{"line":1,"column":392}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":28,"column":0},"generated":{"line":1,"column":399}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":29,"column":0},"generated":{"line":1,"column":402}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":29,"column":0},"generated":{"line":1,"column":407}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":32,"column":0},"generated":{"line":1,"column":421}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":33,"column":0},"generated":{"line":1,"column":436}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":33,"column":0},"generated":{"line":1,"column":440}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":33,"column":0},"generated":{"line":1,"column":445}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":33,"column":0},"generated":{"line":1,"column":454}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":34,"column":0},"generated":{"line":1,"column":461}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":37,"column":0},"generated":{"line":1,"column":468}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":37,"column":0},"generated":{"line":1,"column":474}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":37,"column":0},"generated":{"line":1,"column":476}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":37,"column":0},"generated":{"line":1,"column":480}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":37,"column":0},"generated":{"line":1,"column":483}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":38,"column":0},"generated":{"line":1,"column":486}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":38,"column":0},"generated":{"line":1,"column":491}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":38,"column":0},"generated":{"line":1,"column":500}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":38,"column":0},"generated":{"line":1,"column":508}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":39,"column":0},"generated":{"line":1,"column":512}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":39,"column":0},"generated":{"line":1,"column":514}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":40,"column":0},"generated":{"line":1,"column":521}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":40,"column":0},"generated":{"line":1,"column":523}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":40,"column":0},"generated":{"line":1,"column":530}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":40,"column":0},"generated":{"line":1,"column":532}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":42,"column":0},"generated":{"line":1,"column":537}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":42,"column":0},"generated":{"line":1,"column":539}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":42,"column":0},"generated":{"line":1,"column":548}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":42,"column":0},"generated":{"line":1,"column":550}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":42,"column":0},"generated":{"line":1,"column":554}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":42,"column":0},"generated":{"line":1,"column":556}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":45,"column":0},"generated":{"line":1,"column":568}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":45,"column":0},"generated":{"line":1,"column":573}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":45,"column":0},"generated":{"line":1,"column":582}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":46,"column":0},"generated":{"line":1,"column":585}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":46,"column":0},"generated":{"line":1,"column":590}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":46,"column":0},"generated":{"line":1,"column":601}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":49,"column":0},"generated":{"line":1,"column":604}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":49,"column":0},"generated":{"line":1,"column":615}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":50,"column":0},"generated":{"line":1,"column":618}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":51,"column":0},"generated":{"line":1,"column":628}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":51,"column":0},"generated":{"line":1,"column":633}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":51,"column":0},"generated":{"line":1,"column":641}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":51,"column":0},"generated":{"line":1,"column":651}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":51,"column":0},"generated":{"line":1,"column":656}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":52,"column":0},"generated":{"line":1,"column":664}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":52,"column":0},"generated":{"line":1,"column":670}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":54,"column":0},"generated":{"line":1,"column":673}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":685}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":690}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":695}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":701}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":731}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":736}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":743}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":757}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":53,"column":0},"generated":{"line":1,"column":759}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":57,"column":0},"generated":{"line":1,"column":768}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":57,"column":0},"generated":{"line":1,"column":773}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":57,"column":0},"generated":{"line":1,"column":778}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":57,"column":0},"generated":{"line":1,"column":807}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":57,"column":0},"generated":{"line":1,"column":812}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":57,"column":0},"generated":{"line":1,"column":819}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":834}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":839}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":847}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":859}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":864}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":871}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":874}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":880}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":61,"column":0},"generated":{"line":1,"column":884}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":61,"column":0},"generated":{"line":1,"column":889}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":61,"column":0},"generated":{"line":1,"column":894}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":61,"column":0},"generated":{"line":1,"column":900}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":61,"column":0},"generated":{"line":1,"column":917}},{"source":"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js","original":{"line":61,"column":0},"generated":{"line":1,"column":919}}],"sources":{"node_modules/ipfs/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js":"'use strict'\n\nconst debounce = require('just-debounce-it')\n\nconst Message = require('../types/message')\nconst logger = require('../utils').logger\n\nmodule.exports = class MsgQueue {\n  constructor (selfPeerId, otherPeerId, network) {\n    this.peerId = otherPeerId\n    this.network = network\n    this.refcnt = 1\n\n    this._entries = []\n    this._log = logger(selfPeerId, 'msgqueue', otherPeerId.toB58String().slice(0, 8))\n    this.sendEntries = debounce(this._sendEntries.bind(this), 200)\n  }\n\n  addMessage (msg) {\n    if (msg.empty) {\n      return\n    }\n\n    this.send(msg)\n  }\n\n  addEntries (entries) {\n    this._entries = this._entries.concat(entries)\n    this.sendEntries()\n  }\n\n  _sendEntries () {\n    if (!this._entries.length) {\n      return\n    }\n\n    const msg = new Message(false)\n    this._entries.forEach((entry) => {\n      if (entry.cancel) {\n        msg.cancel(entry.cid)\n      } else {\n        msg.addEntry(entry.cid, entry.priority)\n      }\n    })\n    this._entries = []\n    this.addMessage(msg)\n  }\n\n  async send (msg) {\n    try {\n      await this.network.connectTo(this.peerId)\n    } catch (err) {\n      this._log.error('cant connect to peer %s: %s', this.peerId.toB58String(), err.message)\n      return\n    }\n\n    this._log('sending message to peer %s', this.peerId.toB58String())\n\n    // Note: Don't wait for sendMessage() to complete\n    this.network.sendMessage(this.peerId, msg).catch((err) => {\n      this._log.error('send error: %s', err.message)\n    })\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"f849ecd16dd17034369c7cc83b6f809a","cacheData":{"env":{}}}