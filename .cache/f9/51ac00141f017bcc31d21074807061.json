{"id":"IqoR","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/package.json","includedInParent":true,"mtime":1582579780031},{"name":"async/setImmediate","loc":{"line":3,"column":29},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/setImmediate.js"},{"name":"./multicodec","loc":{"line":5,"column":27},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/multicodec.js"},{"name":"events","loc":{"line":6,"column":19},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/events/events.js"},{"name":"multiaddr","loc":{"line":7,"column":26},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/multiaddr/src/index.js"},{"name":"mafmt","loc":{"line":8,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/mafmt/src/index.js"},{"name":"./circuit/stop","loc":{"line":9,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js"},{"name":"./circuit/hop","loc":{"line":10,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/hop.js"},{"name":"./protocol","loc":{"line":11,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/protocol/index.js"},{"name":"./circuit/utils","loc":{"line":12,"column":29},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/utils.js"},{"name":"./circuit/stream-handler","loc":{"line":14,"column":30},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stream-handler.js"},{"name":"debug","loc":{"line":16,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"}],"generated":{"js":"\"use strict\";const e=require(\"async/setImmediate\"),r=require(\"./multicodec\"),t=require(\"events\").EventEmitter,i=require(\"multiaddr\"),n=require(\"mafmt\"),c=require(\"./circuit/stop\"),u=require(\"./circuit/hop\"),s=require(\"./protocol\"),l=require(\"./circuit/utils\"),o=require(\"./circuit/stream-handler\"),a=require(\"debug\"),p=a(\"libp2p:circuit:listener\");p.err=a(\"libp2p:circuit:error:listener\"),module.exports=((a,d,h)=>{const f=new t,m=l(a);return f.stopHandler=new c(a),f.stopHandler.on(\"connection\",e=>f.emit(\"connection\",e)),f.hopHandler=new u(a,d.hop),f.listen=((t,i)=>{i=i||(()=>{}),a.handle(r.relay,(e,r)=>{const t=new o(r);t.read((e,r)=>{if(e)return void p.err(e);let i=null;try{i=s.CircuitRelay.decode(r)}catch(e){return m.writeResponse(t,s.CircuitRelay.Status.MALFORMED_MESSAGE)}switch(i.type){case s.CircuitRelay.Type.CAN_HOP:case s.CircuitRelay.Type.HOP:return f.hopHandler.handle(i,t);case s.CircuitRelay.Type.STOP:return f.stopHandler.handle(i,t,h);default:return m.writeResponse(t,s.CircuitRelay.Status.INVALID_MSG_TYPE),t.close()}})}),e(()=>f.emit(\"listen\")),i()}),f.close=(t=>{a.unhandle(r.relay),e(()=>f.emit(\"close\")),t()}),f.getAddrs=(e=>{let r=a._peerInfo.multiaddrs.toArray();const t=r.filter(e=>n.Circuit.matches(e)&&!e.toString().includes(a._peerInfo.id.toB58String()));t.length&&(r=t);const c=[];r.forEach(e=>{const r=`/p2p-circuit/ipfs/${a._peerInfo.id.toB58String()}`;if(e.toString()!==r)if(n.Circuit.matches(e))c.push(e.encapsulate(`/ipfs/${a._peerInfo.id.toB58String()}`));else if(e.getPeerId())c.push(i(\"/p2p-circuit\").encapsulate(e));else{const r=`${e}/ipfs/${a._peerInfo.id.toB58String()}`;c.push(i(\"/p2p-circuit\").encapsulate(r))}else c.push(i(r))}),e(null,c)}),f});"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"setImmediate","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":3,"column":21},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":3,"column":29},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"multicodec","original":{"line":5,"column":6},"generated":{"line":1,"column":51}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":5,"column":19},"generated":{"line":1,"column":53}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":5,"column":27},"generated":{"line":1,"column":61}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"EE","original":{"line":6,"column":6},"generated":{"line":1,"column":77}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":6,"column":11},"generated":{"line":1,"column":79}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":6,"column":19},"generated":{"line":1,"column":87}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"EventEmitter","original":{"line":6,"column":29},"generated":{"line":1,"column":97}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"multiaddr","original":{"line":7,"column":6},"generated":{"line":1,"column":110}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":7,"column":18},"generated":{"line":1,"column":112}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":7,"column":26},"generated":{"line":1,"column":120}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"mafmt","original":{"line":8,"column":6},"generated":{"line":1,"column":133}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":8,"column":14},"generated":{"line":1,"column":135}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":8,"column":22},"generated":{"line":1,"column":143}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Stop","original":{"line":9,"column":6},"generated":{"line":1,"column":152}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":9,"column":13},"generated":{"line":1,"column":154}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":9,"column":21},"generated":{"line":1,"column":162}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Hop","original":{"line":10,"column":6},"generated":{"line":1,"column":180}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":10,"column":12},"generated":{"line":1,"column":182}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":10,"column":20},"generated":{"line":1,"column":190}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":11,"column":6},"generated":{"line":1,"column":207}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":11,"column":14},"generated":{"line":1,"column":209}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":11,"column":22},"generated":{"line":1,"column":217}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"utilsFactory","original":{"line":12,"column":6},"generated":{"line":1,"column":231}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":12,"column":21},"generated":{"line":1,"column":233}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":12,"column":29},"generated":{"line":1,"column":241}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"StreamHandler","original":{"line":14,"column":6},"generated":{"line":1,"column":260}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":14,"column":22},"generated":{"line":1,"column":262}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":14,"column":30},"generated":{"line":1,"column":270}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"debug","original":{"line":16,"column":6},"generated":{"line":1,"column":298}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"require","original":{"line":16,"column":14},"generated":{"line":1,"column":300}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":16,"column":22},"generated":{"line":1,"column":308}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"log","original":{"line":18,"column":6},"generated":{"line":1,"column":317}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"debug","original":{"line":18,"column":12},"generated":{"line":1,"column":319}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":18,"column":18},"generated":{"line":1,"column":321}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"log","original":{"line":19,"column":0},"generated":{"line":1,"column":348}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"err","original":{"line":19,"column":4},"generated":{"line":1,"column":350}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"debug","original":{"line":19,"column":10},"generated":{"line":1,"column":354}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":19,"column":16},"generated":{"line":1,"column":356}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"module","original":{"line":21,"column":0},"generated":{"line":1,"column":389}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"exports","original":{"line":21,"column":7},"generated":{"line":1,"column":396}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":21,"column":17},"generated":{"line":1,"column":404}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":21,"column":18},"generated":{"line":1,"column":406}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"options","original":{"line":21,"column":25},"generated":{"line":1,"column":408}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"connHandler","original":{"line":21,"column":34},"generated":{"line":1,"column":410}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":22,"column":8},"generated":{"line":1,"column":415}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":22,"column":8},"generated":{"line":1,"column":421}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":22,"column":19},"generated":{"line":1,"column":423}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"EE","original":{"line":22,"column":23},"generated":{"line":1,"column":427}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"utils","original":{"line":23,"column":8},"generated":{"line":1,"column":429}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"utilsFactory","original":{"line":23,"column":16},"generated":{"line":1,"column":431}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":23,"column":29},"generated":{"line":1,"column":433}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":148,"column":9},"generated":{"line":1,"column":436}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":25,"column":2},"generated":{"line":1,"column":443}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"stopHandler","original":{"line":25,"column":11},"generated":{"line":1,"column":445}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":25,"column":25},"generated":{"line":1,"column":457}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Stop","original":{"line":25,"column":29},"generated":{"line":1,"column":461}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":25,"column":34},"generated":{"line":1,"column":463}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":26,"column":2},"generated":{"line":1,"column":466}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"stopHandler","original":{"line":26,"column":11},"generated":{"line":1,"column":468}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"on","original":{"line":26,"column":23},"generated":{"line":1,"column":480}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":26,"column":26},"generated":{"line":1,"column":483}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"conn","original":{"line":26,"column":41},"generated":{"line":1,"column":496}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":26,"column":50},"generated":{"line":1,"column":499}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"emit","original":{"line":26,"column":59},"generated":{"line":1,"column":501}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":26,"column":64},"generated":{"line":1,"column":506}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"conn","original":{"line":26,"column":78},"generated":{"line":1,"column":519}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":27,"column":2},"generated":{"line":1,"column":523}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"hopHandler","original":{"line":27,"column":11},"generated":{"line":1,"column":525}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":27,"column":24},"generated":{"line":1,"column":536}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Hop","original":{"line":27,"column":28},"generated":{"line":1,"column":540}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":27,"column":32},"generated":{"line":1,"column":542}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"options","original":{"line":27,"column":39},"generated":{"line":1,"column":544}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"hop","original":{"line":27,"column":47},"generated":{"line":1,"column":546}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":36,"column":2},"generated":{"line":1,"column":551}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listen","original":{"line":36,"column":11},"generated":{"line":1,"column":553}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":36,"column":20},"generated":{"line":1,"column":560}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"ma","original":{"line":36,"column":21},"generated":{"line":1,"column":562}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"callback","original":{"line":36,"column":25},"generated":{"line":1,"column":564}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"callback","original":{"line":37,"column":4},"generated":{"line":1,"column":569}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"callback","original":{"line":37,"column":15},"generated":{"line":1,"column":571}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":37,"column":28},"generated":{"line":1,"column":574}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":39,"column":4},"generated":{"line":1,"column":583}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"handle","original":{"line":39,"column":10},"generated":{"line":1,"column":585}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"multicodec","original":{"line":39,"column":17},"generated":{"line":1,"column":592}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"relay","original":{"line":39,"column":28},"generated":{"line":1,"column":594}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":39,"column":35},"generated":{"line":1,"column":600}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"_","original":{"line":39,"column":36},"generated":{"line":1,"column":601}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"conn","original":{"line":39,"column":39},"generated":{"line":1,"column":603}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":40,"column":12},"generated":{"line":1,"column":608}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":40,"column":12},"generated":{"line":1,"column":614}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":40,"column":17},"generated":{"line":1,"column":616}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"StreamHandler","original":{"line":40,"column":21},"generated":{"line":1,"column":620}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"conn","original":{"line":40,"column":35},"generated":{"line":1,"column":622}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":42,"column":6},"generated":{"line":1,"column":625}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"read","original":{"line":42,"column":9},"generated":{"line":1,"column":627}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":42,"column":14},"generated":{"line":1,"column":632}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"err","original":{"line":42,"column":15},"generated":{"line":1,"column":633}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"msg","original":{"line":42,"column":20},"generated":{"line":1,"column":635}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"err","original":{"line":43,"column":12},"generated":{"line":1,"column":640}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"err","original":{"line":43,"column":12},"generated":{"line":1,"column":643}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":45,"column":10},"generated":{"line":1,"column":645}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"log","original":{"line":44,"column":10},"generated":{"line":1,"column":657}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"err","original":{"line":44,"column":14},"generated":{"line":1,"column":659}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"err","original":{"line":44,"column":18},"generated":{"line":1,"column":663}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"request","original":{"line":48,"column":12},"generated":{"line":1,"column":666}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"request","original":{"line":48,"column":12},"generated":{"line":1,"column":670}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":48,"column":22},"generated":{"line":1,"column":672}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":49,"column":12},"generated":{"line":1,"column":677}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"request","original":{"line":50,"column":10},"generated":{"line":1,"column":681}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":50,"column":20},"generated":{"line":1,"column":683}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"CircuitRelay","original":{"line":50,"column":26},"generated":{"line":1,"column":685}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"decode","original":{"line":50,"column":39},"generated":{"line":1,"column":698}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"msg","original":{"line":50,"column":46},"generated":{"line":1,"column":705}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":51,"column":10},"generated":{"line":1,"column":708}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"err","original":{"line":51,"column":17},"generated":{"line":1,"column":714}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"utils","original":{"line":52,"column":17},"generated":{"line":1,"column":717}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"utils","original":{"line":52,"column":17},"generated":{"line":1,"column":724}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"writeResponse","original":{"line":52,"column":23},"generated":{"line":1,"column":726}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":53,"column":12},"generated":{"line":1,"column":740}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":54,"column":12},"generated":{"line":1,"column":742}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"CircuitRelay","original":{"line":54,"column":18},"generated":{"line":1,"column":744}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Status","original":{"line":54,"column":31},"generated":{"line":1,"column":757}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"MALFORMED_MESSAGE","original":{"line":54,"column":38},"generated":{"line":1,"column":764}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"request","original":{"line":57,"column":16},"generated":{"line":1,"column":783}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"request","original":{"line":57,"column":16},"generated":{"line":1,"column":790}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"type","original":{"line":57,"column":24},"generated":{"line":1,"column":792}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":58,"column":15},"generated":{"line":1,"column":798}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":58,"column":15},"generated":{"line":1,"column":803}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"CircuitRelay","original":{"line":58,"column":21},"generated":{"line":1,"column":805}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Type","original":{"line":58,"column":34},"generated":{"line":1,"column":818}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"CAN_HOP","original":{"line":58,"column":39},"generated":{"line":1,"column":823}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":59,"column":15},"generated":{"line":1,"column":831}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":59,"column":15},"generated":{"line":1,"column":836}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"CircuitRelay","original":{"line":59,"column":21},"generated":{"line":1,"column":838}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Type","original":{"line":59,"column":34},"generated":{"line":1,"column":851}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"HOP","original":{"line":59,"column":39},"generated":{"line":1,"column":856}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":60,"column":19},"generated":{"line":1,"column":860}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":60,"column":19},"generated":{"line":1,"column":867}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"hopHandler","original":{"line":60,"column":28},"generated":{"line":1,"column":869}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"handle","original":{"line":60,"column":39},"generated":{"line":1,"column":880}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"request","original":{"line":60,"column":46},"generated":{"line":1,"column":887}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":60,"column":55},"generated":{"line":1,"column":889}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":63,"column":15},"generated":{"line":1,"column":892}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":63,"column":15},"generated":{"line":1,"column":897}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"CircuitRelay","original":{"line":63,"column":21},"generated":{"line":1,"column":899}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Type","original":{"line":63,"column":34},"generated":{"line":1,"column":912}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"STOP","original":{"line":63,"column":39},"generated":{"line":1,"column":917}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":64,"column":19},"generated":{"line":1,"column":922}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":64,"column":19},"generated":{"line":1,"column":929}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"stopHandler","original":{"line":64,"column":28},"generated":{"line":1,"column":931}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"handle","original":{"line":64,"column":40},"generated":{"line":1,"column":943}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"request","original":{"line":64,"column":47},"generated":{"line":1,"column":950}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":64,"column":56},"generated":{"line":1,"column":952}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"connHandler","original":{"line":64,"column":60},"generated":{"line":1,"column":954}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":67,"column":10},"generated":{"line":1,"column":957}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":71,"column":19},"generated":{"line":1,"column":965}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"utils","original":{"line":68,"column":12},"generated":{"line":1,"column":972}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"writeResponse","original":{"line":68,"column":18},"generated":{"line":1,"column":974}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":69,"column":14},"generated":{"line":1,"column":988}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"proto","original":{"line":70,"column":14},"generated":{"line":1,"column":990}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"CircuitRelay","original":{"line":70,"column":20},"generated":{"line":1,"column":992}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Status","original":{"line":70,"column":33},"generated":{"line":1,"column":1005}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"INVALID_MSG_TYPE","original":{"line":70,"column":40},"generated":{"line":1,"column":1012}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"sh","original":{"line":71,"column":19},"generated":{"line":1,"column":1030}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"close","original":{"line":71,"column":22},"generated":{"line":1,"column":1032}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"setImmediate","original":{"line":77,"column":4},"generated":{"line":1,"column":1045}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":77,"column":17},"generated":{"line":1,"column":1047}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":77,"column":23},"generated":{"line":1,"column":1051}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"emit","original":{"line":77,"column":32},"generated":{"line":1,"column":1053}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":77,"column":37},"generated":{"line":1,"column":1058}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"callback","original":{"line":78,"column":4},"generated":{"line":1,"column":1069}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":87,"column":2},"generated":{"line":1,"column":1075}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"close","original":{"line":87,"column":11},"generated":{"line":1,"column":1077}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"cb","original":{"line":87,"column":20},"generated":{"line":1,"column":1083}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"cb","original":{"line":87,"column":20},"generated":{"line":1,"column":1084}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":88,"column":4},"generated":{"line":1,"column":1088}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"unhandle","original":{"line":88,"column":10},"generated":{"line":1,"column":1090}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"multicodec","original":{"line":88,"column":19},"generated":{"line":1,"column":1099}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"relay","original":{"line":88,"column":30},"generated":{"line":1,"column":1101}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"setImmediate","original":{"line":89,"column":4},"generated":{"line":1,"column":1108}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":89,"column":17},"generated":{"line":1,"column":1110}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":89,"column":23},"generated":{"line":1,"column":1114}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"emit","original":{"line":89,"column":32},"generated":{"line":1,"column":1116}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":89,"column":37},"generated":{"line":1,"column":1121}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"cb","original":{"line":90,"column":4},"generated":{"line":1,"column":1131}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":110,"column":2},"generated":{"line":1,"column":1137}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"getAddrs","original":{"line":110,"column":11},"generated":{"line":1,"column":1139}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"callback","original":{"line":110,"column":23},"generated":{"line":1,"column":1148}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"callback","original":{"line":110,"column":23},"generated":{"line":1,"column":1149}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addrs","original":{"line":111,"column":8},"generated":{"line":1,"column":1153}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addrs","original":{"line":111,"column":8},"generated":{"line":1,"column":1157}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":111,"column":16},"generated":{"line":1,"column":1159}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"_peerInfo","original":{"line":111,"column":22},"generated":{"line":1,"column":1161}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"multiaddrs","original":{"line":111,"column":32},"generated":{"line":1,"column":1171}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"toArray","original":{"line":111,"column":43},"generated":{"line":1,"column":1182}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"p2pAddrs","original":{"line":114,"column":10},"generated":{"line":1,"column":1192}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"p2pAddrs","original":{"line":114,"column":10},"generated":{"line":1,"column":1198}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addrs","original":{"line":114,"column":21},"generated":{"line":1,"column":1200}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"filter","original":{"line":114,"column":27},"generated":{"line":1,"column":1202}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":114,"column":35},"generated":{"line":1,"column":1209}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"mafmt","original":{"line":115,"column":13},"generated":{"line":1,"column":1212}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Circuit","original":{"line":115,"column":19},"generated":{"line":1,"column":1214}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"matches","original":{"line":115,"column":27},"generated":{"line":1,"column":1222}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":115,"column":35},"generated":{"line":1,"column":1230}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":116,"column":9},"generated":{"line":1,"column":1235}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"toString","original":{"line":116,"column":14},"generated":{"line":1,"column":1237}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"includes","original":{"line":116,"column":25},"generated":{"line":1,"column":1248}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":116,"column":34},"generated":{"line":1,"column":1257}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"_peerInfo","original":{"line":116,"column":40},"generated":{"line":1,"column":1259}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"id","original":{"line":116,"column":50},"generated":{"line":1,"column":1269}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"toB58String","original":{"line":116,"column":53},"generated":{"line":1,"column":1272}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"p2pAddrs","original":{"line":120,"column":8},"generated":{"line":1,"column":1288}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"length","original":{"line":120,"column":17},"generated":{"line":1,"column":1290}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addrs","original":{"line":121,"column":6},"generated":{"line":1,"column":1299}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"p2pAddrs","original":{"line":121,"column":14},"generated":{"line":1,"column":1301}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listenAddrs","original":{"line":124,"column":10},"generated":{"line":1,"column":1304}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listenAddrs","original":{"line":124,"column":10},"generated":{"line":1,"column":1310}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":124,"column":24},"generated":{"line":1,"column":1312}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addrs","original":{"line":125,"column":4},"generated":{"line":1,"column":1315}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"forEach","original":{"line":125,"column":10},"generated":{"line":1,"column":1317}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":125,"column":19},"generated":{"line":1,"column":1325}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"peerMa","original":{"line":126,"column":12},"generated":{"line":1,"column":1329}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"peerMa","original":{"line":126,"column":12},"generated":{"line":1,"column":1335}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":126,"column":42},"generated":{"line":1,"column":1358}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"_peerInfo","original":{"line":126,"column":48},"generated":{"line":1,"column":1360}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"id","original":{"line":126,"column":58},"generated":{"line":1,"column":1370}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"toB58String","original":{"line":126,"column":61},"generated":{"line":1,"column":1373}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":127,"column":10},"generated":{"line":1,"column":1389}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":127,"column":10},"generated":{"line":1,"column":1392}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"toString","original":{"line":127,"column":15},"generated":{"line":1,"column":1394}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"peerMa","original":{"line":127,"column":30},"generated":{"line":1,"column":1407}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":132,"column":10},"generated":{"line":1,"column":1409}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"mafmt","original":{"line":132,"column":11},"generated":{"line":1,"column":1412}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"Circuit","original":{"line":132,"column":17},"generated":{"line":1,"column":1414}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"matches","original":{"line":132,"column":25},"generated":{"line":1,"column":1422}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":132,"column":33},"generated":{"line":1,"column":1430}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listenAddrs","original":{"line":141,"column":8},"generated":{"line":1,"column":1433}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"push","original":{"line":141,"column":20},"generated":{"line":1,"column":1435}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":141,"column":25},"generated":{"line":1,"column":1440}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"encapsulate","original":{"line":141,"column":30},"generated":{"line":1,"column":1442}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":141,"column":51},"generated":{"line":1,"column":1463}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"_peerInfo","original":{"line":141,"column":57},"generated":{"line":1,"column":1465}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"id","original":{"line":141,"column":67},"generated":{"line":1,"column":1475}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"toB58String","original":{"line":141,"column":70},"generated":{"line":1,"column":1478}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":133,"column":12},"generated":{"line":1,"column":1501}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":133,"column":12},"generated":{"line":1,"column":1504}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"getPeerId","original":{"line":133,"column":17},"generated":{"line":1,"column":1506}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listenAddrs","original":{"line":135,"column":10},"generated":{"line":1,"column":1518}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"push","original":{"line":135,"column":22},"generated":{"line":1,"column":1520}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"multiaddr","original":{"line":135,"column":27},"generated":{"line":1,"column":1525}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":135,"column":37},"generated":{"line":1,"column":1527}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"encapsulate","original":{"line":135,"column":53},"generated":{"line":1,"column":1543}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":135,"column":65},"generated":{"line":1,"column":1555}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":136,"column":15},"generated":{"line":1,"column":1563}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"ma","original":{"line":137,"column":16},"generated":{"line":1,"column":1564}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"ma","original":{"line":137,"column":16},"generated":{"line":1,"column":1570}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"addr","original":{"line":137,"column":24},"generated":{"line":1,"column":1575}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"swarm","original":{"line":137,"column":37},"generated":{"line":1,"column":1585}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"_peerInfo","original":{"line":137,"column":43},"generated":{"line":1,"column":1587}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"id","original":{"line":137,"column":53},"generated":{"line":1,"column":1597}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"toB58String","original":{"line":137,"column":56},"generated":{"line":1,"column":1600}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listenAddrs","original":{"line":138,"column":10},"generated":{"line":1,"column":1616}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"push","original":{"line":138,"column":22},"generated":{"line":1,"column":1618}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"multiaddr","original":{"line":138,"column":27},"generated":{"line":1,"column":1623}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":138,"column":37},"generated":{"line":1,"column":1625}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"encapsulate","original":{"line":138,"column":53},"generated":{"line":1,"column":1641}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"ma","original":{"line":138,"column":65},"generated":{"line":1,"column":1653}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listenAddrs","original":{"line":128,"column":8},"generated":{"line":1,"column":1662}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"push","original":{"line":128,"column":20},"generated":{"line":1,"column":1664}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"multiaddr","original":{"line":128,"column":25},"generated":{"line":1,"column":1669}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"peerMa","original":{"line":128,"column":35},"generated":{"line":1,"column":1671}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"callback","original":{"line":145,"column":4},"generated":{"line":1,"column":1677}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","original":{"line":145,"column":13},"generated":{"line":1,"column":1679}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listenAddrs","original":{"line":145,"column":19},"generated":{"line":1,"column":1684}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js","name":"listener","original":{"line":148,"column":9},"generated":{"line":1,"column":1689}}],"sources":{"node_modules/ipfs/node_modules/libp2p/src/circuit/listener.js":"'use strict'\n\nconst setImmediate = require('async/setImmediate')\n\nconst multicodec = require('./multicodec')\nconst EE = require('events').EventEmitter\nconst multiaddr = require('multiaddr')\nconst mafmt = require('mafmt')\nconst Stop = require('./circuit/stop')\nconst Hop = require('./circuit/hop')\nconst proto = require('./protocol')\nconst utilsFactory = require('./circuit/utils')\n\nconst StreamHandler = require('./circuit/stream-handler')\n\nconst debug = require('debug')\n\nconst log = debug('libp2p:circuit:listener')\nlog.err = debug('libp2p:circuit:error:listener')\n\nmodule.exports = (swarm, options, connHandler) => {\n  const listener = new EE()\n  const utils = utilsFactory(swarm)\n\n  listener.stopHandler = new Stop(swarm)\n  listener.stopHandler.on('connection', (conn) => listener.emit('connection', conn))\n  listener.hopHandler = new Hop(swarm, options.hop)\n\n  /**\n   * Add swarm handler and listen for incoming connections\n   *\n   * @param {Multiaddr} ma\n   * @param {Function} callback\n   * @return {void}\n   */\n  listener.listen = (ma, callback) => {\n    callback = callback || (() => {})\n\n    swarm.handle(multicodec.relay, (_, conn) => {\n      const sh = new StreamHandler(conn)\n\n      sh.read((err, msg) => {\n        if (err) {\n          log.err(err)\n          return\n        }\n\n        let request = null\n        try {\n          request = proto.CircuitRelay.decode(msg)\n        } catch (err) {\n          return utils.writeResponse(\n            sh,\n            proto.CircuitRelay.Status.MALFORMED_MESSAGE)\n        }\n\n        switch (request.type) {\n          case proto.CircuitRelay.Type.CAN_HOP:\n          case proto.CircuitRelay.Type.HOP: {\n            return listener.hopHandler.handle(request, sh)\n          }\n\n          case proto.CircuitRelay.Type.STOP: {\n            return listener.stopHandler.handle(request, sh, connHandler)\n          }\n\n          default: {\n            utils.writeResponse(\n              sh,\n              proto.CircuitRelay.Status.INVALID_MSG_TYPE)\n            return sh.close()\n          }\n        }\n      })\n    })\n\n    setImmediate(() => listener.emit('listen'))\n    callback()\n  }\n\n  /**\n   * Remove swarm listener\n   *\n   * @param {Function} cb\n   * @return {void}\n   */\n  listener.close = (cb) => {\n    swarm.unhandle(multicodec.relay)\n    setImmediate(() => listener.emit('close'))\n    cb()\n  }\n\n  /**\n   * Get fixed up multiaddrs\n   *\n   * NOTE: This method will grab the peers multiaddrs and expand them such that:\n   *\n   * a) If it's an existing /p2p-circuit address for a specific relay i.e.\n   *    `/ip4/0.0.0.0/tcp/0/ipfs/QmRelay/p2p-circuit` this method will expand the\n   *    address to `/ip4/0.0.0.0/tcp/0/ipfs/QmRelay/p2p-circuit/ipfs/QmPeer` where\n   *    `QmPeer` is this peers id\n   * b) If it's not a /p2p-circuit address, it will encapsulate the address as a /p2p-circuit\n   *    addr, such when dialing over a relay with this address, it will create the circuit using\n   *    the encapsulated transport address. This is useful when for example, a peer should only\n   *    be dialed over TCP rather than any other transport\n   *\n   * @param {Function} callback\n   * @return {void}\n   */\n  listener.getAddrs = (callback) => {\n    let addrs = swarm._peerInfo.multiaddrs.toArray()\n\n    // get all the explicit relay addrs excluding self\n    const p2pAddrs = addrs.filter((addr) => {\n      return mafmt.Circuit.matches(addr) &&\n        !addr.toString().includes(swarm._peerInfo.id.toB58String())\n    })\n\n    // use the explicit relays instead of any relay\n    if (p2pAddrs.length) {\n      addrs = p2pAddrs\n    }\n\n    const listenAddrs = []\n    addrs.forEach((addr) => {\n      const peerMa = `/p2p-circuit/ipfs/${swarm._peerInfo.id.toB58String()}`\n      if (addr.toString() === peerMa) {\n        listenAddrs.push(multiaddr(peerMa))\n        return\n      }\n\n      if (!mafmt.Circuit.matches(addr)) {\n        if (addr.getPeerId()) {\n          // by default we're reachable over any relay\n          listenAddrs.push(multiaddr('/p2p-circuit').encapsulate(addr))\n        } else {\n          const ma = `${addr}/ipfs/${swarm._peerInfo.id.toB58String()}`\n          listenAddrs.push(multiaddr('/p2p-circuit').encapsulate(ma))\n        }\n      } else {\n        listenAddrs.push(addr.encapsulate(`/ipfs/${swarm._peerInfo.id.toB58String()}`))\n      }\n    })\n\n    callback(null, listenAddrs)\n  }\n\n  return listener\n}\n"},"lineCount":null}},"error":null,"hash":"6d8e43adccd9d7f5b14ba9b859530422","cacheData":{"env":{}}}