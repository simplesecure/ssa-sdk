{"id":"Exv7","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/3box-orbitdb-plugins/package.json","includedInParent":true,"mtime":1582579778660}],"generated":{"js":"const e=\"moderator-access\",t=\"MODERATOR\",s=\"MEMBER\";class r{constructor(e,r){this._capabilityTypes=[t],this._write=[],this._firstModerator=e,this._write.push(this._firstModerator),this._members=Boolean(r.members),this._members&&this._capabilityTypes.push(s),this._encKeyId=r.encKeyId}static get type(){return e}isMod(e){return this._write.includes(e)}isValidCapability(e){return this._capabilityTypes.includes(e)}get firstModerator(){return this._firstModerator}async canAppend(e,s){const r=e.identity.id,i=e.payload.value.capability,a=e.payload.value.id,d=this.isMod(r),o=this.isValidCapability(i);if(d&&o&&await(async()=>s.verifyIdentity(e.identity))()){if(i===t){if(a===this.firstModerator)return!0;this._write.push(a)}return!0}return!1}async load(e){const t=e.split(\"/\"),s=t.pop();this._members=\"members\"===s;const r=s.includes(\"mod\")?s:t.pop();this._firstModerator=r.split(\"_\")[1]}async save(){let t=`${e}/mod_${this._firstModerator}`;const s={address:t+=this._members?\"/members\":\"\"};return this._encKeyId&&(s.encKeyId=this._encKeyId),s}static async create(e,t={}){let s,i,a;if(t.address?(i=t.address.includes(\"members\"),s=t.address.split(\"/\")[1].split(\"_\")[1],a=t.encKeyId):(i=t.members,s=t.firstModerator,a=t.encKeyId),!s)throw new Error(\"Moderator AC: firstModerator required\");return new r(s,{members:i,encKeyId:a})}}module.exports=r;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":1,"column":0},"generated":{"line":1,"column":6}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":1,"column":0},"generated":{"line":1,"column":8}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":3,"column":0},"generated":{"line":1,"column":27}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":3,"column":0},"generated":{"line":1,"column":29}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":4,"column":0},"generated":{"line":1,"column":41}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":4,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":6,"column":0},"generated":{"line":1,"column":52}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":6,"column":0},"generated":{"line":1,"column":58}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":7,"column":0},"generated":{"line":1,"column":60}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":7,"column":0},"generated":{"line":1,"column":72}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":7,"column":0},"generated":{"line":1,"column":74}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":8,"column":0},"generated":{"line":1,"column":77}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":8,"column":0},"generated":{"line":1,"column":82}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":8,"column":0},"generated":{"line":1,"column":99}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":8,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":9,"column":0},"generated":{"line":1,"column":103}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":9,"column":0},"generated":{"line":1,"column":108}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":9,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":10,"column":0},"generated":{"line":1,"column":118}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":10,"column":0},"generated":{"line":1,"column":123}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":10,"column":0},"generated":{"line":1,"column":139}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":11,"column":0},"generated":{"line":1,"column":141}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":11,"column":0},"generated":{"line":1,"column":146}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":11,"column":0},"generated":{"line":1,"column":153}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":11,"column":0},"generated":{"line":1,"column":158}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":11,"column":0},"generated":{"line":1,"column":163}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":12,"column":0},"generated":{"line":1,"column":180}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":12,"column":0},"generated":{"line":1,"column":185}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":12,"column":0},"generated":{"line":1,"column":194}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":12,"column":0},"generated":{"line":1,"column":202}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":12,"column":0},"generated":{"line":1,"column":204}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":13,"column":0},"generated":{"line":1,"column":213}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":13,"column":0},"generated":{"line":1,"column":218}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":13,"column":0},"generated":{"line":1,"column":228}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":13,"column":0},"generated":{"line":1,"column":233}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":13,"column":0},"generated":{"line":1,"column":250}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":13,"column":0},"generated":{"line":1,"column":255}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":14,"column":0},"generated":{"line":1,"column":258}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":14,"column":0},"generated":{"line":1,"column":263}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":14,"column":0},"generated":{"line":1,"column":273}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":14,"column":0},"generated":{"line":1,"column":275}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":17,"column":0},"generated":{"line":1,"column":284}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":17,"column":0},"generated":{"line":1,"column":302}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":17,"column":0},"generated":{"line":1,"column":309}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":19,"column":0},"generated":{"line":1,"column":311}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":19,"column":0},"generated":{"line":1,"column":317}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":20,"column":0},"generated":{"line":1,"column":320}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":20,"column":0},"generated":{"line":1,"column":327}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":20,"column":0},"generated":{"line":1,"column":332}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":20,"column":0},"generated":{"line":1,"column":339}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":20,"column":0},"generated":{"line":1,"column":348}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":23,"column":0},"generated":{"line":1,"column":351}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":23,"column":0},"generated":{"line":1,"column":369}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":24,"column":0},"generated":{"line":1,"column":372}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":24,"column":0},"generated":{"line":1,"column":379}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":24,"column":0},"generated":{"line":1,"column":384}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":24,"column":0},"generated":{"line":1,"column":401}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":24,"column":0},"generated":{"line":1,"column":410}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":27,"column":0},"generated":{"line":1,"column":413}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":28,"column":0},"generated":{"line":1,"column":434}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":28,"column":0},"generated":{"line":1,"column":441}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":28,"column":0},"generated":{"line":1,"column":446}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":31,"column":0},"generated":{"line":1,"column":462}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":31,"column":0},"generated":{"line":1,"column":478}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":31,"column":0},"generated":{"line":1,"column":480}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":32,"column":0},"generated":{"line":1,"column":483}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":32,"column":0},"generated":{"line":1,"column":489}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":32,"column":0},"generated":{"line":1,"column":491}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":32,"column":0},"generated":{"line":1,"column":493}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":32,"column":0},"generated":{"line":1,"column":502}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":33,"column":0},"generated":{"line":1,"column":505}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":33,"column":0},"generated":{"line":1,"column":507}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":33,"column":0},"generated":{"line":1,"column":509}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":33,"column":0},"generated":{"line":1,"column":517}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":33,"column":0},"generated":{"line":1,"column":523}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":34,"column":0},"generated":{"line":1,"column":534}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":34,"column":0},"generated":{"line":1,"column":536}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":34,"column":0},"generated":{"line":1,"column":538}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":34,"column":0},"generated":{"line":1,"column":546}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":34,"column":0},"generated":{"line":1,"column":552}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":35,"column":0},"generated":{"line":1,"column":555}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":35,"column":0},"generated":{"line":1,"column":557}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":35,"column":0},"generated":{"line":1,"column":562}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":35,"column":0},"generated":{"line":1,"column":568}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":36,"column":0},"generated":{"line":1,"column":571}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":36,"column":0},"generated":{"line":1,"column":573}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":36,"column":0},"generated":{"line":1,"column":578}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":36,"column":0},"generated":{"line":1,"column":596}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":38,"column":0},"generated":{"line":1,"column":599}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":38,"column":0},"generated":{"line":1,"column":602}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":38,"column":0},"generated":{"line":1,"column":605}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":37,"column":0},"generated":{"line":1,"column":613}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":37,"column":0},"generated":{"line":1,"column":623}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":37,"column":0},"generated":{"line":1,"column":625}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":37,"column":0},"generated":{"line":1,"column":640}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":37,"column":0},"generated":{"line":1,"column":642}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":38,"column":0},"generated":{"line":1,"column":652}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":38,"column":0},"generated":{"line":1,"column":655}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":39,"column":0},"generated":{"line":1,"column":656}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":39,"column":0},"generated":{"line":1,"column":659}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":39,"column":0},"generated":{"line":1,"column":663}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":39,"column":0},"generated":{"line":1,"column":665}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":40,"column":0},"generated":{"line":1,"column":666}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":40,"column":0},"generated":{"line":1,"column":669}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":40,"column":0},"generated":{"line":1,"column":673}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":40,"column":0},"generated":{"line":1,"column":678}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":40,"column":0},"generated":{"line":1,"column":693}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":40,"column":0},"generated":{"line":1,"column":700}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":41,"column":0},"generated":{"line":1,"column":702}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":41,"column":0},"generated":{"line":1,"column":707}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":41,"column":0},"generated":{"line":1,"column":714}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":41,"column":0},"generated":{"line":1,"column":719}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":43,"column":0},"generated":{"line":1,"column":722}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":43,"column":0},"generated":{"line":1,"column":729}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":46,"column":0},"generated":{"line":1,"column":731}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":46,"column":0},"generated":{"line":1,"column":738}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":49,"column":0},"generated":{"line":1,"column":740}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":49,"column":0},"generated":{"line":1,"column":751}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":50,"column":0},"generated":{"line":1,"column":754}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":50,"column":0},"generated":{"line":1,"column":760}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":50,"column":0},"generated":{"line":1,"column":762}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":50,"column":0},"generated":{"line":1,"column":764}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":50,"column":0},"generated":{"line":1,"column":770}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":51,"column":0},"generated":{"line":1,"column":775}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":51,"column":0},"generated":{"line":1,"column":777}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":51,"column":0},"generated":{"line":1,"column":779}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":52,"column":0},"generated":{"line":1,"column":785}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":52,"column":0},"generated":{"line":1,"column":790}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":52,"column":0},"generated":{"line":1,"column":799}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":52,"column":0},"generated":{"line":1,"column":811}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":53,"column":0},"generated":{"line":1,"column":813}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":53,"column":0},"generated":{"line":1,"column":819}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":53,"column":0},"generated":{"line":1,"column":821}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":53,"column":0},"generated":{"line":1,"column":823}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":53,"column":0},"generated":{"line":1,"column":832}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":53,"column":0},"generated":{"line":1,"column":839}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":53,"column":0},"generated":{"line":1,"column":841}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":53,"column":0},"generated":{"line":1,"column":843}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":54,"column":0},"generated":{"line":1,"column":849}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":54,"column":0},"generated":{"line":1,"column":854}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":54,"column":0},"generated":{"line":1,"column":870}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":54,"column":0},"generated":{"line":1,"column":872}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":54,"column":0},"generated":{"line":1,"column":878}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":54,"column":0},"generated":{"line":1,"column":883}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":57,"column":0},"generated":{"line":1,"column":886}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":59,"column":0},"generated":{"line":1,"column":899}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":59,"column":0},"generated":{"line":1,"column":903}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":59,"column":0},"generated":{"line":1,"column":908}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":59,"column":0},"generated":{"line":1,"column":917}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":59,"column":0},"generated":{"line":1,"column":922}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":61,"column":0},"generated":{"line":1,"column":940}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":61,"column":0},"generated":{"line":1,"column":946}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":61,"column":0},"generated":{"line":1,"column":948}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":61,"column":0},"generated":{"line":1,"column":949}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":60,"column":0},"generated":{"line":1,"column":957}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":60,"column":0},"generated":{"line":1,"column":960}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":60,"column":0},"generated":{"line":1,"column":965}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":60,"column":0},"generated":{"line":1,"column":974}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":60,"column":0},"generated":{"line":1,"column":985}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":63,"column":0},"generated":{"line":1,"column":989}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":62,"column":0},"generated":{"line":1,"column":996}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1001}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1013}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1015}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1024}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":62,"column":0},"generated":{"line":1,"column":1029}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":63,"column":0},"generated":{"line":1,"column":1040}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":66,"column":0},"generated":{"line":1,"column":1042}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":66,"column":0},"generated":{"line":1,"column":1062}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":66,"column":0},"generated":{"line":1,"column":1064}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":66,"column":0},"generated":{"line":1,"column":1066}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1070}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1074}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1076}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1078}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1080}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1083}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1085}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1094}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1096}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1098}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1106}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1115}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1126}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1128}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1130}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1138}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1144}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1149}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1152}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1158}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1163}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1166}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1168}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1170}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":74,"column":0},"generated":{"line":1,"column":1181}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":74,"column":0},"generated":{"line":1,"column":1183}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":74,"column":0},"generated":{"line":1,"column":1185}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1193}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1195}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1197}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1212}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1214}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1216}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1227}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1229}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1235}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1239}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1245}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1286}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1293}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1297}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1299}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1301}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1302}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1310}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1312}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1321}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1326}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1333}},{"source":"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1341}}],"sources":{"node_modules/3box-orbitdb-plugins/src/moderatorAccessController.js":"const type = 'moderator-access'\n\nconst MODERATOR = 'MODERATOR'\nconst MEMBER = 'MEMBER'\n\nclass ModeratorAccessController {\n  constructor (firstModerator, options) {\n    this._capabilityTypes = [MODERATOR]\n    this._write = []     // Allowed to add other mods or members\n    this._firstModerator = firstModerator\n    this._write.push(this._firstModerator)\n    this._members = Boolean(options.members)\n    if (this._members) this._capabilityTypes.push(MEMBER)\n    this._encKeyId = options.encKeyId\n  }\n\n  static get type () { return type }\n\n  isMod(id) {\n    return this._write.includes(id)\n  }\n\n  isValidCapability (capability) {\n    return this._capabilityTypes.includes(capability)\n  }\n\n  get firstModerator () {\n    return this._firstModerator\n  }\n\n  async canAppend (entry, identityProvider) {\n    const entryID = entry.identity.id\n    const capability = entry.payload.value.capability\n    const idAdd = entry.payload.value.id\n    const isMod = this.isMod(entryID)\n    const validCapability = this.isValidCapability(capability)\n    const validSig = async () => identityProvider.verifyIdentity(entry.identity)\n    if (isMod && validCapability && (await validSig())) {\n      if (capability === MODERATOR) {\n        if (idAdd === this.firstModerator) return true\n        this._write.push(idAdd)\n      }\n      return true\n    }\n\n    return false\n  }\n\n  async load (address) {\n    const addList = address.split('/')\n    const suffix = addList.pop()\n    this._members = suffix === 'members'\n    const mod = suffix.includes('mod') ? suffix : addList.pop()\n    this._firstModerator = mod.split('_')[1]\n  }\n\n  async save () {\n    // TODO if entire obj saved in manfest, can just pass our own fields\n    let address = `${type}/mod_${this._firstModerator}`\n    address += this._members ? '/members' : ''\n    const manifest =  { address }\n    if (this._encKeyId) manifest.encKeyId = this._encKeyId\n    return manifest\n  }\n\n  static async create (orbitdb, options = {}) {\n    let firstModerator, members, encKeyId\n\n    if (options.address) {\n      members = options.address.includes('members')\n      firstModerator = options.address.split('/')[1].split('_')[1]\n      encKeyId = options.encKeyId\n    } else {\n      members = options.members\n      firstModerator = options.firstModerator\n      encKeyId = options.encKeyId\n    }\n\n    if (!firstModerator) throw new Error('Moderator AC: firstModerator required')\n    return new ModeratorAccessController(firstModerator, {members, encKeyId})\n  }\n}\n\nmodule.exports = ModeratorAccessController\n"},"lineCount":null}},"error":null,"hash":"c74e23cc0b664d69ca19163cb506df71","cacheData":{"env":{}}}