{"id":"RcO4","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/hamt-sharding/package.json","includedInParent":true,"mtime":1582579782339},{"name":"./consumable-buffer","loc":{"line":3,"column":33},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/hamt-sharding/src/consumable-buffer.js"},{"name":"buffer","parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/node-libs-browser/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar t=require(\"buffer\").Buffer;const e=require(\"./consumable-buffer\");module.exports=function(t){return function(e){return e instanceof s?e:new s(e,t)}};class s{constructor(e,s){if(\"string\"!=typeof e&&!t.isBuffer(e))throw new Error(\"can only hash strings or buffers\");this._value=e,this._hashFn=s,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(t){let e=t;for(;this._availableBits<e;)await this._produceMoreBits();let s=0;for(;e>0;){const t=this._buffers[this._currentBufferIndex],i=Math.min(t.availableBits(),e);s=(s<<i)+t.take(i),e-=i,this._availableBits-=i,0===t.availableBits()&&this._currentBufferIndex++}return s}untake(t){let e=t;for(;e>0;){const t=this._buffers[this._currentBufferIndex],s=Math.min(t.totalBits()-t.availableBits(),e);t.untake(s),e-=s,this._availableBits+=s,this._currentBufferIndex>0&&t.totalBits()===t.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const t=this._depth?this._value+this._depth:this._value,s=await this._hashFn(t),i=new e(s);this._buffers.push(i),this._availableBits+=i.availableBits()}}"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":16,"column":19},"generated":{"line":2,"column":0}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":16,"column":19},"generated":{"line":2,"column":4}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":16,"column":19},"generated":{"line":2,"column":6}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":16,"column":19},"generated":{"line":2,"column":14}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":16,"column":19},"generated":{"line":2,"column":24}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":3,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"ConsumableBuffer","original":{"line":3,"column":6},"generated":{"line":2,"column":37}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"require","original":{"line":3,"column":25},"generated":{"line":2,"column":39}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":3,"column":33},"generated":{"line":2,"column":47}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"module","original":{"line":5,"column":0},"generated":{"line":2,"column":70}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"exports","original":{"line":5,"column":7},"generated":{"line":2,"column":77}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":5,"column":17},"generated":{"line":2,"column":85}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hashFn","original":{"line":5,"column":36},"generated":{"line":2,"column":94}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":6,"column":9},"generated":{"line":2,"column":97}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":6,"column":9},"generated":{"line":2,"column":104}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":6,"column":27},"generated":{"line":2,"column":113}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":7,"column":8},"generated":{"line":2,"column":116}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":7,"column":8},"generated":{"line":2,"column":123}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"InfiniteHash","original":{"line":7,"column":25},"generated":{"line":2,"column":136}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":9,"column":13},"generated":{"line":2,"column":138}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":11,"column":13},"generated":{"line":2,"column":140}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"InfiniteHash","original":{"line":11,"column":17},"generated":{"line":2,"column":144}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":11,"column":30},"generated":{"line":2,"column":146}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hashFn","original":{"line":11,"column":37},"generated":{"line":2,"column":148}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":16,"column":0},"generated":{"line":2,"column":153}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"InfiniteHash","original":{"line":16,"column":6},"generated":{"line":2,"column":159}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"constructor","original":{"line":17,"column":2},"generated":{"line":2,"column":161}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":17,"column":15},"generated":{"line":2,"column":173}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hashFn","original":{"line":17,"column":22},"generated":{"line":2,"column":175}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":18,"column":9},"generated":{"line":2,"column":178}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":18,"column":27},"generated":{"line":2,"column":181}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":18,"column":16},"generated":{"line":2,"column":198}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"Buffer","original":{"line":18,"column":40},"generated":{"line":2,"column":202}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"isBuffer","original":{"line":18,"column":47},"generated":{"line":2,"column":204}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":18,"column":56},"generated":{"line":2,"column":213}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":19,"column":12},"generated":{"line":2,"column":216}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":19,"column":12},"generated":{"line":2,"column":222}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"Error","original":{"line":19,"column":16},"generated":{"line":2,"column":226}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":19,"column":22},"generated":{"line":2,"column":232}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_value","original":{"line":21,"column":9},"generated":{"line":2,"column":268}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_value","original":{"line":21,"column":9},"generated":{"line":2,"column":273}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":21,"column":18},"generated":{"line":2,"column":280}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_hashFn","original":{"line":22,"column":9},"generated":{"line":2,"column":282}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_hashFn","original":{"line":22,"column":9},"generated":{"line":2,"column":287}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hashFn","original":{"line":22,"column":19},"generated":{"line":2,"column":295}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_depth","original":{"line":23,"column":9},"generated":{"line":2,"column":297}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_depth","original":{"line":23,"column":9},"generated":{"line":2,"column":302}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":23,"column":19},"generated":{"line":2,"column":310}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":24,"column":9},"generated":{"line":2,"column":312}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":24,"column":9},"generated":{"line":2,"column":317}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":24,"column":26},"generated":{"line":2,"column":332}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":25,"column":9},"generated":{"line":2,"column":334}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":25,"column":9},"generated":{"line":2,"column":339}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":25,"column":31},"generated":{"line":2,"column":359}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_buffers","original":{"line":26,"column":9},"generated":{"line":2,"column":361}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_buffers","original":{"line":26,"column":9},"generated":{"line":2,"column":366}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":26,"column":20},"generated":{"line":2,"column":375}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"take","original":{"line":29,"column":8},"generated":{"line":2,"column":378}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"bits","original":{"line":29,"column":14},"generated":{"line":2,"column":389}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":30,"column":8},"generated":{"line":2,"column":392}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":30,"column":8},"generated":{"line":2,"column":396}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"bits","original":{"line":30,"column":22},"generated":{"line":2,"column":398}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":32,"column":11},"generated":{"line":2,"column":400}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":32,"column":11},"generated":{"line":2,"column":405}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":32,"column":16},"generated":{"line":2,"column":410}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":32,"column":33},"generated":{"line":2,"column":425}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":33,"column":12},"generated":{"line":2,"column":434}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_produceMoreBits","original":{"line":33,"column":17},"generated":{"line":2,"column":439}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"result","original":{"line":36,"column":8},"generated":{"line":2,"column":458}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"result","original":{"line":36,"column":8},"generated":{"line":2,"column":462}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":36,"column":17},"generated":{"line":2,"column":464}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":38,"column":11},"generated":{"line":2,"column":466}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":38,"column":11},"generated":{"line":2,"column":471}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":38,"column":25},"generated":{"line":2,"column":473}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":38,"column":28},"generated":{"line":2,"column":476}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":39,"column":12},"generated":{"line":2,"column":477}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":39,"column":12},"generated":{"line":2,"column":483}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":39,"column":19},"generated":{"line":2,"column":485}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_buffers","original":{"line":39,"column":24},"generated":{"line":2,"column":490}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":39,"column":33},"generated":{"line":2,"column":499}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":39,"column":38},"generated":{"line":2,"column":504}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"available","original":{"line":40,"column":12},"generated":{"line":2,"column":525}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"Math","original":{"line":40,"column":24},"generated":{"line":2,"column":527}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"min","original":{"line":40,"column":29},"generated":{"line":2,"column":532}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":40,"column":33},"generated":{"line":2,"column":536}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableBits","original":{"line":40,"column":38},"generated":{"line":2,"column":538}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":40,"column":55},"generated":{"line":2,"column":554}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"result","original":{"line":42,"column":6},"generated":{"line":2,"column":557}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"result","original":{"line":42,"column":16},"generated":{"line":2,"column":560}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"available","original":{"line":42,"column":26},"generated":{"line":2,"column":563}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":41,"column":19},"generated":{"line":2,"column":566}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"take","original":{"line":41,"column":24},"generated":{"line":2,"column":568}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"available","original":{"line":41,"column":29},"generated":{"line":2,"column":573}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":43,"column":6},"generated":{"line":2,"column":576}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"available","original":{"line":43,"column":21},"generated":{"line":2,"column":579}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":44,"column":11},"generated":{"line":2,"column":581}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":44,"column":11},"generated":{"line":2,"column":586}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"available","original":{"line":44,"column":29},"generated":{"line":2,"column":602}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":46,"column":35},"generated":{"line":2,"column":604}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":46,"column":10},"generated":{"line":2,"column":608}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableBits","original":{"line":46,"column":15},"generated":{"line":2,"column":610}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":47,"column":13},"generated":{"line":2,"column":627}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":47,"column":13},"generated":{"line":2,"column":632}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"result","original":{"line":51,"column":11},"generated":{"line":2,"column":654}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"result","original":{"line":51,"column":11},"generated":{"line":2,"column":661}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"untake","original":{"line":54,"column":2},"generated":{"line":2,"column":663}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"bits","original":{"line":54,"column":10},"generated":{"line":2,"column":670}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":55,"column":8},"generated":{"line":2,"column":673}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":55,"column":8},"generated":{"line":2,"column":677}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"bits","original":{"line":55,"column":22},"generated":{"line":2,"column":679}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":57,"column":11},"generated":{"line":2,"column":681}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":57,"column":11},"generated":{"line":2,"column":686}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":57,"column":25},"generated":{"line":2,"column":688}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":57,"column":28},"generated":{"line":2,"column":691}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":58,"column":12},"generated":{"line":2,"column":692}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":58,"column":12},"generated":{"line":2,"column":698}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":58,"column":19},"generated":{"line":2,"column":700}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_buffers","original":{"line":58,"column":24},"generated":{"line":2,"column":705}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":58,"column":33},"generated":{"line":2,"column":714}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":58,"column":38},"generated":{"line":2,"column":719}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableForUntake","original":{"line":59,"column":12},"generated":{"line":2,"column":740}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"Math","original":{"line":59,"column":33},"generated":{"line":2,"column":742}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"min","original":{"line":59,"column":38},"generated":{"line":2,"column":747}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":59,"column":42},"generated":{"line":2,"column":751}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"totalBits","original":{"line":59,"column":47},"generated":{"line":2,"column":753}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":59,"column":61},"generated":{"line":2,"column":765}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableBits","original":{"line":59,"column":66},"generated":{"line":2,"column":767}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":59,"column":83},"generated":{"line":2,"column":783}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":60,"column":6},"generated":{"line":2,"column":786}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"untake","original":{"line":60,"column":11},"generated":{"line":2,"column":788}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableForUntake","original":{"line":60,"column":18},"generated":{"line":2,"column":795}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"pendingBits","original":{"line":61,"column":6},"generated":{"line":2,"column":798}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableForUntake","original":{"line":61,"column":21},"generated":{"line":2,"column":801}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":62,"column":11},"generated":{"line":2,"column":803}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":62,"column":11},"generated":{"line":2,"column":808}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableForUntake","original":{"line":62,"column":29},"generated":{"line":2,"column":824}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":64,"column":10},"generated":{"line":2,"column":826}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":64,"column":15},"generated":{"line":2,"column":831}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":64,"column":37},"generated":{"line":2,"column":851}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":64,"column":42},"generated":{"line":2,"column":854}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"totalBits","original":{"line":64,"column":47},"generated":{"line":2,"column":856}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hash","original":{"line":64,"column":63},"generated":{"line":2,"column":870}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableBits","original":{"line":64,"column":68},"generated":{"line":2,"column":872}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_depth","original":{"line":65,"column":13},"generated":{"line":2,"column":890}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_depth","original":{"line":65,"column":13},"generated":{"line":2,"column":895}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":66,"column":13},"generated":{"line":2,"column":904}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_currentBufferIndex","original":{"line":66,"column":13},"generated":{"line":2,"column":909}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_produceMoreBits","original":{"line":71,"column":8},"generated":{"line":2,"column":933}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_depth","original":{"line":72,"column":9},"generated":{"line":2,"column":958}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_depth","original":{"line":72,"column":9},"generated":{"line":2,"column":963}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":74,"column":10},"generated":{"line":2,"column":972}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":74,"column":10},"generated":{"line":2,"column":978}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":74,"column":18},"generated":{"line":2,"column":980}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_depth","original":{"line":74,"column":23},"generated":{"line":2,"column":985}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":74,"column":32},"generated":{"line":2,"column":992}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_value","original":{"line":74,"column":37},"generated":{"line":2,"column":997}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":74,"column":46},"generated":{"line":2,"column":1004}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_depth","original":{"line":74,"column":51},"generated":{"line":2,"column":1009}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":74,"column":60},"generated":{"line":2,"column":1016}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_value","original":{"line":74,"column":65},"generated":{"line":2,"column":1021}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hashValue","original":{"line":75,"column":10},"generated":{"line":2,"column":1028}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":75,"column":28},"generated":{"line":2,"column":1036}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_hashFn","original":{"line":75,"column":33},"generated":{"line":2,"column":1041}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"value","original":{"line":75,"column":41},"generated":{"line":2,"column":1049}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"buffer","original":{"line":76,"column":10},"generated":{"line":2,"column":1052}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","original":{"line":76,"column":19},"generated":{"line":2,"column":1054}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"ConsumableBuffer","original":{"line":76,"column":23},"generated":{"line":2,"column":1058}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"hashValue","original":{"line":76,"column":40},"generated":{"line":2,"column":1060}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_buffers","original":{"line":78,"column":9},"generated":{"line":2,"column":1063}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_buffers","original":{"line":78,"column":9},"generated":{"line":2,"column":1068}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"push","original":{"line":78,"column":18},"generated":{"line":2,"column":1077}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"buffer","original":{"line":78,"column":23},"generated":{"line":2,"column":1082}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":79,"column":9},"generated":{"line":2,"column":1085}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"_availableBits","original":{"line":79,"column":9},"generated":{"line":2,"column":1090}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"buffer","original":{"line":79,"column":27},"generated":{"line":2,"column":1106}},{"source":"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js","name":"availableBits","original":{"line":79,"column":34},"generated":{"line":2,"column":1108}}],"sources":{"node_modules/ipfs/node_modules/hamt-sharding/src/consumable-hash.js":"'use strict'\n\nconst ConsumableBuffer = require('./consumable-buffer')\n\nmodule.exports = function wrapHash (hashFn) {\n  return function hashing (value) {\n    if (value instanceof InfiniteHash) {\n      // already a hash. return it\n      return value\n    } else {\n      return new InfiniteHash(value, hashFn)\n    }\n  }\n}\n\nclass InfiniteHash {\n  constructor (value, hashFn) {\n    if ((typeof value) !== 'string' && !Buffer.isBuffer(value)) {\n      throw new Error('can only hash strings or buffers')\n    }\n    this._value = value\n    this._hashFn = hashFn\n    this._depth = -1\n    this._availableBits = 0\n    this._currentBufferIndex = 0\n    this._buffers = []\n  }\n\n  async take (bits) {\n    let pendingBits = bits\n\n    while (this._availableBits < pendingBits) {\n      await this._produceMoreBits()\n    }\n\n    let result = 0\n\n    while (pendingBits > 0) {\n      const hash = this._buffers[this._currentBufferIndex]\n      const available = Math.min(hash.availableBits(), pendingBits)\n      const took = hash.take(available)\n      result = (result << available) + took\n      pendingBits -= available\n      this._availableBits -= available\n\n      if (hash.availableBits() === 0) {\n        this._currentBufferIndex++\n      }\n    }\n\n    return result\n  }\n\n  untake (bits) {\n    let pendingBits = bits\n\n    while (pendingBits > 0) {\n      const hash = this._buffers[this._currentBufferIndex]\n      const availableForUntake = Math.min(hash.totalBits() - hash.availableBits(), pendingBits)\n      hash.untake(availableForUntake)\n      pendingBits -= availableForUntake\n      this._availableBits += availableForUntake\n\n      if (this._currentBufferIndex > 0 && hash.totalBits() === hash.availableBits()) {\n        this._depth--\n        this._currentBufferIndex--\n      }\n    }\n  }\n\n  async _produceMoreBits () {\n    this._depth++\n\n    const value = this._depth ? this._value + this._depth : this._value\n    const hashValue = await this._hashFn(value)\n    const buffer = new ConsumableBuffer(hashValue)\n\n    this._buffers.push(buffer)\n    this._availableBits += buffer.availableBits()\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"dfa3db37d2635266baf2ce376162cfec","cacheData":{"env":{}}}