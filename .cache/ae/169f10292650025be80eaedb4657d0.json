{"id":"rUi8","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/package.json","includedInParent":true,"mtime":1582579780394},{"name":"async/series","loc":{"line":3,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/series.js"},{"name":"./propose","loc":{"line":5,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/propose.js"},{"name":"./exchange","loc":{"line":6,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js"},{"name":"./finish","loc":{"line":7,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/finish.js"}],"generated":{"js":"\"use strict\";const e=require(\"async/series\"),r=require(\"./propose\"),s=require(\"./exchange\"),t=require(\"./finish\");module.exports=function(n,i){return e([e=>r(n,e),e=>s(n,e),e=>t(n,e)],e=>{n.cleanSecrets(),e&&(!0===e&&(e=new Error(\"Stream ended prematurely\")),n.shake.abort(e)),i(e)}),n.stream};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"series","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"require","original":{"line":3,"column":15},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":3,"column":23},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"propose","original":{"line":5,"column":6},"generated":{"line":1,"column":45}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"require","original":{"line":5,"column":16},"generated":{"line":1,"column":47}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":5,"column":24},"generated":{"line":1,"column":55}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"exchange","original":{"line":6,"column":6},"generated":{"line":1,"column":68}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"require","original":{"line":6,"column":17},"generated":{"line":1,"column":70}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":6,"column":25},"generated":{"line":1,"column":78}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"finish","original":{"line":7,"column":6},"generated":{"line":1,"column":92}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"require","original":{"line":7,"column":15},"generated":{"line":1,"column":94}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":7,"column":23},"generated":{"line":1,"column":102}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"module","original":{"line":11,"column":0},"generated":{"line":1,"column":114}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"exports","original":{"line":11,"column":7},"generated":{"line":1,"column":121}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":11,"column":17},"generated":{"line":1,"column":129}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"state","original":{"line":11,"column":37},"generated":{"line":1,"column":138}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"callback","original":{"line":11,"column":44},"generated":{"line":1,"column":140}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"state","original":{"line":30,"column":9},"generated":{"line":1,"column":143}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"series","original":{"line":12,"column":2},"generated":{"line":1,"column":150}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":12,"column":9},"generated":{"line":1,"column":152}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"cb","original":{"line":13,"column":5},"generated":{"line":1,"column":153}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"propose","original":{"line":13,"column":12},"generated":{"line":1,"column":156}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"state","original":{"line":13,"column":20},"generated":{"line":1,"column":158}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"cb","original":{"line":13,"column":27},"generated":{"line":1,"column":160}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"cb","original":{"line":14,"column":5},"generated":{"line":1,"column":163}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"exchange","original":{"line":14,"column":12},"generated":{"line":1,"column":166}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"state","original":{"line":14,"column":21},"generated":{"line":1,"column":168}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"cb","original":{"line":14,"column":28},"generated":{"line":1,"column":170}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"cb","original":{"line":15,"column":5},"generated":{"line":1,"column":173}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"finish","original":{"line":15,"column":12},"generated":{"line":1,"column":176}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"state","original":{"line":15,"column":19},"generated":{"line":1,"column":178}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"cb","original":{"line":15,"column":26},"generated":{"line":1,"column":180}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"err","original":{"line":16,"column":6},"generated":{"line":1,"column":184}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"state","original":{"line":17,"column":4},"generated":{"line":1,"column":188}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"cleanSecrets","original":{"line":17,"column":10},"generated":{"line":1,"column":190}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"err","original":{"line":19,"column":8},"generated":{"line":1,"column":205}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":20,"column":18},"generated":{"line":1,"column":210}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"err","original":{"line":20,"column":10},"generated":{"line":1,"column":214}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"err","original":{"line":21,"column":8},"generated":{"line":1,"column":218}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":21,"column":14},"generated":{"line":1,"column":220}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"Error","original":{"line":21,"column":18},"generated":{"line":1,"column":224}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","original":{"line":21,"column":24},"generated":{"line":1,"column":230}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"state","original":{"line":23,"column":6},"generated":{"line":1,"column":259}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"shake","original":{"line":23,"column":12},"generated":{"line":1,"column":261}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"abort","original":{"line":23,"column":18},"generated":{"line":1,"column":267}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"err","original":{"line":23,"column":24},"generated":{"line":1,"column":273}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"callback","original":{"line":27,"column":4},"generated":{"line":1,"column":277}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"err","original":{"line":27,"column":13},"generated":{"line":1,"column":279}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"state","original":{"line":30,"column":9},"generated":{"line":1,"column":284}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js","name":"stream","original":{"line":30,"column":15},"generated":{"line":1,"column":286}}],"sources":{"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/index.js":"'use strict'\n\nconst series = require('async/series')\n\nconst propose = require('./propose')\nconst exchange = require('./exchange')\nconst finish = require('./finish')\n\n// Performs initial communication over insecure channel to share keys, IDs,\n// and initiate communication, assigning all necessary params.\nmodule.exports = function handshake (state, callback) {\n  series([\n    (cb) => propose(state, cb),\n    (cb) => exchange(state, cb),\n    (cb) => finish(state, cb)\n  ], (err) => {\n    state.cleanSecrets()\n\n    if (err) {\n      if (err === true) {\n        err = new Error('Stream ended prematurely')\n      }\n      state.shake.abort(err)\n    }\n\n    // signal when the handshake is finished so that plumbing can happen\n    callback(err)\n  })\n\n  return state.stream\n}\n"},"lineCount":null}},"error":null,"hash":"8aea29a121839c93946ac9829dd2f1e1","cacheData":{"env":{}}}