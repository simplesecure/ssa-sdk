{"id":"yI5g","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/package.json","includedInParent":true,"mtime":1582579780394},{"name":"debug","loc":{"line":3,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"},{"name":"async/waterfall","loc":{"line":4,"column":26},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/waterfall.js"},{"name":"../support","loc":{"line":6,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/support.js"},{"name":"./crypto","loc":{"line":7,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-secio/src/handshake/crypto.js"}],"generated":{"js":"\"use strict\";const e=require(\"debug\"),r=require(\"async/waterfall\"),i=require(\"../support\"),a=require(\"./crypto\"),n=e(\"libp2p:secio\");n.error=e(\"libp2p:secio:error\"),module.exports=function(e,c){n(\"2. exchange - start\"),n(\"2. exchange - writing exchange\"),r([r=>a.createExchange(e,r),(r,a)=>{i.write(e,r),i.read(e.shake,a)},(r,i)=>{n(\"2. exchange - reading exchange\"),a.verify(e,r,i)},r=>a.generateKeys(e,r)],e=>{if(e)return c(e);n(\"2. exchange - finish\"),c()})};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"debug","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"require","original":{"line":3,"column":14},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":3,"column":22},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"waterfall","original":{"line":4,"column":6},"generated":{"line":1,"column":38}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"require","original":{"line":4,"column":18},"generated":{"line":1,"column":40}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":4,"column":26},"generated":{"line":1,"column":48}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"support","original":{"line":6,"column":6},"generated":{"line":1,"column":67}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"require","original":{"line":6,"column":16},"generated":{"line":1,"column":69}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":6,"column":24},"generated":{"line":1,"column":77}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"crypto","original":{"line":7,"column":6},"generated":{"line":1,"column":91}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"require","original":{"line":7,"column":15},"generated":{"line":1,"column":93}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":7,"column":23},"generated":{"line":1,"column":101}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"log","original":{"line":9,"column":6},"generated":{"line":1,"column":113}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"debug","original":{"line":9,"column":12},"generated":{"line":1,"column":115}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":9,"column":18},"generated":{"line":1,"column":117}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"log","original":{"line":10,"column":0},"generated":{"line":1,"column":133}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"error","original":{"line":10,"column":4},"generated":{"line":1,"column":135}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"debug","original":{"line":10,"column":12},"generated":{"line":1,"column":141}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":10,"column":18},"generated":{"line":1,"column":143}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"module","original":{"line":14,"column":0},"generated":{"line":1,"column":165}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"exports","original":{"line":14,"column":7},"generated":{"line":1,"column":172}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":14,"column":17},"generated":{"line":1,"column":180}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"state","original":{"line":14,"column":36},"generated":{"line":1,"column":189}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"callback","original":{"line":14,"column":43},"generated":{"line":1,"column":191}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"log","original":{"line":15,"column":2},"generated":{"line":1,"column":194}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":15,"column":6},"generated":{"line":1,"column":196}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"log","original":{"line":17,"column":2},"generated":{"line":1,"column":219}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":17,"column":6},"generated":{"line":1,"column":221}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"waterfall","original":{"line":18,"column":2},"generated":{"line":1,"column":255}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":18,"column":12},"generated":{"line":1,"column":257}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"cb","original":{"line":19,"column":5},"generated":{"line":1,"column":258}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"crypto","original":{"line":19,"column":12},"generated":{"line":1,"column":261}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"createExchange","original":{"line":19,"column":19},"generated":{"line":1,"column":263}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"state","original":{"line":19,"column":34},"generated":{"line":1,"column":278}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"cb","original":{"line":19,"column":41},"generated":{"line":1,"column":280}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":20,"column":4},"generated":{"line":1,"column":283}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"ex","original":{"line":20,"column":5},"generated":{"line":1,"column":284}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"cb","original":{"line":20,"column":9},"generated":{"line":1,"column":286}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"support","original":{"line":21,"column":6},"generated":{"line":1,"column":291}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"write","original":{"line":21,"column":14},"generated":{"line":1,"column":293}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"state","original":{"line":21,"column":20},"generated":{"line":1,"column":299}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"ex","original":{"line":21,"column":27},"generated":{"line":1,"column":301}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"support","original":{"line":22,"column":6},"generated":{"line":1,"column":304}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"read","original":{"line":22,"column":14},"generated":{"line":1,"column":306}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"state","original":{"line":22,"column":19},"generated":{"line":1,"column":311}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"shake","original":{"line":22,"column":25},"generated":{"line":1,"column":313}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"cb","original":{"line":22,"column":32},"generated":{"line":1,"column":319}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":24,"column":4},"generated":{"line":1,"column":323}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"msg","original":{"line":24,"column":5},"generated":{"line":1,"column":324}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"cb","original":{"line":24,"column":10},"generated":{"line":1,"column":326}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"log","original":{"line":25,"column":6},"generated":{"line":1,"column":331}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":25,"column":10},"generated":{"line":1,"column":333}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"crypto","original":{"line":26,"column":6},"generated":{"line":1,"column":367}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"verify","original":{"line":26,"column":13},"generated":{"line":1,"column":369}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"state","original":{"line":26,"column":20},"generated":{"line":1,"column":376}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"msg","original":{"line":26,"column":27},"generated":{"line":1,"column":378}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"cb","original":{"line":26,"column":32},"generated":{"line":1,"column":380}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"cb","original":{"line":28,"column":5},"generated":{"line":1,"column":384}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"crypto","original":{"line":28,"column":12},"generated":{"line":1,"column":387}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"generateKeys","original":{"line":28,"column":19},"generated":{"line":1,"column":389}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"state","original":{"line":28,"column":32},"generated":{"line":1,"column":402}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"cb","original":{"line":28,"column":39},"generated":{"line":1,"column":404}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"err","original":{"line":29,"column":6},"generated":{"line":1,"column":408}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"err","original":{"line":30,"column":8},"generated":{"line":1,"column":412}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"err","original":{"line":30,"column":8},"generated":{"line":1,"column":415}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"callback","original":{"line":30,"column":22},"generated":{"line":1,"column":417}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"callback","original":{"line":30,"column":22},"generated":{"line":1,"column":424}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"err","original":{"line":30,"column":31},"generated":{"line":1,"column":426}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"log","original":{"line":32,"column":4},"generated":{"line":1,"column":429}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","original":{"line":32,"column":8},"generated":{"line":1,"column":431}},{"source":"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js","name":"callback","original":{"line":33,"column":4},"generated":{"line":1,"column":455}}],"sources":{"node_modules/ipfs/node_modules/libp2p-secio/src/handshake/exchange.js":"'use strict'\n\nconst debug = require('debug')\nconst waterfall = require('async/waterfall')\n\nconst support = require('../support')\nconst crypto = require('./crypto')\n\nconst log = debug('libp2p:secio')\nlog.error = debug('libp2p:secio:error')\n\n// step 2. Exchange\n// -- exchange (signed) ephemeral keys. verify signatures.\nmodule.exports = function exchange (state, callback) {\n  log('2. exchange - start')\n\n  log('2. exchange - writing exchange')\n  waterfall([\n    (cb) => crypto.createExchange(state, cb),\n    (ex, cb) => {\n      support.write(state, ex)\n      support.read(state.shake, cb)\n    },\n    (msg, cb) => {\n      log('2. exchange - reading exchange')\n      crypto.verify(state, msg, cb)\n    },\n    (cb) => crypto.generateKeys(state, cb)\n  ], (err) => {\n    if (err) { return callback(err) }\n\n    log('2. exchange - finish')\n    callback()\n  })\n}\n"},"lineCount":null}},"error":null,"hash":"1f8edc963d5596ad34ff4fa6282989b7","cacheData":{"env":{}}}