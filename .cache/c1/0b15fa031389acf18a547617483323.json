{"id":"mzPG","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/package.json","includedInParent":true,"mtime":1582579780699},{"name":"buffer-split","loc":{"line":3,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/buffer-split/index.js"},{"name":"err-code","loc":{"line":4,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/err-code/index.js"},{"name":"./validators","loc":{"line":37,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validators/index.js"},{"name":"buffer","parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/node-libs-browser/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar r=require(\"buffer\").Buffer;const e=require(\"buffer-split\"),o=require(\"err-code\"),t=(t,i,u)=>{const f=i.key,n=e(f,r.from(\"/\"));if(n.length<3)return u();const a=t[n[1].toString()];if(!a){return u(o(new Error(\"Invalid record keytype\"),\"ERR_INVALID_RECORD_KEY_TYPE\"))}a.func(f,i.value,u)};module.exports={verifyRecord:t,validators:require(\"./validators\")};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":24}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":3,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"bsplit","original":{"line":3,"column":6},"generated":{"line":2,"column":37}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"require","original":{"line":3,"column":15},"generated":{"line":2,"column":39}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":3,"column":23},"generated":{"line":2,"column":47}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"errcode","original":{"line":4,"column":6},"generated":{"line":2,"column":63}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"require","original":{"line":4,"column":16},"generated":{"line":2,"column":65}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":4,"column":24},"generated":{"line":2,"column":73}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"verifyRecord","original":{"line":15,"column":6},"generated":{"line":2,"column":85}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":15,"column":21},"generated":{"line":2,"column":87}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"validators","original":{"line":15,"column":22},"generated":{"line":2,"column":88}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"record","original":{"line":15,"column":34},"generated":{"line":2,"column":90}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"callback","original":{"line":15,"column":42},"generated":{"line":2,"column":92}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":16,"column":8},"generated":{"line":2,"column":97}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":16,"column":8},"generated":{"line":2,"column":103}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"record","original":{"line":16,"column":14},"generated":{"line":2,"column":105}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":16,"column":21},"generated":{"line":2,"column":107}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"parts","original":{"line":17,"column":8},"generated":{"line":2,"column":111}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"bsplit","original":{"line":17,"column":16},"generated":{"line":2,"column":113}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":17,"column":23},"generated":{"line":2,"column":115}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"Buffer","original":{"line":17,"column":28},"generated":{"line":2,"column":117}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"from","original":{"line":17,"column":35},"generated":{"line":2,"column":119}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":17,"column":40},"generated":{"line":2,"column":124}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"parts","original":{"line":19,"column":6},"generated":{"line":2,"column":130}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"parts","original":{"line":19,"column":6},"generated":{"line":2,"column":133}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"length","original":{"line":19,"column":12},"generated":{"line":2,"column":135}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":19,"column":21},"generated":{"line":2,"column":142}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"callback","original":{"line":21,"column":11},"generated":{"line":2,"column":144}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"callback","original":{"line":21,"column":11},"generated":{"line":2,"column":151}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":24,"column":8},"generated":{"line":2,"column":155}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":24,"column":8},"generated":{"line":2,"column":161}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"validators","original":{"line":24,"column":20},"generated":{"line":2,"column":163}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"parts","original":{"line":24,"column":31},"generated":{"line":2,"column":165}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":24,"column":37},"generated":{"line":2,"column":167}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"toString","original":{"line":24,"column":40},"generated":{"line":2,"column":170}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":26,"column":6},"generated":{"line":2,"column":182}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":26,"column":7},"generated":{"line":2,"column":186}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":26,"column":18},"generated":{"line":2,"column":188}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"callback","original":{"line":29,"column":11},"generated":{"line":2,"column":189}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"callback","original":{"line":29,"column":11},"generated":{"line":2,"column":196}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"errcode","original":{"line":29,"column":20},"generated":{"line":2,"column":198}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":29,"column":28},"generated":{"line":2,"column":200}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"Error","original":{"line":29,"column":32},"generated":{"line":2,"column":204}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":27,"column":20},"generated":{"line":2,"column":210}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":29,"column":47},"generated":{"line":2,"column":236}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":32,"column":2},"generated":{"line":2,"column":268}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"func","original":{"line":32,"column":12},"generated":{"line":2,"column":270}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":32,"column":17},"generated":{"line":2,"column":275}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"record","original":{"line":32,"column":22},"generated":{"line":2,"column":277}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"value","original":{"line":32,"column":29},"generated":{"line":2,"column":279}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"callback","original":{"line":32,"column":36},"generated":{"line":2,"column":285}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"module","original":{"line":35,"column":0},"generated":{"line":2,"column":289}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"exports","original":{"line":35,"column":7},"generated":{"line":2,"column":296}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":17},"generated":{"line":2,"column":304}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"verifyRecord","original":{"line":36,"column":2},"generated":{"line":2,"column":305}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"verifyRecord","original":{"line":36,"column":16},"generated":{"line":2,"column":318}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"validators","original":{"line":37,"column":2},"generated":{"line":2,"column":320}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","name":"require","original":{"line":37,"column":14},"generated":{"line":2,"column":331}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js","original":{"line":37,"column":22},"generated":{"line":2,"column":339}}],"sources":{"node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js":"'use strict'\n\nconst bsplit = require('buffer-split')\nconst errcode = require('err-code')\n\n/**\n * Checks a record and ensures it is still valid.\n * It runs the needed validators.\n *\n * @param {Object} validators\n * @param {Record} record\n * @param {function(Error)} callback\n * @returns {undefined}\n */\nconst verifyRecord = (validators, record, callback) => {\n  const key = record.key\n  const parts = bsplit(key, Buffer.from('/'))\n\n  if (parts.length < 3) {\n    // No validator available\n    return callback()\n  }\n\n  const validator = validators[parts[1].toString()]\n\n  if (!validator) {\n    const errMsg = `Invalid record keytype`\n\n    return callback(errcode(new Error(errMsg), 'ERR_INVALID_RECORD_KEY_TYPE'))\n  }\n\n  validator.func(key, record.value, callback)\n}\n\nmodule.exports = {\n  verifyRecord: verifyRecord,\n  validators: require('./validators')\n}\n"},"lineCount":null}},"error":null,"hash":"9571254642de282be9a0868b3dae01c3","cacheData":{"env":{}}}