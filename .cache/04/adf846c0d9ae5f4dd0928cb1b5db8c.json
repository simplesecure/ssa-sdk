{"id":"mBaQ","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-record/package.json","includedInParent":true,"mtime":1582579780694},{"name":"buffer-split","loc":{"line":3,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-record/src/validator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/buffer-split/index.js"},{"name":"err-code","loc":{"line":4,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-record/src/validator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-record/node_modules/err-code/index.js"},{"name":"./validators","loc":{"line":37,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-record/src/validator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-record/src/validators/index.js"},{"name":"buffer","parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-record/src/validator.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/node-libs-browser/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar r=require(\"buffer\").Buffer;const e=require(\"buffer-split\"),t=require(\"err-code\"),o=(o,i)=>{const u=i.key,f=e(u,r.from(\"/\"));if(f.length<3)return;const n=o[f[1].toString()];if(!n){throw t(\"Invalid record keytype\",\"ERR_INVALID_RECORD_KEY_TYPE\")}return n.func(u,i.value)};module.exports={verifyRecord:o,validators:require(\"./validators\")};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":0},"generated":{"line":2,"column":24}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":3,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"bsplit","original":{"line":3,"column":6},"generated":{"line":2,"column":37}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"require","original":{"line":3,"column":15},"generated":{"line":2,"column":39}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":3,"column":23},"generated":{"line":2,"column":47}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"errcode","original":{"line":4,"column":6},"generated":{"line":2,"column":63}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"require","original":{"line":4,"column":16},"generated":{"line":2,"column":65}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":4,"column":24},"generated":{"line":2,"column":73}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"verifyRecord","original":{"line":15,"column":6},"generated":{"line":2,"column":85}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":15,"column":21},"generated":{"line":2,"column":87}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"validators","original":{"line":15,"column":22},"generated":{"line":2,"column":88}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"record","original":{"line":15,"column":34},"generated":{"line":2,"column":90}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":16,"column":8},"generated":{"line":2,"column":95}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":16,"column":8},"generated":{"line":2,"column":101}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"record","original":{"line":16,"column":14},"generated":{"line":2,"column":103}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":16,"column":21},"generated":{"line":2,"column":105}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"parts","original":{"line":17,"column":8},"generated":{"line":2,"column":109}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"bsplit","original":{"line":17,"column":16},"generated":{"line":2,"column":111}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":17,"column":23},"generated":{"line":2,"column":113}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"Buffer","original":{"line":17,"column":28},"generated":{"line":2,"column":115}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"from","original":{"line":17,"column":35},"generated":{"line":2,"column":117}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":17,"column":40},"generated":{"line":2,"column":122}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"parts","original":{"line":19,"column":6},"generated":{"line":2,"column":128}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"parts","original":{"line":19,"column":6},"generated":{"line":2,"column":131}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"length","original":{"line":19,"column":12},"generated":{"line":2,"column":133}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":19,"column":21},"generated":{"line":2,"column":140}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":21,"column":4},"generated":{"line":2,"column":142}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":24,"column":8},"generated":{"line":2,"column":149}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":24,"column":8},"generated":{"line":2,"column":155}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"validators","original":{"line":24,"column":20},"generated":{"line":2,"column":157}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"parts","original":{"line":24,"column":31},"generated":{"line":2,"column":159}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":24,"column":37},"generated":{"line":2,"column":161}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"toString","original":{"line":24,"column":40},"generated":{"line":2,"column":164}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":26,"column":6},"generated":{"line":2,"column":176}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":26,"column":7},"generated":{"line":2,"column":180}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":26,"column":18},"generated":{"line":2,"column":182}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"errcode","original":{"line":29,"column":10},"generated":{"line":2,"column":183}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"errcode","original":{"line":29,"column":10},"generated":{"line":2,"column":189}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":27,"column":20},"generated":{"line":2,"column":191}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":29,"column":26},"generated":{"line":2,"column":216}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":32,"column":9},"generated":{"line":2,"column":247}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"validator","original":{"line":32,"column":9},"generated":{"line":2,"column":254}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"func","original":{"line":32,"column":19},"generated":{"line":2,"column":256}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"key","original":{"line":32,"column":24},"generated":{"line":2,"column":261}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"record","original":{"line":32,"column":29},"generated":{"line":2,"column":263}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"value","original":{"line":32,"column":36},"generated":{"line":2,"column":265}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"module","original":{"line":35,"column":0},"generated":{"line":2,"column":273}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"exports","original":{"line":35,"column":7},"generated":{"line":2,"column":280}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":35,"column":17},"generated":{"line":2,"column":288}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"verifyRecord","original":{"line":36,"column":2},"generated":{"line":2,"column":289}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"verifyRecord","original":{"line":36,"column":16},"generated":{"line":2,"column":302}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"validators","original":{"line":37,"column":2},"generated":{"line":2,"column":304}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","name":"require","original":{"line":37,"column":14},"generated":{"line":2,"column":315}},{"source":"node_modules/ipfs/node_modules/libp2p-record/src/validator.js","original":{"line":37,"column":22},"generated":{"line":2,"column":323}}],"sources":{"node_modules/ipfs/node_modules/libp2p-record/src/validator.js":"'use strict'\n\nconst bsplit = require('buffer-split')\nconst errcode = require('err-code')\n\n/**\n * Checks a record and ensures it is still valid.\n * It runs the needed validators.\n * If verification fails the returned Promise will reject with the error.\n *\n * @param {Object} validators\n * @param {Record} record\n * @returns {Promise}\n */\nconst verifyRecord = (validators, record) => {\n  const key = record.key\n  const parts = bsplit(key, Buffer.from('/'))\n\n  if (parts.length < 3) {\n    // No validator available\n    return\n  }\n\n  const validator = validators[parts[1].toString()]\n\n  if (!validator) {\n    const errMsg = `Invalid record keytype`\n\n    throw errcode(errMsg, 'ERR_INVALID_RECORD_KEY_TYPE')\n  }\n\n  return validator.func(key, record.value)\n}\n\nmodule.exports = {\n  verifyRecord: verifyRecord,\n  validators: require('./validators')\n}\n"},"lineCount":null}},"error":null,"hash":"83dd06dfb389fb85588a5867f0799678","cacheData":{"env":{}}}