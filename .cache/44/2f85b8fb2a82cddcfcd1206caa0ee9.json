{"id":"UjQk","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/package.json","includedInParent":true,"mtime":1582579779537},{"name":"../errors","loc":{"line":3,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/src/errors.js"},{"name":"./init","loc":{"line":4,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/init.js"},{"name":"datastore-fs","loc":{"line":5,"column":26},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/node_modules/datastore-level/src/index.js"},{"name":"interface-datastore","loc":{"line":7,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/interface-datastore/src/index.js"},{"name":"buffer","parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/node-libs-browser/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar e=require(\"buffer\").Buffer;const i=require(\"../errors\"),t=require(\"./init\"),n=require(\"datastore-fs\"),r=require(\"interface-datastore\").Key,a=new r(\"version\");async function o(e){if(!(await t.isRepoInitialized(e)))throw new i.NotInitializedRepoError(`Repo in path ${e} is not initialized!`);const r=new n(e,{extension:\"\",createIfMissing:!1});await r.open();const o=parseInt(await r.get(a));return await r.close(),o}async function s(i,t){const r=new n(i,{extension:\"\",createIfMissing:!1});await r.open(),await r.put(a,e.from(String(t))),await r.close()}exports.getVersion=o,exports.setVersion=s;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":49,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":49,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":49,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":49,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":49,"column":0},"generated":{"line":2,"column":24}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":3,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"errors","original":{"line":3,"column":6},"generated":{"line":2,"column":37}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"require","original":{"line":3,"column":15},"generated":{"line":2,"column":39}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":3,"column":23},"generated":{"line":2,"column":47}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"repoInit","original":{"line":4,"column":6},"generated":{"line":2,"column":60}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"require","original":{"line":4,"column":17},"generated":{"line":2,"column":62}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":4,"column":25},"generated":{"line":2,"column":70}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"Datastore","original":{"line":5,"column":6},"generated":{"line":2,"column":80}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"require","original":{"line":5,"column":18},"generated":{"line":2,"column":82}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":5,"column":26},"generated":{"line":2,"column":90}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"Key","original":{"line":7,"column":6},"generated":{"line":2,"column":106}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"require","original":{"line":7,"column":12},"generated":{"line":2,"column":108}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":7,"column":20},"generated":{"line":2,"column":116}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"Key","original":{"line":7,"column":43},"generated":{"line":2,"column":139}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"versionKey","original":{"line":9,"column":6},"generated":{"line":2,"column":143}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":9,"column":19},"generated":{"line":2,"column":145}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"Key","original":{"line":9,"column":23},"generated":{"line":2,"column":149}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":9,"column":27},"generated":{"line":2,"column":151}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":21,"column":0},"generated":{"line":2,"column":162}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"getVersion","original":{"line":21,"column":15},"generated":{"line":2,"column":177}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"path","original":{"line":21,"column":27},"generated":{"line":2,"column":179}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":22,"column":6},"generated":{"line":2,"column":182}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"repoInit","original":{"line":22,"column":14},"generated":{"line":2,"column":193}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"isRepoInitialized","original":{"line":22,"column":23},"generated":{"line":2,"column":195}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"path","original":{"line":22,"column":41},"generated":{"line":2,"column":213}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":23,"column":10},"generated":{"line":2,"column":217}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":23,"column":10},"generated":{"line":2,"column":223}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"errors","original":{"line":23,"column":14},"generated":{"line":2,"column":227}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"NotInitializedRepoError","original":{"line":23,"column":21},"generated":{"line":2,"column":229}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"path","original":{"line":23,"column":61},"generated":{"line":2,"column":269}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":26,"column":8},"generated":{"line":2,"column":294}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":26,"column":8},"generated":{"line":2,"column":300}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":26,"column":16},"generated":{"line":2,"column":302}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"Datastore","original":{"line":26,"column":20},"generated":{"line":2,"column":306}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"path","original":{"line":26,"column":30},"generated":{"line":2,"column":308}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":26,"column":36},"generated":{"line":2,"column":310}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"extension","original":{"line":26,"column":38},"generated":{"line":2,"column":311}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":26,"column":49},"generated":{"line":2,"column":321}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"createIfMissing","original":{"line":26,"column":53},"generated":{"line":2,"column":324}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":26,"column":70},"generated":{"line":2,"column":341}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":27,"column":8},"generated":{"line":2,"column":351}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"open","original":{"line":27,"column":14},"generated":{"line":2,"column":353}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"version","original":{"line":29,"column":8},"generated":{"line":2,"column":360}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"version","original":{"line":29,"column":8},"generated":{"line":2,"column":366}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"parseInt","original":{"line":29,"column":18},"generated":{"line":2,"column":368}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":29,"column":33},"generated":{"line":2,"column":383}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"get","original":{"line":29,"column":39},"generated":{"line":2,"column":385}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"versionKey","original":{"line":29,"column":43},"generated":{"line":2,"column":389}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"version","original":{"line":32,"column":9},"generated":{"line":2,"column":393}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":30,"column":8},"generated":{"line":2,"column":406}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"close","original":{"line":30,"column":14},"generated":{"line":2,"column":408}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"version","original":{"line":32,"column":9},"generated":{"line":2,"column":416}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":42,"column":0},"generated":{"line":2,"column":418}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"setVersion","original":{"line":42,"column":15},"generated":{"line":2,"column":433}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"path","original":{"line":42,"column":27},"generated":{"line":2,"column":435}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"version","original":{"line":42,"column":33},"generated":{"line":2,"column":437}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":43,"column":8},"generated":{"line":2,"column":440}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":43,"column":8},"generated":{"line":2,"column":446}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":43,"column":16},"generated":{"line":2,"column":448}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"Datastore","original":{"line":43,"column":20},"generated":{"line":2,"column":452}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"path","original":{"line":43,"column":30},"generated":{"line":2,"column":454}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":43,"column":36},"generated":{"line":2,"column":456}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"extension","original":{"line":43,"column":38},"generated":{"line":2,"column":457}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":43,"column":49},"generated":{"line":2,"column":467}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"createIfMissing","original":{"line":43,"column":53},"generated":{"line":2,"column":470}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","original":{"line":43,"column":70},"generated":{"line":2,"column":487}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":44,"column":8},"generated":{"line":2,"column":497}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"open","original":{"line":44,"column":14},"generated":{"line":2,"column":499}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":45,"column":8},"generated":{"line":2,"column":512}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"put","original":{"line":45,"column":14},"generated":{"line":2,"column":514}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"versionKey","original":{"line":45,"column":18},"generated":{"line":2,"column":518}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"Buffer","original":{"line":45,"column":30},"generated":{"line":2,"column":520}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"from","original":{"line":45,"column":37},"generated":{"line":2,"column":522}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"String","original":{"line":45,"column":42},"generated":{"line":2,"column":527}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"version","original":{"line":45,"column":49},"generated":{"line":2,"column":534}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"store","original":{"line":46,"column":8},"generated":{"line":2,"column":545}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"close","original":{"line":46,"column":14},"generated":{"line":2,"column":547}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"exports","original":{"line":11,"column":0},"generated":{"line":2,"column":555}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"getVersion","original":{"line":11,"column":8},"generated":{"line":2,"column":563}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"getVersion","original":{"line":11,"column":21},"generated":{"line":2,"column":574}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"exports","original":{"line":49,"column":0},"generated":{"line":2,"column":576}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"setVersion","original":{"line":49,"column":8},"generated":{"line":2,"column":584}},{"source":"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js","name":"setVersion","original":{"line":49,"column":21},"generated":{"line":2,"column":595}}],"sources":{"node_modules/ipfs/node_modules/ipfs-repo-migrations/src/repo/version.js":"'use strict'\n\nconst errors = require('../errors')\nconst repoInit = require('./init')\nconst Datastore = require('datastore-fs')\n\nconst Key = require('interface-datastore').Key\n\nconst versionKey = new Key('version')\n\nexports.getVersion = getVersion\n\n/**\n * Function that has responsibility to retrieve version of repo from its root datastore's instance.\n * This function needs to be cross-repo-version functional to be able to fetch any version number,\n * even in case of change of repo's versioning.\n *\n * @param {string} path\n * @returns {Promise<int>}\n */\nasync function getVersion (path) {\n  if (!(await repoInit.isRepoInitialized(path))) {\n    throw new errors.NotInitializedRepoError(`Repo in path ${path} is not initialized!`)\n  }\n\n  const store = new Datastore(path, { extension: '', createIfMissing: false })\n  await store.open()\n\n  const version = parseInt(await store.get(versionKey))\n  await store.close()\n\n  return version\n}\n\n/**\n * Function for setting a version in cross-repo-version manner.\n *\n * @param {string} path\n * @param {int} version\n * @returns {Promise<void>}\n */\nasync function setVersion (path, version) {\n  const store = new Datastore(path, { extension: '', createIfMissing: false })\n  await store.open()\n  await store.put(versionKey, Buffer.from(String(version)))\n  await store.close()\n}\n\nexports.setVersion = setVersion\n"},"lineCount":null}},"error":null,"hash":"58fa573774e4ab8b5d1f7b5f3b0e0f36","cacheData":{"env":{}}}