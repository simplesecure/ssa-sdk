{"id":"cJtu","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/package.json","includedInParent":true,"mtime":1582579778668},{"name":"callbackify","loc":{"line":3,"column":28},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/callbackify/index.js"},{"name":"bignumber.js","loc":{"line":4,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/bignumber.js/bignumber.js"},{"name":"pull-pushable","loc":{"line":5,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-pushable/index.js"},{"name":"human-to-milliseconds","loc":{"line":6,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/human-to-milliseconds/src/index.js"},{"name":"pull-stream-to-stream","loc":{"line":7,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-stream-to-stream/index.js"},{"name":"err-code","loc":{"line":8,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/err-code/index.js"},{"name":"./bitswap","loc":{"line":74,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/bitswap.js"},{"name":"./repo","loc":{"line":75,"column":18},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/repo.js"},{"name":"process","parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/components/stats.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/process/browser.js"}],"generated":{"js":"var process = require(\"process\");\nvar e=require(\"process\");const t=require(\"callbackify\"),r=require(\"bignumber.js\"),a=require(\"pull-pushable\"),n=require(\"human-to-milliseconds\"),o=require(\"pull-stream-to-stream\"),l=require(\"err-code\");function s(e,t){let a;if(!(a=t.peer?e.libp2p.stats.forPeer(t.peer):t.proto?e.libp2p.stats.forProtocol(t.proto):e.libp2p.stats.global))return{totalIn:new r(0),totalOut:new r(0),rateIn:new r(0),rateOut:new r(0)};const n=a.snapshot,o=a.movingAverages;return{totalIn:n.dataReceived,totalOut:n.dataSent,rateIn:new r(o.dataReceived[6e4].movingAverage()/60),rateOut:new r(o.dataSent[6e4].movingAverage()/60)}}module.exports=function(r){const i=t=>{t=t||{};let o=null;const i=a(!0,()=>{o&&clearInterval(o)});if(t.poll){let a;try{a=n(t.interval||\"1s\")}catch(u){e.nextTick(()=>{i.end(l(u,\"ERR_INVALID_POLL_INTERVAL\"))})}o=setInterval(()=>{i.push(s(r,t))},a)}else i.push(s(r,t)),i.end();return i.source};return{bitswap:require(\"./bitswap\")(r).stat,repo:require(\"./repo\")(r).stat,bw:t.variadic(async e=>s(r,e=e||{})),bwReadableStream:e=>o.source(i(e)),bwPullStream:i}};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":41,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":41,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":41,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":41,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":3,"column":0},"generated":{"line":2,"column":25}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"callbackify","original":{"line":3,"column":6},"generated":{"line":2,"column":31}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":3,"column":20},"generated":{"line":2,"column":33}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":3,"column":28},"generated":{"line":2,"column":41}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Big","original":{"line":4,"column":6},"generated":{"line":2,"column":56}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":4,"column":12},"generated":{"line":2,"column":58}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":4,"column":20},"generated":{"line":2,"column":66}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Pushable","original":{"line":5,"column":6},"generated":{"line":2,"column":82}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":5,"column":17},"generated":{"line":2,"column":84}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":5,"column":25},"generated":{"line":2,"column":92}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"human","original":{"line":6,"column":6},"generated":{"line":2,"column":109}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":6,"column":14},"generated":{"line":2,"column":111}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":6,"column":22},"generated":{"line":2,"column":119}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"toStream","original":{"line":7,"column":6},"generated":{"line":2,"column":144}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":7,"column":17},"generated":{"line":2,"column":146}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":7,"column":25},"generated":{"line":2,"column":154}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"errCode","original":{"line":8,"column":6},"generated":{"line":2,"column":179}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":8,"column":16},"generated":{"line":2,"column":181}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":8,"column":24},"generated":{"line":2,"column":189}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":10,"column":0},"generated":{"line":2,"column":201}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"bandwidthStats","original":{"line":10,"column":9},"generated":{"line":2,"column":210}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":10,"column":25},"generated":{"line":2,"column":212}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":10,"column":31},"generated":{"line":2,"column":214}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stats","original":{"line":11,"column":6},"generated":{"line":2,"column":217}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stats","original":{"line":11,"column":6},"generated":{"line":2,"column":221}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":21,"column":6},"generated":{"line":2,"column":223}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stats","original":{"line":14,"column":4},"generated":{"line":2,"column":228}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":13,"column":6},"generated":{"line":2,"column":230}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"peer","original":{"line":13,"column":11},"generated":{"line":2,"column":232}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":14,"column":12},"generated":{"line":2,"column":237}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"libp2p","original":{"line":14,"column":17},"generated":{"line":2,"column":239}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stats","original":{"line":14,"column":24},"generated":{"line":2,"column":246}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"forPeer","original":{"line":14,"column":30},"generated":{"line":2,"column":252}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":14,"column":38},"generated":{"line":2,"column":260}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"peer","original":{"line":14,"column":43},"generated":{"line":2,"column":262}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":15,"column":13},"generated":{"line":2,"column":268}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"proto","original":{"line":15,"column":18},"generated":{"line":2,"column":270}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":16,"column":12},"generated":{"line":2,"column":276}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"libp2p","original":{"line":16,"column":17},"generated":{"line":2,"column":278}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stats","original":{"line":16,"column":24},"generated":{"line":2,"column":285}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"forProtocol","original":{"line":16,"column":30},"generated":{"line":2,"column":291}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":16,"column":42},"generated":{"line":2,"column":303}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"proto","original":{"line":16,"column":47},"generated":{"line":2,"column":305}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":18,"column":12},"generated":{"line":2,"column":312}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"libp2p","original":{"line":18,"column":17},"generated":{"line":2,"column":314}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stats","original":{"line":18,"column":24},"generated":{"line":2,"column":321}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"global","original":{"line":18,"column":30},"generated":{"line":2,"column":327}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":22,"column":11},"generated":{"line":2,"column":335}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":22,"column":11},"generated":{"line":2,"column":341}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"totalIn","original":{"line":23,"column":6},"generated":{"line":2,"column":342}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":23,"column":15},"generated":{"line":2,"column":350}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Big","original":{"line":23,"column":19},"generated":{"line":2,"column":354}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":23,"column":23},"generated":{"line":2,"column":356}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"totalOut","original":{"line":24,"column":6},"generated":{"line":2,"column":359}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":24,"column":16},"generated":{"line":2,"column":368}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Big","original":{"line":24,"column":20},"generated":{"line":2,"column":372}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":24,"column":24},"generated":{"line":2,"column":374}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"rateIn","original":{"line":25,"column":6},"generated":{"line":2,"column":377}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":25,"column":14},"generated":{"line":2,"column":384}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Big","original":{"line":25,"column":18},"generated":{"line":2,"column":388}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":25,"column":22},"generated":{"line":2,"column":390}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"rateOut","original":{"line":26,"column":6},"generated":{"line":2,"column":393}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":26,"column":15},"generated":{"line":2,"column":401}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Big","original":{"line":26,"column":19},"generated":{"line":2,"column":405}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":26,"column":23},"generated":{"line":2,"column":407}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"snapshot","original":{"line":30,"column":8},"generated":{"line":2,"column":411}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"snapshot","original":{"line":30,"column":8},"generated":{"line":2,"column":417}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stats","original":{"line":30,"column":19},"generated":{"line":2,"column":419}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"snapshot","original":{"line":30,"column":25},"generated":{"line":2,"column":421}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"movingAverages","original":{"line":31,"column":8},"generated":{"line":2,"column":430}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stats","original":{"line":31,"column":25},"generated":{"line":2,"column":432}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"movingAverages","original":{"line":31,"column":31},"generated":{"line":2,"column":434}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":33,"column":9},"generated":{"line":2,"column":449}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":33,"column":9},"generated":{"line":2,"column":455}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"totalIn","original":{"line":34,"column":4},"generated":{"line":2,"column":456}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"snapshot","original":{"line":34,"column":13},"generated":{"line":2,"column":464}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"dataReceived","original":{"line":34,"column":22},"generated":{"line":2,"column":466}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"totalOut","original":{"line":35,"column":4},"generated":{"line":2,"column":479}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"snapshot","original":{"line":35,"column":14},"generated":{"line":2,"column":488}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"dataSent","original":{"line":35,"column":23},"generated":{"line":2,"column":490}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"rateIn","original":{"line":36,"column":4},"generated":{"line":2,"column":499}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":36,"column":12},"generated":{"line":2,"column":506}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Big","original":{"line":36,"column":16},"generated":{"line":2,"column":510}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"movingAverages","original":{"line":36,"column":20},"generated":{"line":2,"column":512}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"dataReceived","original":{"line":36,"column":35},"generated":{"line":2,"column":514}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":36,"column":48},"generated":{"line":2,"column":527}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"movingAverage","original":{"line":36,"column":57},"generated":{"line":2,"column":532}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":36,"column":75},"generated":{"line":2,"column":548}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"rateOut","original":{"line":37,"column":4},"generated":{"line":2,"column":552}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":37,"column":13},"generated":{"line":2,"column":560}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Big","original":{"line":37,"column":17},"generated":{"line":2,"column":564}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"movingAverages","original":{"line":37,"column":21},"generated":{"line":2,"column":566}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"dataSent","original":{"line":37,"column":36},"generated":{"line":2,"column":568}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":37,"column":45},"generated":{"line":2,"column":577}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"movingAverage","original":{"line":37,"column":54},"generated":{"line":2,"column":582}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":37,"column":72},"generated":{"line":2,"column":598}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"module","original":{"line":41,"column":0},"generated":{"line":2,"column":603}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"exports","original":{"line":41,"column":7},"generated":{"line":2,"column":610}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":41,"column":17},"generated":{"line":2,"column":618}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":41,"column":33},"generated":{"line":2,"column":627}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"_bwPullStream","original":{"line":42,"column":8},"generated":{"line":2,"column":630}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"_bwPullStream","original":{"line":42,"column":8},"generated":{"line":2,"column":636}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":42,"column":25},"generated":{"line":2,"column":638}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":43,"column":4},"generated":{"line":2,"column":642}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":43,"column":11},"generated":{"line":2,"column":644}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":43,"column":19},"generated":{"line":2,"column":647}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"interval","original":{"line":44,"column":8},"generated":{"line":2,"column":650}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"interval","original":{"line":44,"column":8},"generated":{"line":2,"column":654}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":44,"column":19},"generated":{"line":2,"column":656}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stream","original":{"line":45,"column":10},"generated":{"line":2,"column":661}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stream","original":{"line":45,"column":10},"generated":{"line":2,"column":667}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"Pushable","original":{"line":45,"column":19},"generated":{"line":2,"column":669}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":45,"column":28},"generated":{"line":2,"column":672}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":45,"column":34},"generated":{"line":2,"column":674}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"interval","original":{"line":46,"column":10},"generated":{"line":2,"column":679}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"clearInterval","original":{"line":47,"column":8},"generated":{"line":2,"column":682}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"interval","original":{"line":47,"column":22},"generated":{"line":2,"column":696}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":51,"column":8},"generated":{"line":2,"column":701}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":51,"column":8},"generated":{"line":2,"column":704}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"poll","original":{"line":51,"column":13},"generated":{"line":2,"column":706}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":51,"column":19},"generated":{"line":2,"column":711}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"value","original":{"line":52,"column":10},"generated":{"line":2,"column":712}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"value","original":{"line":52,"column":10},"generated":{"line":2,"column":716}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":53,"column":10},"generated":{"line":2,"column":718}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"value","original":{"line":54,"column":8},"generated":{"line":2,"column":722}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"human","original":{"line":54,"column":16},"generated":{"line":2,"column":724}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":54,"column":22},"generated":{"line":2,"column":726}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"interval","original":{"line":54,"column":27},"generated":{"line":2,"column":728}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":54,"column":39},"generated":{"line":2,"column":738}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":55,"column":8},"generated":{"line":2,"column":744}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"err","original":{"line":55,"column":15},"generated":{"line":2,"column":750}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"process","original":{"line":57,"column":8},"generated":{"line":2,"column":753}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"nextTick","original":{"line":57,"column":16},"generated":{"line":2,"column":755}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":57,"column":25},"generated":{"line":2,"column":764}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stream","original":{"line":58,"column":10},"generated":{"line":2,"column":769}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"end","original":{"line":58,"column":17},"generated":{"line":2,"column":771}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"errCode","original":{"line":58,"column":21},"generated":{"line":2,"column":775}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"err","original":{"line":58,"column":29},"generated":{"line":2,"column":777}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":58,"column":34},"generated":{"line":2,"column":779}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"interval","original":{"line":62,"column":6},"generated":{"line":2,"column":811}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"setInterval","original":{"line":62,"column":17},"generated":{"line":2,"column":813}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":62,"column":29},"generated":{"line":2,"column":825}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stream","original":{"line":63,"column":8},"generated":{"line":2,"column":830}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"push","original":{"line":63,"column":15},"generated":{"line":2,"column":832}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"bandwidthStats","original":{"line":63,"column":20},"generated":{"line":2,"column":837}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":63,"column":35},"generated":{"line":2,"column":839}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":63,"column":41},"generated":{"line":2,"column":841}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"value","original":{"line":64,"column":9},"generated":{"line":2,"column":846}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stream","original":{"line":66,"column":6},"generated":{"line":2,"column":854}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"push","original":{"line":66,"column":13},"generated":{"line":2,"column":856}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"bandwidthStats","original":{"line":66,"column":18},"generated":{"line":2,"column":861}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":66,"column":33},"generated":{"line":2,"column":863}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":66,"column":39},"generated":{"line":2,"column":865}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stream","original":{"line":67,"column":6},"generated":{"line":2,"column":869}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"end","original":{"line":67,"column":13},"generated":{"line":2,"column":871}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stream","original":{"line":70,"column":11},"generated":{"line":2,"column":877}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stream","original":{"line":70,"column":11},"generated":{"line":2,"column":884}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"source","original":{"line":70,"column":18},"generated":{"line":2,"column":886}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":73,"column":9},"generated":{"line":2,"column":894}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":73,"column":9},"generated":{"line":2,"column":900}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"bitswap","original":{"line":74,"column":4},"generated":{"line":2,"column":901}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":74,"column":13},"generated":{"line":2,"column":909}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":74,"column":21},"generated":{"line":2,"column":917}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":74,"column":13},"generated":{"line":2,"column":929}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":74,"column":34},"generated":{"line":2,"column":930}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stat","original":{"line":74,"column":40},"generated":{"line":2,"column":933}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"repo","original":{"line":75,"column":4},"generated":{"line":2,"column":938}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":75,"column":10},"generated":{"line":2,"column":943}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":75,"column":18},"generated":{"line":2,"column":951}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"require","original":{"line":75,"column":10},"generated":{"line":2,"column":960}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":75,"column":28},"generated":{"line":2,"column":961}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"stat","original":{"line":75,"column":34},"generated":{"line":2,"column":964}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"bw","original":{"line":76,"column":4},"generated":{"line":2,"column":969}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"callbackify","original":{"line":76,"column":8},"generated":{"line":2,"column":972}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"variadic","original":{"line":76,"column":20},"generated":{"line":2,"column":974}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":76,"column":29},"generated":{"line":2,"column":983}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":76,"column":29},"generated":{"line":2,"column":989}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"bandwidthStats","original":{"line":78,"column":13},"generated":{"line":2,"column":992}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"self","original":{"line":78,"column":28},"generated":{"line":2,"column":994}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":77,"column":6},"generated":{"line":2,"column":996}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":77,"column":13},"generated":{"line":2,"column":998}},{"source":"node_modules/ipfs/src/core/components/stats.js","original":{"line":77,"column":21},"generated":{"line":2,"column":1001}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"bwReadableStream","original":{"line":80,"column":4},"generated":{"line":2,"column":1006}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":80,"column":23},"generated":{"line":2,"column":1023}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"toStream","original":{"line":80,"column":32},"generated":{"line":2,"column":1026}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"source","original":{"line":80,"column":41},"generated":{"line":2,"column":1028}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"_bwPullStream","original":{"line":80,"column":48},"generated":{"line":2,"column":1035}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"opts","original":{"line":80,"column":62},"generated":{"line":2,"column":1037}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"bwPullStream","original":{"line":81,"column":4},"generated":{"line":2,"column":1041}},{"source":"node_modules/ipfs/src/core/components/stats.js","name":"_bwPullStream","original":{"line":81,"column":18},"generated":{"line":2,"column":1054}}],"sources":{"node_modules/ipfs/src/core/components/stats.js":"'use strict'\n\nconst callbackify = require('callbackify')\nconst Big = require('bignumber.js')\nconst Pushable = require('pull-pushable')\nconst human = require('human-to-milliseconds')\nconst toStream = require('pull-stream-to-stream')\nconst errCode = require('err-code')\n\nfunction bandwidthStats (self, opts) {\n  let stats\n\n  if (opts.peer) {\n    stats = self.libp2p.stats.forPeer(opts.peer)\n  } else if (opts.proto) {\n    stats = self.libp2p.stats.forProtocol(opts.proto)\n  } else {\n    stats = self.libp2p.stats.global\n  }\n\n  if (!stats) {\n    return {\n      totalIn: new Big(0),\n      totalOut: new Big(0),\n      rateIn: new Big(0),\n      rateOut: new Big(0)\n    }\n  }\n\n  const snapshot = stats.snapshot\n  const movingAverages = stats.movingAverages\n\n  return {\n    totalIn: snapshot.dataReceived,\n    totalOut: snapshot.dataSent,\n    rateIn: new Big(movingAverages.dataReceived['60000'].movingAverage() / 60),\n    rateOut: new Big(movingAverages.dataSent['60000'].movingAverage() / 60)\n  }\n}\n\nmodule.exports = function stats (self) {\n  const _bwPullStream = (opts) => {\n    opts = opts || {}\n    let interval = null\n    const stream = Pushable(true, () => {\n      if (interval) {\n        clearInterval(interval)\n      }\n    })\n\n    if (opts.poll) {\n      let value\n      try {\n        value = human(opts.interval || '1s')\n      } catch (err) {\n        // Pull stream expects async work, so we need to simulate it.\n        process.nextTick(() => {\n          stream.end(errCode(err, 'ERR_INVALID_POLL_INTERVAL'))\n        })\n      }\n\n      interval = setInterval(() => {\n        stream.push(bandwidthStats(self, opts))\n      }, value)\n    } else {\n      stream.push(bandwidthStats(self, opts))\n      stream.end()\n    }\n\n    return stream.source\n  }\n\n  return {\n    bitswap: require('./bitswap')(self).stat,\n    repo: require('./repo')(self).stat,\n    bw: callbackify.variadic(async (opts) => { // eslint-disable-line require-await\n      opts = opts || {}\n      return bandwidthStats(self, opts)\n    }),\n    bwReadableStream: (opts) => toStream.source(_bwPullStream(opts)),\n    bwPullStream: _bwPullStream\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"180638a97315398a51d40937abe4860b","cacheData":{"env":{}}}