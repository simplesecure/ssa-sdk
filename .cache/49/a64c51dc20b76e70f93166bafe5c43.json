{"id":"IrxS","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/package.json","includedInParent":true,"mtime":1582579780031},{"name":"events","loc":{"line":3,"column":29},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/events/events.js"},{"name":"debug","loc":{"line":4,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"},{"name":"class-is","loc":{"line":5,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/class-is/index.js"}],"generated":{"js":"\"use strict\";const t=require(\"events\").EventEmitter,e=require(\"debug\"),s=require(\"class-is\");class i extends t{constructor({_switch:t,name:s}){super(),this.switch=t,this.ourPeerInfo=this.switch._peerInfo,this.log=e(`libp2p:conn:${s}`),this.log.error=e(`libp2p:conn:${s}:error`)}close(t){\"DISCONNECTING\"!==this._state._state&&(this.log(\"closing connection to %s\",this.theirB58Id),t&&this._events.error&&this.emit(\"error\",t),this._state(\"disconnect\"))}emit(t,...e){\"error\"!==t||this._events.error?super.emit(t,...e):this.log.error(...e)}getState(){return this._state._state}encrypt(){this._state(\"encrypt\")}protect(){this._state(\"privatize\")}upgrade(){this._state(\"upgrade\")}_onDisconnected(){this.switch.connection.remove(this),this.log(\"disconnected from %s\",this.theirB58Id),this.emit(\"close\"),this.removeAllListeners()}_onPrivatized(){this.emit(\"private\",this.conn)}_onPrivatizing(){if(!this.switch.protector)return this._state(\"done\");this.conn=this.switch.protector.protect(this.conn,t=>{if(t)return this.close(t);this.log(\"successfully privatized conn to %s\",this.theirB58Id),this.conn.setPeerInfo(this.theirPeerInfo),this._state(\"done\")})}}module.exports=s(i,{className:\"BaseConnection\",symbolName:\"libp2p-switch/BaseConnection\"});"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"EventEmitter","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"require","original":{"line":3,"column":21},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":3,"column":29},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"EventEmitter","original":{"line":3,"column":39},"generated":{"line":1,"column":39}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"debug","original":{"line":4,"column":6},"generated":{"line":1,"column":52}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"require","original":{"line":4,"column":14},"generated":{"line":1,"column":54}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":4,"column":22},"generated":{"line":1,"column":62}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"withIs","original":{"line":5,"column":6},"generated":{"line":1,"column":71}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"require","original":{"line":5,"column":15},"generated":{"line":1,"column":73}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":5,"column":23},"generated":{"line":1,"column":81}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":7,"column":0},"generated":{"line":1,"column":93}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"BaseConnection","original":{"line":7,"column":6},"generated":{"line":1,"column":99}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"EventEmitter","original":{"line":7,"column":29},"generated":{"line":1,"column":109}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"constructor","original":{"line":8,"column":2},"generated":{"line":1,"column":111}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":8,"column":15},"generated":{"line":1,"column":124}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_switch","original":{"line":8,"column":17},"generated":{"line":1,"column":132}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":8,"column":15},"generated":{"line":1,"column":134}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"name","original":{"line":8,"column":26},"generated":{"line":1,"column":139}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":9,"column":4},"generated":{"line":1,"column":143}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"switch","original":{"line":11,"column":9},"generated":{"line":1,"column":151}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"switch","original":{"line":11,"column":9},"generated":{"line":1,"column":156}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_switch","original":{"line":11,"column":18},"generated":{"line":1,"column":163}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"ourPeerInfo","original":{"line":12,"column":9},"generated":{"line":1,"column":165}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"ourPeerInfo","original":{"line":12,"column":9},"generated":{"line":1,"column":170}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":12,"column":23},"generated":{"line":1,"column":182}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"switch","original":{"line":12,"column":28},"generated":{"line":1,"column":187}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_peerInfo","original":{"line":12,"column":35},"generated":{"line":1,"column":194}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":13,"column":9},"generated":{"line":1,"column":204}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":13,"column":9},"generated":{"line":1,"column":209}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"debug","original":{"line":13,"column":15},"generated":{"line":1,"column":213}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"name","original":{"line":13,"column":36},"generated":{"line":1,"column":230}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":14,"column":9},"generated":{"line":1,"column":235}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":14,"column":9},"generated":{"line":1,"column":240}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"error","original":{"line":14,"column":13},"generated":{"line":1,"column":244}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"debug","original":{"line":14,"column":21},"generated":{"line":1,"column":250}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"name","original":{"line":14,"column":42},"generated":{"line":1,"column":267}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"close","original":{"line":23,"column":2},"generated":{"line":1,"column":278}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"err","original":{"line":23,"column":9},"generated":{"line":1,"column":284}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":24,"column":31},"generated":{"line":1,"column":287}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":24,"column":8},"generated":{"line":1,"column":305}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":24,"column":13},"generated":{"line":1,"column":310}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":24,"column":20},"generated":{"line":1,"column":317}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":25,"column":9},"generated":{"line":1,"column":326}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":25,"column":9},"generated":{"line":1,"column":331}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":25,"column":13},"generated":{"line":1,"column":335}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":25,"column":41},"generated":{"line":1,"column":362}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"theirB58Id","original":{"line":25,"column":46},"generated":{"line":1,"column":367}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"err","original":{"line":26,"column":8},"generated":{"line":1,"column":379}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":26,"column":15},"generated":{"line":1,"column":382}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_events","original":{"line":26,"column":20},"generated":{"line":1,"column":387}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"error","original":{"line":26,"column":28},"generated":{"line":1,"column":395}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":27,"column":11},"generated":{"line":1,"column":402}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":27,"column":11},"generated":{"line":1,"column":407}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":27,"column":16},"generated":{"line":1,"column":412}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"err","original":{"line":27,"column":25},"generated":{"line":1,"column":420}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":29,"column":9},"generated":{"line":1,"column":423}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":29,"column":9},"generated":{"line":1,"column":428}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":29,"column":16},"generated":{"line":1,"column":435}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":32,"column":2},"generated":{"line":1,"column":450}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"eventName","original":{"line":32,"column":8},"generated":{"line":1,"column":455}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"args","original":{"line":32,"column":22},"generated":{"line":1,"column":460}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":33,"column":22},"generated":{"line":1,"column":463}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"eventName","original":{"line":33,"column":8},"generated":{"line":1,"column":473}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":33,"column":34},"generated":{"line":1,"column":476}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_events","original":{"line":33,"column":39},"generated":{"line":1,"column":481}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"error","original":{"line":33,"column":47},"generated":{"line":1,"column":489}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":36,"column":12},"generated":{"line":1,"column":495}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":36,"column":12},"generated":{"line":1,"column":501}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"eventName","original":{"line":36,"column":17},"generated":{"line":1,"column":506}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"args","original":{"line":36,"column":31},"generated":{"line":1,"column":511}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":34,"column":11},"generated":{"line":1,"column":514}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":34,"column":11},"generated":{"line":1,"column":519}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"error","original":{"line":34,"column":15},"generated":{"line":1,"column":523}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"args","original":{"line":34,"column":24},"generated":{"line":1,"column":532}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"getState","original":{"line":45,"column":2},"generated":{"line":1,"column":535}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":46,"column":11},"generated":{"line":1,"column":546}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":46,"column":11},"generated":{"line":1,"column":553}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":46,"column":16},"generated":{"line":1,"column":558}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":46,"column":23},"generated":{"line":1,"column":565}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"encrypt","original":{"line":54,"column":2},"generated":{"line":1,"column":572}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":55,"column":9},"generated":{"line":1,"column":582}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":55,"column":9},"generated":{"line":1,"column":587}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":55,"column":16},"generated":{"line":1,"column":594}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"protect","original":{"line":63,"column":2},"generated":{"line":1,"column":605}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":64,"column":9},"generated":{"line":1,"column":615}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":64,"column":9},"generated":{"line":1,"column":620}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":64,"column":16},"generated":{"line":1,"column":627}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"upgrade","original":{"line":72,"column":2},"generated":{"line":1,"column":640}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":73,"column":9},"generated":{"line":1,"column":650}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":73,"column":9},"generated":{"line":1,"column":655}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":73,"column":16},"generated":{"line":1,"column":662}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_onDisconnected","original":{"line":82,"column":2},"generated":{"line":1,"column":673}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"switch","original":{"line":83,"column":9},"generated":{"line":1,"column":691}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"switch","original":{"line":83,"column":9},"generated":{"line":1,"column":696}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"connection","original":{"line":83,"column":16},"generated":{"line":1,"column":703}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"remove","original":{"line":83,"column":27},"generated":{"line":1,"column":714}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":83,"column":34},"generated":{"line":1,"column":721}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":84,"column":9},"generated":{"line":1,"column":727}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":84,"column":9},"generated":{"line":1,"column":732}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":84,"column":13},"generated":{"line":1,"column":736}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":84,"column":37},"generated":{"line":1,"column":759}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"theirB58Id","original":{"line":84,"column":42},"generated":{"line":1,"column":764}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":85,"column":9},"generated":{"line":1,"column":776}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":85,"column":9},"generated":{"line":1,"column":781}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":85,"column":14},"generated":{"line":1,"column":786}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"removeAllListeners","original":{"line":86,"column":9},"generated":{"line":1,"column":795}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"removeAllListeners","original":{"line":86,"column":9},"generated":{"line":1,"column":800}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_onPrivatized","original":{"line":95,"column":2},"generated":{"line":1,"column":821}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":96,"column":9},"generated":{"line":1,"column":837}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"emit","original":{"line":96,"column":9},"generated":{"line":1,"column":842}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":96,"column":14},"generated":{"line":1,"column":847}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":96,"column":25},"generated":{"line":1,"column":857}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"conn","original":{"line":96,"column":30},"generated":{"line":1,"column":862}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_onPrivatizing","original":{"line":106,"column":2},"generated":{"line":1,"column":868}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":107,"column":8},"generated":{"line":1,"column":885}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":107,"column":9},"generated":{"line":1,"column":889}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"switch","original":{"line":107,"column":14},"generated":{"line":1,"column":894}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"protector","original":{"line":107,"column":21},"generated":{"line":1,"column":901}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":108,"column":13},"generated":{"line":1,"column":911}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":108,"column":13},"generated":{"line":1,"column":918}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":108,"column":18},"generated":{"line":1,"column":923}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":108,"column":25},"generated":{"line":1,"column":930}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"conn","original":{"line":111,"column":9},"generated":{"line":1,"column":938}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"conn","original":{"line":111,"column":9},"generated":{"line":1,"column":943}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":111,"column":16},"generated":{"line":1,"column":948}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"switch","original":{"line":111,"column":21},"generated":{"line":1,"column":953}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"protector","original":{"line":111,"column":28},"generated":{"line":1,"column":960}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"protect","original":{"line":111,"column":38},"generated":{"line":1,"column":970}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":111,"column":46},"generated":{"line":1,"column":978}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"conn","original":{"line":111,"column":51},"generated":{"line":1,"column":983}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"err","original":{"line":111,"column":58},"generated":{"line":1,"column":988}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"err","original":{"line":112,"column":10},"generated":{"line":1,"column":992}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"err","original":{"line":112,"column":10},"generated":{"line":1,"column":995}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":113,"column":15},"generated":{"line":1,"column":997}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":113,"column":15},"generated":{"line":1,"column":1004}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"close","original":{"line":113,"column":20},"generated":{"line":1,"column":1009}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"err","original":{"line":113,"column":26},"generated":{"line":1,"column":1015}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":116,"column":11},"generated":{"line":1,"column":1018}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"log","original":{"line":116,"column":11},"generated":{"line":1,"column":1023}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":116,"column":15},"generated":{"line":1,"column":1027}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":116,"column":53},"generated":{"line":1,"column":1064}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"theirB58Id","original":{"line":116,"column":58},"generated":{"line":1,"column":1069}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"conn","original":{"line":117,"column":11},"generated":{"line":1,"column":1081}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"conn","original":{"line":117,"column":11},"generated":{"line":1,"column":1086}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"setPeerInfo","original":{"line":117,"column":16},"generated":{"line":1,"column":1091}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":117,"column":28},"generated":{"line":1,"column":1103}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"theirPeerInfo","original":{"line":117,"column":33},"generated":{"line":1,"column":1108}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":118,"column":11},"generated":{"line":1,"column":1123}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"_state","original":{"line":118,"column":11},"generated":{"line":1,"column":1128}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":118,"column":18},"generated":{"line":1,"column":1135}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"module","original":{"line":123,"column":0},"generated":{"line":1,"column":1146}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"exports","original":{"line":123,"column":7},"generated":{"line":1,"column":1153}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"withIs","original":{"line":123,"column":17},"generated":{"line":1,"column":1161}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"BaseConnection","original":{"line":123,"column":24},"generated":{"line":1,"column":1163}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":123,"column":40},"generated":{"line":1,"column":1165}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"className","original":{"line":124,"column":2},"generated":{"line":1,"column":1166}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":124,"column":13},"generated":{"line":1,"column":1176}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","name":"symbolName","original":{"line":125,"column":2},"generated":{"line":1,"column":1193}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js","original":{"line":125,"column":14},"generated":{"line":1,"column":1204}}],"sources":{"node_modules/ipfs/node_modules/libp2p/src/switch/connection/base.js":"'use strict'\n\nconst EventEmitter = require('events').EventEmitter\nconst debug = require('debug')\nconst withIs = require('class-is')\n\nclass BaseConnection extends EventEmitter {\n  constructor ({ _switch, name }) {\n    super()\n\n    this.switch = _switch\n    this.ourPeerInfo = this.switch._peerInfo\n    this.log = debug(`libp2p:conn:${name}`)\n    this.log.error = debug(`libp2p:conn:${name}:error`)\n  }\n\n  /**\n   * Puts the state into its disconnecting flow\n   *\n   * @param {Error} err Will be emitted if provided\n   * @returns {void}\n   */\n  close (err) {\n    if (this._state._state === 'DISCONNECTING') return\n    this.log('closing connection to %s', this.theirB58Id)\n    if (err && this._events.error) {\n      this.emit('error', err)\n    }\n    this._state('disconnect')\n  }\n\n  emit (eventName, ...args) {\n    if (eventName === 'error' && !this._events.error) {\n      this.log.error(...args)\n    } else {\n      super.emit(eventName, ...args)\n    }\n  }\n\n  /**\n   * Gets the current state of the connection\n   *\n   * @returns {string} The current state of the connection\n   */\n  getState () {\n    return this._state._state\n  }\n\n  /**\n   * Puts the state into encrypting mode\n   *\n   * @returns {void}\n   */\n  encrypt () {\n    this._state('encrypt')\n  }\n\n  /**\n   * Puts the state into privatizing mode\n   *\n   * @returns {void}\n   */\n  protect () {\n    this._state('privatize')\n  }\n\n  /**\n   * Puts the state into muxing mode\n   *\n   * @returns {void}\n   */\n  upgrade () {\n    this._state('upgrade')\n  }\n\n  /**\n   * Event handler for disconnected.\n   *\n   * @fires BaseConnection#close\n   * @returns {void}\n   */\n  _onDisconnected () {\n    this.switch.connection.remove(this)\n    this.log('disconnected from %s', this.theirB58Id)\n    this.emit('close')\n    this.removeAllListeners()\n  }\n\n  /**\n   * Event handler for privatized\n   *\n   * @fires BaseConnection#private\n   * @returns {void}\n   */\n  _onPrivatized () {\n    this.emit('private', this.conn)\n  }\n\n  /**\n   * Wraps this.conn with the Switch.protector for private connections\n   *\n   * @private\n   * @fires ConnectionFSM#error\n   * @returns {void}\n   */\n  _onPrivatizing () {\n    if (!this.switch.protector) {\n      return this._state('done')\n    }\n\n    this.conn = this.switch.protector.protect(this.conn, (err) => {\n      if (err) {\n        return this.close(err)\n      }\n\n      this.log('successfully privatized conn to %s', this.theirB58Id)\n      this.conn.setPeerInfo(this.theirPeerInfo)\n      this._state('done')\n    })\n  }\n}\n\nmodule.exports = withIs(BaseConnection, {\n  className: 'BaseConnection',\n  symbolName: 'libp2p-switch/BaseConnection'\n})\n"},"lineCount":null}},"error":null,"hash":"f20fb579b3d302465cd1dbd4f50d6457","cacheData":{"env":{}}}