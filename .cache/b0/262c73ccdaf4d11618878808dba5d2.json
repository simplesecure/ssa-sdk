{"id":"sO0E","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/package.json","includedInParent":true,"mtime":1582579780031},{"name":"async/setImmediate","loc":{"line":3,"column":29},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/setImmediate.js"},{"name":"events","loc":{"line":5,"column":19},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/events/events.js"},{"name":"interface-connection","loc":{"line":6,"column":27},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/interface-connection/src/index.js"},{"name":"./utils","loc":{"line":7,"column":29},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/utils.js"},{"name":"peer-info","loc":{"line":8,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/peer-info/src/index.js"},{"name":"../protocol","loc":{"line":9,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/protocol/index.js"},{"name":"async/series","loc":{"line":10,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/series.js"},{"name":"debug","loc":{"line":12,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"}],"generated":{"js":"\"use strict\";const e=require(\"async/setImmediate\"),r=require(\"events\").EventEmitter,t=require(\"interface-connection\").Connection,s=require(\"./utils\"),i=require(\"peer-info\"),c=require(\"../protocol\").CircuitRelay,n=require(\"async/series\"),u=require(\"debug\"),o=u(\"libp2p:circuit:stop\");o.err=u(\"libp2p:circuit:error:stop\");class d extends r{constructor(e){super(),this.swarm=e,this.utils=s(e)}handle(r,s,u){u=u||(()=>{}),n([e=>this.utils.validateAddrs(r,s,c.Type.STOP,e),e=>this.utils.writeResponse(s,c.Status.Success,e)],c=>{if(c)return u(),o(c);const n=new i(this.utils.peerIdFromId(r.srcPeer.id));r.srcPeer.addrs.forEach(e=>n.multiaddrs.add(e));const d=new t(s.rest());d.setPeerInfo(n),e(()=>this.emit(\"connection\",d)),u(d)})}}module.exports=d;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"setImmediate","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"require","original":{"line":3,"column":21},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":3,"column":29},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"EE","original":{"line":5,"column":6},"generated":{"line":1,"column":51}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"require","original":{"line":5,"column":11},"generated":{"line":1,"column":53}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":5,"column":19},"generated":{"line":1,"column":61}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"EventEmitter","original":{"line":5,"column":29},"generated":{"line":1,"column":71}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"Connection","original":{"line":6,"column":6},"generated":{"line":1,"column":84}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"require","original":{"line":6,"column":19},"generated":{"line":1,"column":86}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":6,"column":27},"generated":{"line":1,"column":94}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"Connection","original":{"line":6,"column":51},"generated":{"line":1,"column":118}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"utilsFactory","original":{"line":7,"column":6},"generated":{"line":1,"column":129}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"require","original":{"line":7,"column":21},"generated":{"line":1,"column":131}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":7,"column":29},"generated":{"line":1,"column":139}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"PeerInfo","original":{"line":8,"column":6},"generated":{"line":1,"column":150}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"require","original":{"line":8,"column":17},"generated":{"line":1,"column":152}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":8,"column":25},"generated":{"line":1,"column":160}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"proto","original":{"line":9,"column":6},"generated":{"line":1,"column":173}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"require","original":{"line":9,"column":14},"generated":{"line":1,"column":175}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":9,"column":22},"generated":{"line":1,"column":183}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"CircuitRelay","original":{"line":9,"column":37},"generated":{"line":1,"column":198}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"series","original":{"line":10,"column":6},"generated":{"line":1,"column":211}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"require","original":{"line":10,"column":15},"generated":{"line":1,"column":213}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":10,"column":23},"generated":{"line":1,"column":221}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"debug","original":{"line":12,"column":6},"generated":{"line":1,"column":237}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"require","original":{"line":12,"column":14},"generated":{"line":1,"column":239}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":12,"column":22},"generated":{"line":1,"column":247}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"log","original":{"line":14,"column":6},"generated":{"line":1,"column":256}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"debug","original":{"line":14,"column":12},"generated":{"line":1,"column":258}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":14,"column":18},"generated":{"line":1,"column":260}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"log","original":{"line":15,"column":0},"generated":{"line":1,"column":283}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"err","original":{"line":15,"column":4},"generated":{"line":1,"column":285}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"debug","original":{"line":15,"column":10},"generated":{"line":1,"column":289}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":15,"column":16},"generated":{"line":1,"column":291}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":17,"column":0},"generated":{"line":1,"column":320}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"Stop","original":{"line":17,"column":6},"generated":{"line":1,"column":326}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"EE","original":{"line":17,"column":19},"generated":{"line":1,"column":336}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"constructor","original":{"line":18,"column":2},"generated":{"line":1,"column":338}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"swarm","original":{"line":18,"column":15},"generated":{"line":1,"column":350}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":19,"column":4},"generated":{"line":1,"column":353}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"swarm","original":{"line":20,"column":9},"generated":{"line":1,"column":361}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"swarm","original":{"line":20,"column":9},"generated":{"line":1,"column":366}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"swarm","original":{"line":20,"column":17},"generated":{"line":1,"column":372}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"utils","original":{"line":21,"column":9},"generated":{"line":1,"column":374}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"utils","original":{"line":21,"column":9},"generated":{"line":1,"column":379}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"utilsFactory","original":{"line":21,"column":17},"generated":{"line":1,"column":385}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"swarm","original":{"line":21,"column":30},"generated":{"line":1,"column":387}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"handle","original":{"line":32,"column":2},"generated":{"line":1,"column":390}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"msg","original":{"line":32,"column":10},"generated":{"line":1,"column":397}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"sh","original":{"line":32,"column":15},"generated":{"line":1,"column":399}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"callback","original":{"line":32,"column":19},"generated":{"line":1,"column":401}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"callback","original":{"line":33,"column":4},"generated":{"line":1,"column":404}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"callback","original":{"line":33,"column":15},"generated":{"line":1,"column":406}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":33,"column":28},"generated":{"line":1,"column":409}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"series","original":{"line":35,"column":4},"generated":{"line":1,"column":418}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":35,"column":11},"generated":{"line":1,"column":420}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"cb","original":{"line":36,"column":7},"generated":{"line":1,"column":421}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":36,"column":14},"generated":{"line":1,"column":424}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"utils","original":{"line":36,"column":19},"generated":{"line":1,"column":429}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"validateAddrs","original":{"line":36,"column":25},"generated":{"line":1,"column":435}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"msg","original":{"line":36,"column":39},"generated":{"line":1,"column":449}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"sh","original":{"line":36,"column":44},"generated":{"line":1,"column":451}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"proto","original":{"line":36,"column":48},"generated":{"line":1,"column":453}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"Type","original":{"line":36,"column":54},"generated":{"line":1,"column":455}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"STOP","original":{"line":36,"column":59},"generated":{"line":1,"column":460}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"cb","original":{"line":36,"column":65},"generated":{"line":1,"column":465}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"cb","original":{"line":37,"column":7},"generated":{"line":1,"column":468}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":37,"column":14},"generated":{"line":1,"column":471}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"utils","original":{"line":37,"column":19},"generated":{"line":1,"column":476}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"writeResponse","original":{"line":37,"column":25},"generated":{"line":1,"column":482}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"sh","original":{"line":37,"column":39},"generated":{"line":1,"column":496}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"proto","original":{"line":37,"column":43},"generated":{"line":1,"column":498}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"Status","original":{"line":37,"column":49},"generated":{"line":1,"column":500}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"Success","original":{"line":37,"column":56},"generated":{"line":1,"column":507}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"cb","original":{"line":37,"column":65},"generated":{"line":1,"column":515}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"err","original":{"line":38,"column":8},"generated":{"line":1,"column":519}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"err","original":{"line":39,"column":10},"generated":{"line":1,"column":523}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"err","original":{"line":39,"column":10},"generated":{"line":1,"column":526}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"log","original":{"line":43,"column":15},"generated":{"line":1,"column":528}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"callback","original":{"line":42,"column":8},"generated":{"line":1,"column":535}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"log","original":{"line":43,"column":15},"generated":{"line":1,"column":539}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"err","original":{"line":43,"column":19},"generated":{"line":1,"column":541}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"peerInfo","original":{"line":46,"column":12},"generated":{"line":1,"column":544}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"peerInfo","original":{"line":46,"column":12},"generated":{"line":1,"column":550}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":46,"column":23},"generated":{"line":1,"column":552}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"PeerInfo","original":{"line":46,"column":27},"generated":{"line":1,"column":556}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":46,"column":36},"generated":{"line":1,"column":558}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"utils","original":{"line":46,"column":41},"generated":{"line":1,"column":563}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"peerIdFromId","original":{"line":46,"column":47},"generated":{"line":1,"column":569}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"msg","original":{"line":46,"column":60},"generated":{"line":1,"column":582}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"srcPeer","original":{"line":46,"column":64},"generated":{"line":1,"column":584}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"id","original":{"line":46,"column":72},"generated":{"line":1,"column":592}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"msg","original":{"line":47,"column":6},"generated":{"line":1,"column":597}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"srcPeer","original":{"line":47,"column":10},"generated":{"line":1,"column":599}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"addrs","original":{"line":47,"column":18},"generated":{"line":1,"column":607}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"forEach","original":{"line":47,"column":24},"generated":{"line":1,"column":613}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"addr","original":{"line":47,"column":33},"generated":{"line":1,"column":621}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"peerInfo","original":{"line":47,"column":42},"generated":{"line":1,"column":624}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"multiaddrs","original":{"line":47,"column":51},"generated":{"line":1,"column":626}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"add","original":{"line":47,"column":62},"generated":{"line":1,"column":637}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"addr","original":{"line":47,"column":66},"generated":{"line":1,"column":641}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"newConn","original":{"line":48,"column":12},"generated":{"line":1,"column":645}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"newConn","original":{"line":48,"column":12},"generated":{"line":1,"column":651}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":48,"column":22},"generated":{"line":1,"column":653}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"Connection","original":{"line":48,"column":26},"generated":{"line":1,"column":657}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"sh","original":{"line":48,"column":37},"generated":{"line":1,"column":659}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"rest","original":{"line":48,"column":40},"generated":{"line":1,"column":661}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"newConn","original":{"line":49,"column":6},"generated":{"line":1,"column":669}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"setPeerInfo","original":{"line":49,"column":14},"generated":{"line":1,"column":671}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"peerInfo","original":{"line":49,"column":26},"generated":{"line":1,"column":683}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"setImmediate","original":{"line":50,"column":6},"generated":{"line":1,"column":686}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":50,"column":19},"generated":{"line":1,"column":688}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":50,"column":25},"generated":{"line":1,"column":692}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"emit","original":{"line":50,"column":30},"generated":{"line":1,"column":697}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","original":{"line":50,"column":35},"generated":{"line":1,"column":702}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"newConn","original":{"line":50,"column":49},"generated":{"line":1,"column":715}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"callback","original":{"line":51,"column":6},"generated":{"line":1,"column":719}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"newConn","original":{"line":51,"column":15},"generated":{"line":1,"column":721}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"module","original":{"line":56,"column":0},"generated":{"line":1,"column":727}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"exports","original":{"line":56,"column":7},"generated":{"line":1,"column":734}},{"source":"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js","name":"Stop","original":{"line":56,"column":17},"generated":{"line":1,"column":742}}],"sources":{"node_modules/ipfs/node_modules/libp2p/src/circuit/circuit/stop.js":"'use strict'\n\nconst setImmediate = require('async/setImmediate')\n\nconst EE = require('events').EventEmitter\nconst Connection = require('interface-connection').Connection\nconst utilsFactory = require('./utils')\nconst PeerInfo = require('peer-info')\nconst proto = require('../protocol').CircuitRelay\nconst series = require('async/series')\n\nconst debug = require('debug')\n\nconst log = debug('libp2p:circuit:stop')\nlog.err = debug('libp2p:circuit:error:stop')\n\nclass Stop extends EE {\n  constructor (swarm) {\n    super()\n    this.swarm = swarm\n    this.utils = utilsFactory(swarm)\n  }\n\n  /**\n   * Handle the incoming STOP message\n   *\n   * @param {{}} msg  - the parsed protobuf message\n   * @param {StreamHandler} sh  - the stream handler wrapped connection\n   * @param {Function} callback  - callback\n   * @returns {undefined}\n   */\n  handle (msg, sh, callback) {\n    callback = callback || (() => {})\n\n    series([\n      (cb) => this.utils.validateAddrs(msg, sh, proto.Type.STOP, cb),\n      (cb) => this.utils.writeResponse(sh, proto.Status.Success, cb)\n    ], (err) => {\n      if (err) {\n        // we don't return the error here,\n        // since multistream select don't expect one\n        callback()\n        return log(err)\n      }\n\n      const peerInfo = new PeerInfo(this.utils.peerIdFromId(msg.srcPeer.id))\n      msg.srcPeer.addrs.forEach((addr) => peerInfo.multiaddrs.add(addr))\n      const newConn = new Connection(sh.rest())\n      newConn.setPeerInfo(peerInfo)\n      setImmediate(() => this.emit('connection', newConn))\n      callback(newConn)\n    })\n  }\n}\n\nmodule.exports = Stop\n"},"lineCount":null}},"error":null,"hash":"c19831080c39aed561d60c44b5800652","cacheData":{"env":{}}}