{"id":"Lhi8","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/package.json","includedInParent":true,"mtime":1582579780031},{"name":"interface-connection","loc":{"line":3,"column":27},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/interface-connection/src/index.js"},{"name":"pull-stream/pull","loc":{"line":4,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-stream/pull.js"},{"name":"pull-stream/sources/empty","loc":{"line":5,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/pull-stream/sources/empty.js"},{"name":"async/timeout","loc":{"line":6,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/timeout.js"},{"name":"async/queue","loc":{"line":7,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/queue.js"},{"name":"debug","loc":{"line":8,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"},{"name":"once","loc":{"line":9,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/once/once.js"}],"generated":{"js":"\"use strict\";const e=require(\"interface-connection\").Connection,r=require(\"pull-stream/pull\"),t=require(\"pull-stream/sources/empty\"),u=require(\"async/timeout\"),i=require(\"async/queue\"),o=require(\"debug\"),n=require(\"once\"),s=o(\"libp2p:switch:dialer:queue\");s.error=o(\"libp2p:switch:dialer:queue:error\");class l{constructor(e,r){this.dialTimeout=r,this.queue=i((e,r)=>{this._doWork(e.transport,e.addr,e.token,r)},e)}_doWork(u,i,o,l){l=n(l),s(\"work:start\"),this._dialWithTimeout(u,i,(n,c)=>{if(n)return s.error(`${u.constructor.name}:work`,n),l(n);if(o.cancel)return s(\"work:cancel\"),r(t(),c),\"function\"==typeof c.close?c.close(e=>l(null)):l(null);o.cancel=!0,s(\"work:success\"),(new e).setInnerConn(c),l(null,{multiaddr:i,conn:c})})}_dialWithTimeout(e,r,t){u(t=>{const u=e.dial(r,e=>{if(e)return t(e);t(null,u)})},this.dialTimeout)(t)}push(e,r,t,u){this.queue.push({transport:e,addr:r,token:t},u)}}module.exports=l;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"Connection","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"require","original":{"line":3,"column":19},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":3,"column":27},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"Connection","original":{"line":3,"column":51},"generated":{"line":1,"column":53}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"pull","original":{"line":4,"column":6},"generated":{"line":1,"column":64}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"require","original":{"line":4,"column":13},"generated":{"line":1,"column":66}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":4,"column":21},"generated":{"line":1,"column":74}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"empty","original":{"line":5,"column":6},"generated":{"line":1,"column":94}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"require","original":{"line":5,"column":14},"generated":{"line":1,"column":96}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":5,"column":22},"generated":{"line":1,"column":104}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"timeout","original":{"line":6,"column":6},"generated":{"line":1,"column":133}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"require","original":{"line":6,"column":16},"generated":{"line":1,"column":135}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":6,"column":24},"generated":{"line":1,"column":143}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"queue","original":{"line":7,"column":6},"generated":{"line":1,"column":160}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"require","original":{"line":7,"column":14},"generated":{"line":1,"column":162}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":7,"column":22},"generated":{"line":1,"column":170}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"debug","original":{"line":8,"column":6},"generated":{"line":1,"column":185}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"require","original":{"line":8,"column":14},"generated":{"line":1,"column":187}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":8,"column":22},"generated":{"line":1,"column":195}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"once","original":{"line":9,"column":6},"generated":{"line":1,"column":204}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"require","original":{"line":9,"column":13},"generated":{"line":1,"column":206}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":9,"column":21},"generated":{"line":1,"column":214}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"log","original":{"line":11,"column":6},"generated":{"line":1,"column":222}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"debug","original":{"line":11,"column":12},"generated":{"line":1,"column":224}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":11,"column":18},"generated":{"line":1,"column":226}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"log","original":{"line":12,"column":0},"generated":{"line":1,"column":256}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"error","original":{"line":12,"column":4},"generated":{"line":1,"column":258}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"debug","original":{"line":12,"column":12},"generated":{"line":1,"column":264}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":12,"column":18},"generated":{"line":1,"column":266}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":17,"column":0},"generated":{"line":1,"column":302}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"DialQueue","original":{"line":17,"column":6},"generated":{"line":1,"column":308}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"constructor","original":{"line":24,"column":2},"generated":{"line":1,"column":310}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"limit","original":{"line":24,"column":15},"generated":{"line":1,"column":322}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"dialTimeout","original":{"line":24,"column":22},"generated":{"line":1,"column":324}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"dialTimeout","original":{"line":25,"column":9},"generated":{"line":1,"column":327}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"dialTimeout","original":{"line":25,"column":9},"generated":{"line":1,"column":332}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"dialTimeout","original":{"line":25,"column":23},"generated":{"line":1,"column":344}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"queue","original":{"line":27,"column":9},"generated":{"line":1,"column":346}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"queue","original":{"line":27,"column":9},"generated":{"line":1,"column":351}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"queue","original":{"line":27,"column":17},"generated":{"line":1,"column":357}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":27,"column":23},"generated":{"line":1,"column":359}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"task","original":{"line":27,"column":24},"generated":{"line":1,"column":360}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"cb","original":{"line":27,"column":30},"generated":{"line":1,"column":362}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"_doWork","original":{"line":28,"column":11},"generated":{"line":1,"column":367}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"_doWork","original":{"line":28,"column":11},"generated":{"line":1,"column":372}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"task","original":{"line":28,"column":19},"generated":{"line":1,"column":380}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":28,"column":24},"generated":{"line":1,"column":382}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"task","original":{"line":28,"column":35},"generated":{"line":1,"column":392}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":28,"column":40},"generated":{"line":1,"column":394}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"task","original":{"line":28,"column":46},"generated":{"line":1,"column":399}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"token","original":{"line":28,"column":51},"generated":{"line":1,"column":401}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"cb","original":{"line":28,"column":58},"generated":{"line":1,"column":407}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"limit","original":{"line":29,"column":7},"generated":{"line":1,"column":411}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"_doWork","original":{"line":42,"column":2},"generated":{"line":1,"column":414}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":42,"column":11},"generated":{"line":1,"column":422}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":42,"column":22},"generated":{"line":1,"column":424}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"token","original":{"line":42,"column":28},"generated":{"line":1,"column":426}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":42,"column":35},"generated":{"line":1,"column":428}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":43,"column":4},"generated":{"line":1,"column":431}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"once","original":{"line":43,"column":15},"generated":{"line":1,"column":433}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":43,"column":20},"generated":{"line":1,"column":435}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"log","original":{"line":44,"column":4},"generated":{"line":1,"column":438}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":44,"column":8},"generated":{"line":1,"column":440}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"_dialWithTimeout","original":{"line":45,"column":9},"generated":{"line":1,"column":454}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"_dialWithTimeout","original":{"line":45,"column":9},"generated":{"line":1,"column":459}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":45,"column":26},"generated":{"line":1,"column":476}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":45,"column":37},"generated":{"line":1,"column":478}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":45,"column":43},"generated":{"line":1,"column":480}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":45,"column":44},"generated":{"line":1,"column":481}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":45,"column":49},"generated":{"line":1,"column":483}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":46,"column":10},"generated":{"line":1,"column":488}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":46,"column":10},"generated":{"line":1,"column":491}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":48,"column":15},"generated":{"line":1,"column":493}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"log","original":{"line":47,"column":8},"generated":{"line":1,"column":500}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"error","original":{"line":47,"column":12},"generated":{"line":1,"column":502}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":47,"column":21},"generated":{"line":1,"column":511}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"constructor","original":{"line":47,"column":31},"generated":{"line":1,"column":513}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"name","original":{"line":47,"column":43},"generated":{"line":1,"column":525}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":47,"column":56},"generated":{"line":1,"column":537}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":48,"column":15},"generated":{"line":1,"column":540}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":48,"column":24},"generated":{"line":1,"column":542}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"token","original":{"line":51,"column":10},"generated":{"line":1,"column":545}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"token","original":{"line":51,"column":10},"generated":{"line":1,"column":548}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"cancel","original":{"line":51,"column":16},"generated":{"line":1,"column":550}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":56,"column":12},"generated":{"line":1,"column":557}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"log","original":{"line":52,"column":8},"generated":{"line":1,"column":564}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":52,"column":12},"generated":{"line":1,"column":566}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"pull","original":{"line":54,"column":8},"generated":{"line":1,"column":581}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"empty","original":{"line":54,"column":13},"generated":{"line":1,"column":583}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":54,"column":22},"generated":{"line":1,"column":587}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":56,"column":34},"generated":{"line":1,"column":590}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":56,"column":19},"generated":{"line":1,"column":609}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"close","original":{"line":56,"column":24},"generated":{"line":1,"column":611}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":57,"column":17},"generated":{"line":1,"column":617}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"close","original":{"line":57,"column":22},"generated":{"line":1,"column":619}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"_","original":{"line":57,"column":29},"generated":{"line":1,"column":625}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":57,"column":35},"generated":{"line":1,"column":628}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":57,"column":44},"generated":{"line":1,"column":630}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":59,"column":15},"generated":{"line":1,"column":637}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":59,"column":24},"generated":{"line":1,"column":639}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"token","original":{"line":63,"column":6},"generated":{"line":1,"column":645}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"cancel","original":{"line":63,"column":12},"generated":{"line":1,"column":647}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":63,"column":21},"generated":{"line":1,"column":655}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"log","original":{"line":65,"column":6},"generated":{"line":1,"column":657}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":65,"column":10},"generated":{"line":1,"column":659}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":67,"column":24},"generated":{"line":1,"column":676}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"Connection","original":{"line":67,"column":28},"generated":{"line":1,"column":680}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"setInnerConn","original":{"line":68,"column":16},"generated":{"line":1,"column":683}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":68,"column":29},"generated":{"line":1,"column":696}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":69,"column":6},"generated":{"line":1,"column":699}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":69,"column":15},"generated":{"line":1,"column":701}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":69,"column":21},"generated":{"line":1,"column":706}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"multiaddr","original":{"line":69,"column":23},"generated":{"line":1,"column":707}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":69,"column":34},"generated":{"line":1,"column":717}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":69,"column":40},"generated":{"line":1,"column":719}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":69,"column":46},"generated":{"line":1,"column":724}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"_dialWithTimeout","original":{"line":83,"column":2},"generated":{"line":1,"column":730}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":83,"column":20},"generated":{"line":1,"column":747}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":83,"column":31},"generated":{"line":1,"column":749}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":83,"column":37},"generated":{"line":1,"column":751}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"timeout","original":{"line":84,"column":4},"generated":{"line":1,"column":754}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"cb","original":{"line":84,"column":13},"generated":{"line":1,"column":756}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":85,"column":12},"generated":{"line":1,"column":760}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":85,"column":12},"generated":{"line":1,"column":766}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":85,"column":19},"generated":{"line":1,"column":768}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"dial","original":{"line":85,"column":29},"generated":{"line":1,"column":770}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":85,"column":34},"generated":{"line":1,"column":775}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":85,"column":41},"generated":{"line":1,"column":777}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":86,"column":12},"generated":{"line":1,"column":781}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":86,"column":12},"generated":{"line":1,"column":784}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"cb","original":{"line":87,"column":17},"generated":{"line":1,"column":786}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"cb","original":{"line":87,"column":17},"generated":{"line":1,"column":793}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"err","original":{"line":87,"column":20},"generated":{"line":1,"column":795}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"cb","original":{"line":90,"column":8},"generated":{"line":1,"column":798}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":90,"column":11},"generated":{"line":1,"column":800}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"conn","original":{"line":90,"column":17},"generated":{"line":1,"column":805}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":92,"column":7},"generated":{"line":1,"column":811}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"dialTimeout","original":{"line":92,"column":12},"generated":{"line":1,"column":816}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"timeout","original":{"line":84,"column":4},"generated":{"line":1,"column":828}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":92,"column":25},"generated":{"line":1,"column":829}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"push","original":{"line":104,"column":2},"generated":{"line":1,"column":832}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":104,"column":8},"generated":{"line":1,"column":837}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":104,"column":19},"generated":{"line":1,"column":839}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"token","original":{"line":104,"column":25},"generated":{"line":1,"column":841}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":104,"column":32},"generated":{"line":1,"column":843}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"queue","original":{"line":105,"column":9},"generated":{"line":1,"column":846}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"queue","original":{"line":105,"column":9},"generated":{"line":1,"column":851}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"push","original":{"line":105,"column":15},"generated":{"line":1,"column":857}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","original":{"line":105,"column":20},"generated":{"line":1,"column":862}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":105,"column":22},"generated":{"line":1,"column":863}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"transport","original":{"line":105,"column":22},"generated":{"line":1,"column":873}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":105,"column":33},"generated":{"line":1,"column":875}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"addr","original":{"line":105,"column":33},"generated":{"line":1,"column":880}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"token","original":{"line":105,"column":39},"generated":{"line":1,"column":882}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"token","original":{"line":105,"column":39},"generated":{"line":1,"column":888}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"callback","original":{"line":105,"column":48},"generated":{"line":1,"column":891}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"module","original":{"line":109,"column":0},"generated":{"line":1,"column":895}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"exports","original":{"line":109,"column":7},"generated":{"line":1,"column":902}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js","name":"DialQueue","original":{"line":109,"column":17},"generated":{"line":1,"column":910}}],"sources":{"node_modules/ipfs/node_modules/libp2p/src/switch/limit-dialer/queue.js":"'use strict'\n\nconst Connection = require('interface-connection').Connection\nconst pull = require('pull-stream/pull')\nconst empty = require('pull-stream/sources/empty')\nconst timeout = require('async/timeout')\nconst queue = require('async/queue')\nconst debug = require('debug')\nconst once = require('once')\n\nconst log = debug('libp2p:switch:dialer:queue')\nlog.error = debug('libp2p:switch:dialer:queue:error')\n\n/**\n * Queue up the amount of dials to a given peer.\n */\nclass DialQueue {\n  /**\n   * Create a new dial queue.\n   *\n   * @param {number} limit\n   * @param {number} dialTimeout\n   */\n  constructor (limit, dialTimeout) {\n    this.dialTimeout = dialTimeout\n\n    this.queue = queue((task, cb) => {\n      this._doWork(task.transport, task.addr, task.token, cb)\n    }, limit)\n  }\n\n  /**\n   * The actual work done by the queue.\n   *\n   * @param {SwarmTransport} transport\n   * @param {Multiaddr} addr\n   * @param {CancelToken} token\n   * @param {function(Error, Connection)} callback\n   * @returns {void}\n   * @private\n   */\n  _doWork (transport, addr, token, callback) {\n    callback = once(callback)\n    log('work:start')\n    this._dialWithTimeout(transport, addr, (err, conn) => {\n      if (err) {\n        log.error(`${transport.constructor.name}:work`, err)\n        return callback(err)\n      }\n\n      if (token.cancel) {\n        log('work:cancel')\n        // clean up already done dials\n        pull(empty(), conn)\n        // If we can close the connection, do it\n        if (typeof conn.close === 'function') {\n          return conn.close((_) => callback(null))\n        }\n        return callback(null)\n      }\n\n      // one is enough\n      token.cancel = true\n\n      log('work:success')\n\n      const proxyConn = new Connection()\n      proxyConn.setInnerConn(conn)\n      callback(null, { multiaddr: addr, conn: conn })\n    })\n  }\n\n  /**\n   * Dial the given transport, timing out with the set timeout.\n   *\n   * @param {SwarmTransport} transport\n   * @param {Multiaddr} addr\n   * @param {function(Error, Connection)} callback\n   * @returns {void}\n   *\n   * @private\n   */\n  _dialWithTimeout (transport, addr, callback) {\n    timeout((cb) => {\n      const conn = transport.dial(addr, (err) => {\n        if (err) {\n          return cb(err)\n        }\n\n        cb(null, conn)\n      })\n    }, this.dialTimeout)(callback)\n  }\n\n  /**\n   * Add new work to the queue.\n   *\n   * @param {SwarmTransport} transport\n   * @param {Multiaddr} addr\n   * @param {CancelToken} token\n   * @param {function(Error, Connection)} callback\n   * @returns {void}\n   */\n  push (transport, addr, token, callback) {\n    this.queue.push({ transport, addr, token }, callback)\n  }\n}\n\nmodule.exports = DialQueue\n"},"lineCount":null}},"error":null,"hash":"1b74374a93288e96112cb792adf1593b","cacheData":{"env":{}}}