{"id":"ymyw","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db/package.json","includedInParent":true,"mtime":1582579778661},{"name":"path","loc":{"line":1,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db/src/migrations/0.21-0.22.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/path-browserify/index.js"},{"name":"../fs-shim","loc":{"line":2,"column":19},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db/src/migrations/0.21-0.22.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db/src/fs-shim.js"},{"name":"orbit-db-cache","loc":{"line":4,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db/src/migrations/0.21-0.22.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db-cache/src/Cache.js"},{"name":"logplease","loc":{"line":6,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/orbit-db/src/migrations/0.21-0.22.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/logplease/src/index.js"}],"generated":{"js":"const e=require(\"path\"),t=require(\"../fs-shim\"),o=require(\"orbit-db-cache\"),a=require(\"logplease\"),c=a.create(\"orbit-db\");async function r(a,r,i){let s,n=a.caches[r.directory]?a.caches[r.directory].cache:null;if(!n){const c=(e.posix||e).join(a.directory,i.root,i.path);if(t&&t.existsSync&&!t.existsSync(c))return;s=await a.storage.createStore(c),n=new o(s)}if(!(await n.get(\"_localHeads\")))return;const l=i.toString();c.debug(\"Attempting to migrate from old cache location\");const u=[\"_remoteHeads\",\"_localHeads\",\"snapshot\",\"queue\"];for(const t in u)try{const o=e.join(l,u[t]),a=await n.get(u[t]);a&&await r.cache.set(o,a)}catch(d){c.debug(d.message)}await r.cache.set(e.join(l,\"_manifest\"),i.root),s&&await s.close()}a.setLogLevel(\"ERROR\"),module.exports=r;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"path","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"require","original":{"line":1,"column":13},"generated":{"line":1,"column":8}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":1,"column":21},"generated":{"line":1,"column":16}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"fs","original":{"line":2,"column":6},"generated":{"line":1,"column":24}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"require","original":{"line":2,"column":11},"generated":{"line":1,"column":26}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":2,"column":19},"generated":{"line":1,"column":34}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"Cache","original":{"line":4,"column":6},"generated":{"line":1,"column":48}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"require","original":{"line":4,"column":14},"generated":{"line":1,"column":50}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":4,"column":22},"generated":{"line":1,"column":58}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"Logger","original":{"line":6,"column":6},"generated":{"line":1,"column":76}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"require","original":{"line":6,"column":15},"generated":{"line":1,"column":78}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":6,"column":23},"generated":{"line":1,"column":86}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"logger","original":{"line":7,"column":6},"generated":{"line":1,"column":99}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"Logger","original":{"line":7,"column":15},"generated":{"line":1,"column":101}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"create","original":{"line":7,"column":22},"generated":{"line":1,"column":103}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":7,"column":29},"generated":{"line":1,"column":110}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":10,"column":0},"generated":{"line":1,"column":122}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"migrate","original":{"line":10,"column":15},"generated":{"line":1,"column":137}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"OrbitDB","original":{"line":10,"column":24},"generated":{"line":1,"column":139}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"options","original":{"line":10,"column":33},"generated":{"line":1,"column":141}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"dbAddress","original":{"line":10,"column":42},"generated":{"line":1,"column":143}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldCache","original":{"line":11,"column":6},"generated":{"line":1,"column":146}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldStore","original":{"line":12,"column":6},"generated":{"line":1,"column":150}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldCache","original":{"line":11,"column":6},"generated":{"line":1,"column":152}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"OrbitDB","original":{"line":11,"column":17},"generated":{"line":1,"column":154}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"caches","original":{"line":11,"column":25},"generated":{"line":1,"column":156}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"options","original":{"line":11,"column":32},"generated":{"line":1,"column":163}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"directory","original":{"line":11,"column":40},"generated":{"line":1,"column":165}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"OrbitDB","original":{"line":11,"column":53},"generated":{"line":1,"column":176}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"caches","original":{"line":11,"column":61},"generated":{"line":1,"column":178}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"options","original":{"line":11,"column":68},"generated":{"line":1,"column":185}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"directory","original":{"line":11,"column":76},"generated":{"line":1,"column":187}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"cache","original":{"line":11,"column":87},"generated":{"line":1,"column":198}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":11,"column":95},"generated":{"line":1,"column":204}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":14,"column":6},"generated":{"line":1,"column":209}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldCache","original":{"line":14,"column":7},"generated":{"line":1,"column":213}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":14,"column":17},"generated":{"line":1,"column":215}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"addr","original":{"line":15,"column":10},"generated":{"line":1,"column":216}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"addr","original":{"line":15,"column":10},"generated":{"line":1,"column":222}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"path","original":{"line":15,"column":18},"generated":{"line":1,"column":225}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"posix","original":{"line":15,"column":23},"generated":{"line":1,"column":227}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"path","original":{"line":15,"column":32},"generated":{"line":1,"column":234}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"join","original":{"line":15,"column":38},"generated":{"line":1,"column":237}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"OrbitDB","original":{"line":15,"column":43},"generated":{"line":1,"column":242}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"directory","original":{"line":15,"column":51},"generated":{"line":1,"column":244}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"dbAddress","original":{"line":15,"column":62},"generated":{"line":1,"column":254}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"root","original":{"line":15,"column":72},"generated":{"line":1,"column":256}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"dbAddress","original":{"line":15,"column":78},"generated":{"line":1,"column":261}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"path","original":{"line":15,"column":88},"generated":{"line":1,"column":263}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"fs","original":{"line":16,"column":8},"generated":{"line":1,"column":269}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"fs","original":{"line":16,"column":8},"generated":{"line":1,"column":272}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"fs","original":{"line":16,"column":14},"generated":{"line":1,"column":275}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"existsSync","original":{"line":16,"column":17},"generated":{"line":1,"column":277}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"fs","original":{"line":16,"column":32},"generated":{"line":1,"column":290}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"existsSync","original":{"line":16,"column":35},"generated":{"line":1,"column":292}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"addr","original":{"line":16,"column":46},"generated":{"line":1,"column":303}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":16,"column":53},"generated":{"line":1,"column":306}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldStore","original":{"line":17,"column":4},"generated":{"line":1,"column":313}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"OrbitDB","original":{"line":17,"column":21},"generated":{"line":1,"column":321}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"storage","original":{"line":17,"column":29},"generated":{"line":1,"column":323}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"createStore","original":{"line":17,"column":37},"generated":{"line":1,"column":331}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"addr","original":{"line":17,"column":49},"generated":{"line":1,"column":343}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldCache","original":{"line":18,"column":4},"generated":{"line":1,"column":346}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":18,"column":15},"generated":{"line":1,"column":348}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"Cache","original":{"line":18,"column":19},"generated":{"line":1,"column":352}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldStore","original":{"line":18,"column":25},"generated":{"line":1,"column":354}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":21,"column":6},"generated":{"line":1,"column":357}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldCache","original":{"line":20,"column":28},"generated":{"line":1,"column":368}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"get","original":{"line":20,"column":37},"generated":{"line":1,"column":370}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":20,"column":41},"generated":{"line":1,"column":374}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":21,"column":20},"generated":{"line":1,"column":390}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"keyRoot","original":{"line":23,"column":8},"generated":{"line":1,"column":397}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"keyRoot","original":{"line":23,"column":8},"generated":{"line":1,"column":403}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"dbAddress","original":{"line":23,"column":18},"generated":{"line":1,"column":405}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"toString","original":{"line":23,"column":28},"generated":{"line":1,"column":407}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"logger","original":{"line":24,"column":2},"generated":{"line":1,"column":418}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"debug","original":{"line":24,"column":9},"generated":{"line":1,"column":420}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":24,"column":15},"generated":{"line":1,"column":426}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"migrationKeys","original":{"line":25,"column":8},"generated":{"line":1,"column":475}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"migrationKeys","original":{"line":25,"column":8},"generated":{"line":1,"column":481}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":25,"column":24},"generated":{"line":1,"column":483}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":26,"column":4},"generated":{"line":1,"column":484}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":27,"column":4},"generated":{"line":1,"column":499}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":28,"column":4},"generated":{"line":1,"column":513}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":29,"column":4},"generated":{"line":1,"column":524}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":32,"column":7},"generated":{"line":1,"column":533}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":32,"column":7},"generated":{"line":1,"column":537}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"i","original":{"line":32,"column":13},"generated":{"line":1,"column":543}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"migrationKeys","original":{"line":32,"column":18},"generated":{"line":1,"column":548}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":33,"column":8},"generated":{"line":1,"column":550}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"key","original":{"line":34,"column":12},"generated":{"line":1,"column":554}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"key","original":{"line":34,"column":12},"generated":{"line":1,"column":560}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"path","original":{"line":34,"column":18},"generated":{"line":1,"column":562}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"join","original":{"line":34,"column":23},"generated":{"line":1,"column":564}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"keyRoot","original":{"line":34,"column":28},"generated":{"line":1,"column":569}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"migrationKeys","original":{"line":34,"column":37},"generated":{"line":1,"column":571}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"i","original":{"line":34,"column":51},"generated":{"line":1,"column":573}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"val","original":{"line":35,"column":12},"generated":{"line":1,"column":577}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldCache","original":{"line":35,"column":24},"generated":{"line":1,"column":585}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"get","original":{"line":35,"column":33},"generated":{"line":1,"column":587}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"migrationKeys","original":{"line":35,"column":37},"generated":{"line":1,"column":591}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"i","original":{"line":35,"column":51},"generated":{"line":1,"column":593}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"val","original":{"line":36,"column":10},"generated":{"line":1,"column":597}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"options","original":{"line":36,"column":21},"generated":{"line":1,"column":606}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"cache","original":{"line":36,"column":29},"generated":{"line":1,"column":608}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"set","original":{"line":36,"column":35},"generated":{"line":1,"column":614}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"key","original":{"line":36,"column":39},"generated":{"line":1,"column":618}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"val","original":{"line":36,"column":44},"generated":{"line":1,"column":620}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":37,"column":6},"generated":{"line":1,"column":623}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"e","original":{"line":37,"column":13},"generated":{"line":1,"column":629}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"logger","original":{"line":38,"column":6},"generated":{"line":1,"column":632}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"debug","original":{"line":38,"column":13},"generated":{"line":1,"column":634}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"e","original":{"line":38,"column":19},"generated":{"line":1,"column":640}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"message","original":{"line":38,"column":21},"generated":{"line":1,"column":642}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"options","original":{"line":41,"column":8},"generated":{"line":1,"column":657}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"cache","original":{"line":41,"column":16},"generated":{"line":1,"column":659}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"set","original":{"line":41,"column":22},"generated":{"line":1,"column":665}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"path","original":{"line":41,"column":26},"generated":{"line":1,"column":669}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"join","original":{"line":41,"column":31},"generated":{"line":1,"column":671}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"keyRoot","original":{"line":41,"column":36},"generated":{"line":1,"column":676}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":41,"column":45},"generated":{"line":1,"column":678}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"dbAddress","original":{"line":41,"column":59},"generated":{"line":1,"column":691}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"root","original":{"line":41,"column":69},"generated":{"line":1,"column":693}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldStore","original":{"line":42,"column":6},"generated":{"line":1,"column":699}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"oldStore","original":{"line":42,"column":22},"generated":{"line":1,"column":708}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"close","original":{"line":42,"column":31},"generated":{"line":1,"column":710}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"Logger","original":{"line":8,"column":0},"generated":{"line":1,"column":718}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"setLogLevel","original":{"line":8,"column":7},"generated":{"line":1,"column":720}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","original":{"line":8,"column":19},"generated":{"line":1,"column":732}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"module","original":{"line":45,"column":0},"generated":{"line":1,"column":741}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"exports","original":{"line":45,"column":7},"generated":{"line":1,"column":748}},{"source":"node_modules/orbit-db/src/migrations/0.21-0.22.js","name":"migrate","original":{"line":45,"column":17},"generated":{"line":1,"column":756}}],"sources":{"node_modules/orbit-db/src/migrations/0.21-0.22.js":"const path = require('path')\nconst fs = require('../fs-shim')\n\nconst Cache = require('orbit-db-cache')\n\nconst Logger = require('logplease')\nconst logger = Logger.create('orbit-db')\nLogger.setLogLevel('ERROR')\n\nasync function migrate (OrbitDB, options, dbAddress) {\n  let oldCache = OrbitDB.caches[options.directory] ? OrbitDB.caches[options.directory].cache : null\n  let oldStore\n\n  if (!oldCache) {\n    const addr = (path.posix || path).join(OrbitDB.directory, dbAddress.root, dbAddress.path)\n    if (fs && fs.existsSync && !fs.existsSync(addr)) return\n    oldStore = await OrbitDB.storage.createStore(addr)\n    oldCache = new Cache(oldStore)\n  }\n  const _localHeads = await oldCache.get('_localHeads')\n  if (!_localHeads) return\n\n  const keyRoot = dbAddress.toString()\n  logger.debug('Attempting to migrate from old cache location')\n  const migrationKeys = [\n    '_remoteHeads',\n    '_localHeads',\n    'snapshot',\n    'queue'\n  ]\n\n  for (const i in migrationKeys) {\n    try {\n      const key = path.join(keyRoot, migrationKeys[i])\n      const val = await oldCache.get(migrationKeys[i])\n      if (val) await options.cache.set(key, val)\n    } catch (e) {\n      logger.debug(e.message)\n    }\n  }\n  await options.cache.set(path.join(keyRoot, '_manifest'), dbAddress.root)\n  if (oldStore) await oldStore.close()\n}\n\nmodule.exports = migrate\n"},"lineCount":null}},"error":null,"hash":"7719d3b7320b97e9c5b022adb92cbd68","cacheData":{"env":{}}}