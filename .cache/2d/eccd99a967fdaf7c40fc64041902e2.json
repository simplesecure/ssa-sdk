{"id":"MWr5","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/crdts/package.json","includedInParent":true,"mtime":1582579778515},{"name":"./utils","loc":{"line":3,"column":30},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/crdts/src/G-Counter.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/crdts/src/utils.js"}],"generated":{"js":"\"use strict\";const{deepEqual:t}=require(\"./utils\"),s=(t,s)=>t+s;class e{constructor(t,s){this.id=t,this._counters=s||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}get value(){return Object.values(this._counters).reduce(s,0)}increment(t){t&&t<1||(null==t&&(t=1),this._counters[this.id]=this._counters[this.id]+t)}merge(t){Object.entries(t._counters).forEach(([t,s])=>{this._counters[t]=Math.max(this._counters[t]||0,s)})}toJSON(){return{id:this.id,counters:this._counters}}isEqual(t){return e.isEqual(this,t)}static from(t){return new e(t.id,t.counters)}static isEqual(s,e){return s.id===e.id&&t(s._counters,e._counters)}}module.exports=e;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":3,"column":0},"generated":{"line":1,"column":19}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":3,"column":0},"generated":{"line":1,"column":29}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":3,"column":0},"generated":{"line":1,"column":32}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":3,"column":0},"generated":{"line":1,"column":40}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":4,"column":0},"generated":{"line":1,"column":51}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":4,"column":0},"generated":{"line":1,"column":53}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":4,"column":0},"generated":{"line":1,"column":54}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":4,"column":0},"generated":{"line":1,"column":56}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":4,"column":0},"generated":{"line":1,"column":60}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":4,"column":0},"generated":{"line":1,"column":62}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":16,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":16,"column":0},"generated":{"line":1,"column":70}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":17,"column":0},"generated":{"line":1,"column":72}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":17,"column":0},"generated":{"line":1,"column":84}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":17,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":18,"column":0},"generated":{"line":1,"column":89}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":18,"column":0},"generated":{"line":1,"column":94}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":18,"column":0},"generated":{"line":1,"column":97}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":19,"column":0},"generated":{"line":1,"column":99}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":19,"column":0},"generated":{"line":1,"column":104}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":19,"column":0},"generated":{"line":1,"column":114}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":19,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":120}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":125}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":135}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":140}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":144}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":149}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":159}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":164}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":168}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":173}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":183}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":188}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":20,"column":0},"generated":{"line":1,"column":192}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":23,"column":0},"generated":{"line":1,"column":194}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":24,"column":0},"generated":{"line":1,"column":206}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":24,"column":0},"generated":{"line":1,"column":213}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":24,"column":0},"generated":{"line":1,"column":220}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":24,"column":0},"generated":{"line":1,"column":227}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":24,"column":0},"generated":{"line":1,"column":232}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":24,"column":0},"generated":{"line":1,"column":243}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":24,"column":0},"generated":{"line":1,"column":250}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":24,"column":0},"generated":{"line":1,"column":252}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":27,"column":0},"generated":{"line":1,"column":255}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":27,"column":0},"generated":{"line":1,"column":265}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":28,"column":0},"generated":{"line":1,"column":268}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":28,"column":0},"generated":{"line":1,"column":271}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":28,"column":0},"generated":{"line":1,"column":273}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":31,"column":0},"generated":{"line":1,"column":277}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":31,"column":0},"generated":{"line":1,"column":283}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":32,"column":0},"generated":{"line":1,"column":287}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":32,"column":0},"generated":{"line":1,"column":289}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":292}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":297}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":307}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":312}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":316}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":321}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":331}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":336}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":34,"column":0},"generated":{"line":1,"column":340}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":37,"column":0},"generated":{"line":1,"column":343}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":37,"column":0},"generated":{"line":1,"column":349}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":39,"column":0},"generated":{"line":1,"column":352}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":39,"column":0},"generated":{"line":1,"column":359}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":39,"column":0},"generated":{"line":1,"column":367}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":39,"column":0},"generated":{"line":1,"column":369}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":39,"column":0},"generated":{"line":1,"column":380}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":39,"column":0},"generated":{"line":1,"column":388}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":39,"column":0},"generated":{"line":1,"column":390}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":39,"column":0},"generated":{"line":1,"column":392}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":398}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":403}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":413}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":416}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":421}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":425}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":430}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":440}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":444}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":41,"column":0},"generated":{"line":1,"column":446}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":45,"column":0},"generated":{"line":1,"column":451}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":46,"column":0},"generated":{"line":1,"column":460}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":46,"column":0},"generated":{"line":1,"column":466}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":47,"column":0},"generated":{"line":1,"column":467}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":47,"column":0},"generated":{"line":1,"column":470}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":47,"column":0},"generated":{"line":1,"column":475}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":48,"column":0},"generated":{"line":1,"column":478}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":48,"column":0},"generated":{"line":1,"column":487}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":48,"column":0},"generated":{"line":1,"column":492}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":52,"column":0},"generated":{"line":1,"column":503}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":52,"column":0},"generated":{"line":1,"column":511}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":53,"column":0},"generated":{"line":1,"column":514}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":53,"column":0},"generated":{"line":1,"column":521}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":53,"column":0},"generated":{"line":1,"column":523}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":53,"column":0},"generated":{"line":1,"column":531}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":53,"column":0},"generated":{"line":1,"column":536}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":56,"column":0},"generated":{"line":1,"column":539}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":56,"column":0},"generated":{"line":1,"column":551}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":57,"column":0},"generated":{"line":1,"column":554}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":57,"column":0},"generated":{"line":1,"column":561}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":57,"column":0},"generated":{"line":1,"column":565}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":57,"column":0},"generated":{"line":1,"column":567}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":57,"column":0},"generated":{"line":1,"column":569}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":57,"column":0},"generated":{"line":1,"column":572}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":57,"column":0},"generated":{"line":1,"column":574}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":60,"column":0},"generated":{"line":1,"column":584}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":60,"column":0},"generated":{"line":1,"column":599}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":60,"column":0},"generated":{"line":1,"column":601}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":61,"column":0},"generated":{"line":1,"column":604}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":61,"column":0},"generated":{"line":1,"column":611}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":61,"column":0},"generated":{"line":1,"column":613}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":61,"column":0},"generated":{"line":1,"column":618}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":61,"column":0},"generated":{"line":1,"column":620}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":64,"column":0},"generated":{"line":1,"column":624}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":64,"column":0},"generated":{"line":1,"column":626}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":64,"column":0},"generated":{"line":1,"column":628}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":64,"column":0},"generated":{"line":1,"column":638}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":64,"column":0},"generated":{"line":1,"column":640}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":68,"column":0},"generated":{"line":1,"column":652}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":68,"column":0},"generated":{"line":1,"column":659}},{"source":"node_modules/crdts/src/G-Counter.js","original":{"line":68,"column":0},"generated":{"line":1,"column":667}}],"sources":{"node_modules/crdts/src/G-Counter.js":"'use strict'\n\nconst { deepEqual } = require('./utils')\nconst sum = (acc, val) => acc + val\n\n/**\n * G-Counter\n *\n * Operation-based Increment-Only Counter CRDT\n *\n * Sources: \n * \"A comprehensive study of Convergent and Commutative Replicated Data Types\"\n * http://hal.upmc.fr/inria-00555588/document, \"3.1.1 Op-based counter and 3.1.2  State-based increment-only Counter (G-Counter)\"\n */\n\nclass GCounter {\n  constructor (id, counter) {\n    this.id = id\n    this._counters = counter ? counter : {}\n    this._counters[this.id] = this._counters[this.id] ? this._counters[this.id] : 0\n  }\n\n  get value () {\n    return Object.values(this._counters).reduce(sum, 0)\n  }\n\n  increment (amount) {\n    if (amount && amount < 1) \n      return\n\n    if (amount === undefined || amount === null)\n      amount = 1\n\n    this._counters[this.id] = this._counters[this.id] + amount\n  }\n\n  merge (other) {\n    // Go through each counter in the other counter\n    Object.entries(other._counters).forEach(([id, value]) => {\n      // Take the maximum of the counter value we have or the counter value they have\n      this._counters[id] = Math.max(this._counters[id] || 0, value)\n    })\n  }\n\n  toJSON () {\n    return { \n      id: this.id, \n      counters: this._counters \n    }\n  }\n\n  isEqual (other) {\n    return GCounter.isEqual(this, other)\n  }\n\n  static from (json) {\n    return new GCounter(json.id, json.counters)\n  }\n\n  static isEqual (a, b) {\n    if(a.id !== b.id)\n      return false\n\n    return deepEqual(a._counters, b._counters)\n  }\n}\n\nmodule.exports = GCounter\n"},"lineCount":null}},"error":null,"hash":"106fb2bdb88d8f06c0c2d66120f05119","cacheData":{"env":{}}}