{"id":"vhAx","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/package.json","includedInParent":true,"mtime":1582579780031},{"name":"../connection","loc":{"line":3,"column":30},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/connection/index.js"},{"name":"../errors","loc":{"line":4,"column":45},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/errors.js"},{"name":"async/nextTick","loc":{"line":5,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/async/nextTick.js"},{"name":"once","loc":{"line":6,"column":21},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/once/once.js"},{"name":"debug","loc":{"line":7,"column":22},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"}],"generated":{"js":"\"use strict\";const t=require(\"../connection\"),{DIAL_ABORTED:i,ERR_DENIED:e}=require(\"../errors\"),n=require(\"async/nextTick\"),s=require(\"once\"),o=require(\"debug\"),r=o(\"libp2p:switch:dial\");function h({protocol:t,connection:i,callback:e}){if(!t)return e();i.shake(t,(t,n)=>{if(!n)return e(t);n.setPeerInfo(i.theirPeerInfo),e(null,n)})}r.error=o(\"libp2p:switch:dial:error\");class c{constructor(t,i,e){this.id=t,this.switch=i,this._queue=[],this.denylisted=null,this.denylistCount=0,this.isRunning=!1,this.onStopped=e}get length(){return this._queue.length}add(t,i,s){if(!this.isDialAllowed())return n(s,e());this._queue.push({protocol:t,useFSM:i,callback:s})}isDialAllowed(){return!this.denylisted||Date.now()>this.denylisted&&(this.denylisted=null,!0)}start(){return!this.isRunning&&(r(\"starting dial queue to %s\",this.id),this.isRunning=!0,this._run(),!0)}stop(){this.isRunning&&(r(\"stopping dial queue to %s\",this.id),this.isRunning=!1,this.onStopped(this.id))}abort(){for(;this.length>0;){this._queue.shift().callback(i())}this.stop()}denylist(){if(this.denylistCount++,this.denylistCount>=this.switch.dialer.DENY_ATTEMPTS)return void(this.denylisted=1/0);let t=this.switch.dialer.DENY_TTL*Math.pow(this.denylistCount,3);const i=.9*t,e=1.1*t;t=Math.floor(Math.random()*(e-i)+i),this.denylisted=Date.now()+t,this.abort()}_getOrCreateConnection(i){let e=this.switch.connection.getOne(this.id),n=!1;return e||(e=new t({_switch:this.switch,peerInfo:i,muxer:null,conn:null}),this.switch.connection.add(e),e.once(\"connected\",()=>e.protect()),e.once(\"private\",()=>e.encrypt()),e.once(\"encrypted\",()=>e.upgrade()),n=!0),{connectionFSM:e,didCreate:n}}_run(){if(this.length<1||!this.isRunning)return r(\"stopping the queue for %s\",this.id),this.stop();const t=s(()=>{r(\"starting next dial to %s\",this.id),this._run()}),i=this.switch._peerBook.get(this.id),e=this._queue.shift(),{connectionFSM:o,didCreate:c}=this._getOrCreateConnection(i);if(e.useFSM&&n(e.callback,null,o),[\"MUXED\",\"CONNECTED\"].includes(o.getState()))return e.connection=o,h(e),void t();o.once(\"error\",t=>{e.callback(t),i.protocols.size>0&&i.isConnected()||this.denylist()}),o.once(\"close\",()=>{t()}),o.once(\"muxed\",()=>{this.denylistCount=0,e.connection=o,h(e),t()}),o.once(\"unmuxed\",()=>{this.denylistCount=0,e.connection=o,h(e),t()}),c&&o.dial()}}module.exports=c;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ConnectionFSM","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"require","original":{"line":3,"column":22},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":3,"column":30},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":4,"column":6},"generated":{"line":1,"column":47}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"DIAL_ABORTED","original":{"line":4,"column":8},"generated":{"line":1,"column":60}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":4,"column":6},"generated":{"line":1,"column":62}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ERR_DENIED","original":{"line":4,"column":22},"generated":{"line":1,"column":73}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"require","original":{"line":4,"column":37},"generated":{"line":1,"column":76}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":4,"column":45},"generated":{"line":1,"column":84}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"nextTick","original":{"line":5,"column":6},"generated":{"line":1,"column":97}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"require","original":{"line":5,"column":17},"generated":{"line":1,"column":99}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":5,"column":25},"generated":{"line":1,"column":107}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":6,"column":6},"generated":{"line":1,"column":125}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"require","original":{"line":6,"column":13},"generated":{"line":1,"column":127}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":6,"column":21},"generated":{"line":1,"column":135}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"debug","original":{"line":7,"column":6},"generated":{"line":1,"column":143}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"require","original":{"line":7,"column":14},"generated":{"line":1,"column":145}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":7,"column":22},"generated":{"line":1,"column":153}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"log","original":{"line":8,"column":6},"generated":{"line":1,"column":162}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"debug","original":{"line":8,"column":12},"generated":{"line":1,"column":164}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":8,"column":18},"generated":{"line":1,"column":166}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":40,"column":0},"generated":{"line":1,"column":188}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"createConnectionWithProtocol","original":{"line":40,"column":9},"generated":{"line":1,"column":197}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":40,"column":39},"generated":{"line":1,"column":200}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"protocol","original":{"line":40,"column":41},"generated":{"line":1,"column":209}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":40,"column":39},"generated":{"line":1,"column":211}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connection","original":{"line":40,"column":51},"generated":{"line":1,"column":222}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":40,"column":39},"generated":{"line":1,"column":224}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":40,"column":63},"generated":{"line":1,"column":233}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":41,"column":6},"generated":{"line":1,"column":237}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"protocol","original":{"line":41,"column":7},"generated":{"line":1,"column":241}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":42,"column":11},"generated":{"line":1,"column":243}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":42,"column":11},"generated":{"line":1,"column":250}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connection","original":{"line":44,"column":2},"generated":{"line":1,"column":254}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"shake","original":{"line":44,"column":13},"generated":{"line":1,"column":256}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"protocol","original":{"line":44,"column":19},"generated":{"line":1,"column":262}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":44,"column":29},"generated":{"line":1,"column":264}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"err","original":{"line":44,"column":30},"generated":{"line":1,"column":265}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"conn","original":{"line":44,"column":35},"generated":{"line":1,"column":267}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":45,"column":8},"generated":{"line":1,"column":272}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"conn","original":{"line":45,"column":9},"generated":{"line":1,"column":276}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":46,"column":13},"generated":{"line":1,"column":278}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":46,"column":13},"generated":{"line":1,"column":285}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"err","original":{"line":46,"column":22},"generated":{"line":1,"column":287}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"conn","original":{"line":49,"column":4},"generated":{"line":1,"column":290}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"setPeerInfo","original":{"line":49,"column":9},"generated":{"line":1,"column":292}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connection","original":{"line":49,"column":21},"generated":{"line":1,"column":304}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"theirPeerInfo","original":{"line":49,"column":32},"generated":{"line":1,"column":306}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":50,"column":4},"generated":{"line":1,"column":321}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":50,"column":13},"generated":{"line":1,"column":323}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"conn","original":{"line":50,"column":19},"generated":{"line":1,"column":328}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"log","original":{"line":9,"column":0},"generated":{"line":1,"column":333}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"error","original":{"line":9,"column":4},"generated":{"line":1,"column":335}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"debug","original":{"line":9,"column":12},"generated":{"line":1,"column":341}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":9,"column":18},"generated":{"line":1,"column":343}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":60,"column":0},"generated":{"line":1,"column":371}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Queue","original":{"line":60,"column":6},"generated":{"line":1,"column":377}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"constructor","original":{"line":67,"column":2},"generated":{"line":1,"column":379}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerId","original":{"line":67,"column":15},"generated":{"line":1,"column":391}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_switch","original":{"line":67,"column":23},"generated":{"line":1,"column":393}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"onStopped","original":{"line":67,"column":32},"generated":{"line":1,"column":395}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":68,"column":9},"generated":{"line":1,"column":398}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":68,"column":9},"generated":{"line":1,"column":403}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerId","original":{"line":68,"column":14},"generated":{"line":1,"column":406}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":69,"column":9},"generated":{"line":1,"column":408}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":69,"column":9},"generated":{"line":1,"column":413}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_switch","original":{"line":69,"column":18},"generated":{"line":1,"column":420}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_queue","original":{"line":70,"column":9},"generated":{"line":1,"column":422}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_queue","original":{"line":70,"column":9},"generated":{"line":1,"column":427}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":70,"column":18},"generated":{"line":1,"column":434}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":71,"column":9},"generated":{"line":1,"column":437}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":71,"column":9},"generated":{"line":1,"column":442}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":71,"column":22},"generated":{"line":1,"column":453}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":72,"column":9},"generated":{"line":1,"column":458}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":72,"column":9},"generated":{"line":1,"column":463}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":72,"column":25},"generated":{"line":1,"column":477}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":73,"column":9},"generated":{"line":1,"column":479}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":73,"column":9},"generated":{"line":1,"column":484}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":73,"column":21},"generated":{"line":1,"column":495}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"onStopped","original":{"line":74,"column":9},"generated":{"line":1,"column":497}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"onStopped","original":{"line":74,"column":9},"generated":{"line":1,"column":502}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"onStopped","original":{"line":74,"column":21},"generated":{"line":1,"column":512}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"length","original":{"line":77,"column":6},"generated":{"line":1,"column":514}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":78,"column":11},"generated":{"line":1,"column":527}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":78,"column":11},"generated":{"line":1,"column":534}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_queue","original":{"line":78,"column":16},"generated":{"line":1,"column":539}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"length","original":{"line":78,"column":23},"generated":{"line":1,"column":546}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"add","original":{"line":88,"column":2},"generated":{"line":1,"column":553}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"protocol","original":{"line":88,"column":7},"generated":{"line":1,"column":557}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"useFSM","original":{"line":88,"column":17},"generated":{"line":1,"column":559}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":88,"column":25},"generated":{"line":1,"column":561}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":89,"column":8},"generated":{"line":1,"column":564}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":89,"column":9},"generated":{"line":1,"column":568}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isDialAllowed","original":{"line":89,"column":14},"generated":{"line":1,"column":573}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"nextTick","original":{"line":90,"column":13},"generated":{"line":1,"column":589}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"nextTick","original":{"line":90,"column":13},"generated":{"line":1,"column":596}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":90,"column":22},"generated":{"line":1,"column":598}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ERR_DENIED","original":{"line":90,"column":32},"generated":{"line":1,"column":600}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_queue","original":{"line":92,"column":9},"generated":{"line":1,"column":605}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_queue","original":{"line":92,"column":9},"generated":{"line":1,"column":610}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"push","original":{"line":92,"column":16},"generated":{"line":1,"column":617}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":92,"column":21},"generated":{"line":1,"column":622}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"protocol","original":{"line":92,"column":23},"generated":{"line":1,"column":623}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"protocol","original":{"line":92,"column":23},"generated":{"line":1,"column":632}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"useFSM","original":{"line":92,"column":33},"generated":{"line":1,"column":634}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"useFSM","original":{"line":92,"column":33},"generated":{"line":1,"column":641}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":92,"column":41},"generated":{"line":1,"column":643}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":92,"column":41},"generated":{"line":1,"column":652}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isDialAllowed","original":{"line":99,"column":2},"generated":{"line":1,"column":656}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":100,"column":8},"generated":{"line":1,"column":672}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":100,"column":8},"generated":{"line":1,"column":679}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":100,"column":13},"generated":{"line":1,"column":684}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Date","original":{"line":102,"column":10},"generated":{"line":1,"column":696}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"now","original":{"line":102,"column":15},"generated":{"line":1,"column":701}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":102,"column":23},"generated":{"line":1,"column":707}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":102,"column":28},"generated":{"line":1,"column":712}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":103,"column":13},"generated":{"line":1,"column":725}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":103,"column":13},"generated":{"line":1,"column":730}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":103,"column":26},"generated":{"line":1,"column":741}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":104,"column":15},"generated":{"line":1,"column":747}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"start","original":{"line":117,"column":2},"generated":{"line":1,"column":750}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":118,"column":8},"generated":{"line":1,"column":758}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":118,"column":9},"generated":{"line":1,"column":765}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":118,"column":14},"generated":{"line":1,"column":770}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"log","original":{"line":119,"column":6},"generated":{"line":1,"column":782}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":119,"column":10},"generated":{"line":1,"column":784}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":119,"column":39},"generated":{"line":1,"column":812}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":119,"column":44},"generated":{"line":1,"column":817}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":120,"column":11},"generated":{"line":1,"column":821}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":120,"column":11},"generated":{"line":1,"column":826}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":120,"column":23},"generated":{"line":1,"column":837}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_run","original":{"line":121,"column":11},"generated":{"line":1,"column":839}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_run","original":{"line":121,"column":11},"generated":{"line":1,"column":844}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":122,"column":13},"generated":{"line":1,"column":852}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"stop","original":{"line":130,"column":2},"generated":{"line":1,"column":855}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":131,"column":8},"generated":{"line":1,"column":862}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":131,"column":13},"generated":{"line":1,"column":867}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"log","original":{"line":132,"column":6},"generated":{"line":1,"column":879}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":132,"column":10},"generated":{"line":1,"column":881}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":132,"column":39},"generated":{"line":1,"column":909}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":132,"column":44},"generated":{"line":1,"column":914}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":133,"column":11},"generated":{"line":1,"column":918}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":133,"column":11},"generated":{"line":1,"column":923}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":133,"column":23},"generated":{"line":1,"column":934}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"onStopped","original":{"line":134,"column":11},"generated":{"line":1,"column":936}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"onStopped","original":{"line":134,"column":11},"generated":{"line":1,"column":941}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":134,"column":21},"generated":{"line":1,"column":951}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":134,"column":26},"generated":{"line":1,"column":956}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"abort","original":{"line":141,"column":2},"generated":{"line":1,"column":961}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":142,"column":11},"generated":{"line":1,"column":969}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":142,"column":11},"generated":{"line":1,"column":974}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"length","original":{"line":142,"column":16},"generated":{"line":1,"column":979}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":142,"column":25},"generated":{"line":1,"column":986}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":142,"column":28},"generated":{"line":1,"column":989}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":143,"column":19},"generated":{"line":1,"column":990}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_queue","original":{"line":143,"column":24},"generated":{"line":1,"column":995}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"shift","original":{"line":143,"column":31},"generated":{"line":1,"column":1002}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":144,"column":11},"generated":{"line":1,"column":1010}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"DIAL_ABORTED","original":{"line":144,"column":20},"generated":{"line":1,"column":1019}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"stop","original":{"line":146,"column":9},"generated":{"line":1,"column":1024}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"stop","original":{"line":146,"column":9},"generated":{"line":1,"column":1029}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylist","original":{"line":153,"column":2},"generated":{"line":1,"column":1036}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":156,"column":8},"generated":{"line":1,"column":1047}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":154,"column":9},"generated":{"line":1,"column":1050}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":154,"column":9},"generated":{"line":1,"column":1055}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":156,"column":8},"generated":{"line":1,"column":1071}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":156,"column":13},"generated":{"line":1,"column":1076}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":156,"column":30},"generated":{"line":1,"column":1091}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":156,"column":35},"generated":{"line":1,"column":1096}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"dialer","original":{"line":156,"column":42},"generated":{"line":1,"column":1103}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"DENY_ATTEMPTS","original":{"line":156,"column":49},"generated":{"line":1,"column":1110}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":158,"column":6},"generated":{"line":1,"column":1124}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":157,"column":11},"generated":{"line":1,"column":1136}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":157,"column":11},"generated":{"line":1,"column":1141}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Infinity","original":{"line":157,"column":24},"generated":{"line":1,"column":1152}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Infinity","original":{"line":157,"column":24},"generated":{"line":1,"column":1154}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ttl","original":{"line":161,"column":8},"generated":{"line":1,"column":1157}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ttl","original":{"line":161,"column":8},"generated":{"line":1,"column":1161}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":161,"column":14},"generated":{"line":1,"column":1163}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":161,"column":19},"generated":{"line":1,"column":1168}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"dialer","original":{"line":161,"column":26},"generated":{"line":1,"column":1175}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"DENY_TTL","original":{"line":161,"column":33},"generated":{"line":1,"column":1182}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Math","original":{"line":161,"column":44},"generated":{"line":1,"column":1191}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"pow","original":{"line":161,"column":49},"generated":{"line":1,"column":1196}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":161,"column":53},"generated":{"line":1,"column":1200}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":161,"column":58},"generated":{"line":1,"column":1205}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":161,"column":73},"generated":{"line":1,"column":1219}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"minTTL","original":{"line":162,"column":10},"generated":{"line":1,"column":1222}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"minTTL","original":{"line":162,"column":10},"generated":{"line":1,"column":1228}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":162,"column":25},"generated":{"line":1,"column":1230}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ttl","original":{"line":162,"column":19},"generated":{"line":1,"column":1233}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"maxTTL","original":{"line":163,"column":10},"generated":{"line":1,"column":1235}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":163,"column":25},"generated":{"line":1,"column":1237}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ttl","original":{"line":163,"column":19},"generated":{"line":1,"column":1241}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ttl","original":{"line":166,"column":4},"generated":{"line":1,"column":1243}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Math","original":{"line":166,"column":10},"generated":{"line":1,"column":1245}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"floor","original":{"line":166,"column":15},"generated":{"line":1,"column":1250}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Math","original":{"line":166,"column":21},"generated":{"line":1,"column":1256}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"random","original":{"line":166,"column":26},"generated":{"line":1,"column":1261}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"maxTTL","original":{"line":166,"column":38},"generated":{"line":1,"column":1271}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"minTTL","original":{"line":166,"column":47},"generated":{"line":1,"column":1273}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"minTTL","original":{"line":166,"column":57},"generated":{"line":1,"column":1276}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":168,"column":9},"generated":{"line":1,"column":1279}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylisted","original":{"line":168,"column":9},"generated":{"line":1,"column":1284}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Date","original":{"line":168,"column":22},"generated":{"line":1,"column":1295}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"now","original":{"line":168,"column":27},"generated":{"line":1,"column":1300}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ttl","original":{"line":168,"column":35},"generated":{"line":1,"column":1306}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"abort","original":{"line":169,"column":9},"generated":{"line":1,"column":1308}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"abort","original":{"line":169,"column":9},"generated":{"line":1,"column":1313}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_getOrCreateConnection","original":{"line":184,"column":2},"generated":{"line":1,"column":1321}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerInfo","original":{"line":184,"column":26},"generated":{"line":1,"column":1344}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":185,"column":8},"generated":{"line":1,"column":1347}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":185,"column":8},"generated":{"line":1,"column":1351}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":185,"column":24},"generated":{"line":1,"column":1353}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":185,"column":29},"generated":{"line":1,"column":1358}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connection","original":{"line":185,"column":36},"generated":{"line":1,"column":1365}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"getOne","original":{"line":185,"column":47},"generated":{"line":1,"column":1376}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":185,"column":54},"generated":{"line":1,"column":1383}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":185,"column":59},"generated":{"line":1,"column":1388}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"didCreate","original":{"line":186,"column":8},"generated":{"line":1,"column":1392}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":186,"column":20},"generated":{"line":1,"column":1395}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":206,"column":11},"generated":{"line":1,"column":1397}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":188,"column":9},"generated":{"line":1,"column":1404}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":189,"column":6},"generated":{"line":1,"column":1408}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":189,"column":22},"generated":{"line":1,"column":1410}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"ConnectionFSM","original":{"line":189,"column":26},"generated":{"line":1,"column":1414}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":189,"column":40},"generated":{"line":1,"column":1416}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_switch","original":{"line":190,"column":8},"generated":{"line":1,"column":1417}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":190,"column":17},"generated":{"line":1,"column":1425}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":190,"column":22},"generated":{"line":1,"column":1430}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerInfo","original":{"line":191,"column":8},"generated":{"line":1,"column":1437}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerInfo","original":{"line":191,"column":8},"generated":{"line":1,"column":1446}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"muxer","original":{"line":192,"column":8},"generated":{"line":1,"column":1448}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":192,"column":15},"generated":{"line":1,"column":1454}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"conn","original":{"line":193,"column":8},"generated":{"line":1,"column":1459}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":193,"column":14},"generated":{"line":1,"column":1464}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":196,"column":11},"generated":{"line":1,"column":1471}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":196,"column":11},"generated":{"line":1,"column":1476}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connection","original":{"line":196,"column":18},"generated":{"line":1,"column":1483}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"add","original":{"line":196,"column":29},"generated":{"line":1,"column":1494}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":196,"column":33},"generated":{"line":1,"column":1498}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":199,"column":6},"generated":{"line":1,"column":1501}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":199,"column":20},"generated":{"line":1,"column":1503}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":199,"column":25},"generated":{"line":1,"column":1508}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":199,"column":38},"generated":{"line":1,"column":1520}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":199,"column":44},"generated":{"line":1,"column":1524}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"protect","original":{"line":199,"column":58},"generated":{"line":1,"column":1526}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":200,"column":6},"generated":{"line":1,"column":1537}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":200,"column":20},"generated":{"line":1,"column":1539}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":200,"column":25},"generated":{"line":1,"column":1544}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":200,"column":36},"generated":{"line":1,"column":1554}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":200,"column":42},"generated":{"line":1,"column":1558}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"encrypt","original":{"line":200,"column":56},"generated":{"line":1,"column":1560}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":201,"column":6},"generated":{"line":1,"column":1571}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":201,"column":20},"generated":{"line":1,"column":1573}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":201,"column":25},"generated":{"line":1,"column":1578}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":201,"column":38},"generated":{"line":1,"column":1590}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":201,"column":44},"generated":{"line":1,"column":1594}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"upgrade","original":{"line":201,"column":58},"generated":{"line":1,"column":1596}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"didCreate","original":{"line":203,"column":6},"generated":{"line":1,"column":1607}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":203,"column":18},"generated":{"line":1,"column":1610}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":206,"column":11},"generated":{"line":1,"column":1613}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":206,"column":13},"generated":{"line":1,"column":1614}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":206,"column":13},"generated":{"line":1,"column":1628}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"didCreate","original":{"line":206,"column":28},"generated":{"line":1,"column":1630}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"didCreate","original":{"line":206,"column":28},"generated":{"line":1,"column":1640}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_run","original":{"line":214,"column":2},"generated":{"line":1,"column":1643}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":216,"column":8},"generated":{"line":1,"column":1650}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":216,"column":8},"generated":{"line":1,"column":1653}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"length","original":{"line":216,"column":13},"generated":{"line":1,"column":1658}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":216,"column":22},"generated":{"line":1,"column":1665}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":216,"column":28},"generated":{"line":1,"column":1669}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isRunning","original":{"line":216,"column":33},"generated":{"line":1,"column":1674}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":218,"column":13},"generated":{"line":1,"column":1684}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"log","original":{"line":217,"column":6},"generated":{"line":1,"column":1691}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":217,"column":10},"generated":{"line":1,"column":1693}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":217,"column":39},"generated":{"line":1,"column":1721}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":217,"column":44},"generated":{"line":1,"column":1726}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":218,"column":13},"generated":{"line":1,"column":1730}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"stop","original":{"line":218,"column":18},"generated":{"line":1,"column":1735}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"next","original":{"line":221,"column":10},"generated":{"line":1,"column":1742}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"next","original":{"line":221,"column":10},"generated":{"line":1,"column":1748}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":221,"column":17},"generated":{"line":1,"column":1750}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":221,"column":22},"generated":{"line":1,"column":1752}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"log","original":{"line":222,"column":6},"generated":{"line":1,"column":1757}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":222,"column":10},"generated":{"line":1,"column":1759}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":222,"column":38},"generated":{"line":1,"column":1786}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":222,"column":43},"generated":{"line":1,"column":1791}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_run","original":{"line":223,"column":11},"generated":{"line":1,"column":1795}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_run","original":{"line":223,"column":11},"generated":{"line":1,"column":1800}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerInfo","original":{"line":226,"column":10},"generated":{"line":1,"column":1809}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":226,"column":21},"generated":{"line":1,"column":1811}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"switch","original":{"line":226,"column":26},"generated":{"line":1,"column":1816}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_peerBook","original":{"line":226,"column":33},"generated":{"line":1,"column":1823}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"get","original":{"line":226,"column":43},"generated":{"line":1,"column":1833}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":226,"column":47},"generated":{"line":1,"column":1837}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"id","original":{"line":226,"column":52},"generated":{"line":1,"column":1842}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":227,"column":10},"generated":{"line":1,"column":1846}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":227,"column":23},"generated":{"line":1,"column":1848}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_queue","original":{"line":227,"column":28},"generated":{"line":1,"column":1853}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"shift","original":{"line":227,"column":35},"generated":{"line":1,"column":1860}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":228,"column":10},"generated":{"line":1,"column":1869}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":228,"column":12},"generated":{"line":1,"column":1883}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":228,"column":10},"generated":{"line":1,"column":1885}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"didCreate","original":{"line":228,"column":27},"generated":{"line":1,"column":1895}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":228,"column":41},"generated":{"line":1,"column":1898}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"_getOrCreateConnection","original":{"line":228,"column":46},"generated":{"line":1,"column":1903}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerInfo","original":{"line":228,"column":69},"generated":{"line":1,"column":1926}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":236,"column":8},"generated":{"line":1,"column":1929}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":231,"column":8},"generated":{"line":1,"column":1932}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"useFSM","original":{"line":231,"column":19},"generated":{"line":1,"column":1934}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"nextTick","original":{"line":232,"column":6},"generated":{"line":1,"column":1942}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":232,"column":15},"generated":{"line":1,"column":1944}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":232,"column":26},"generated":{"line":1,"column":1946}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":232,"column":36},"generated":{"line":1,"column":1955}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":232,"column":42},"generated":{"line":1,"column":1960}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":236,"column":8},"generated":{"line":1,"column":1963}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":236,"column":9},"generated":{"line":1,"column":1964}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":236,"column":18},"generated":{"line":1,"column":1972}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"includes","original":{"line":236,"column":31},"generated":{"line":1,"column":1985}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":236,"column":40},"generated":{"line":1,"column":1994}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"getState","original":{"line":236,"column":54},"generated":{"line":1,"column":1996}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":240,"column":6},"generated":{"line":1,"column":2008}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":237,"column":6},"generated":{"line":1,"column":2015}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connection","original":{"line":237,"column":17},"generated":{"line":1,"column":2017}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":237,"column":30},"generated":{"line":1,"column":2028}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"createConnectionWithProtocol","original":{"line":238,"column":6},"generated":{"line":1,"column":2030}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":238,"column":35},"generated":{"line":1,"column":2032}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"next","original":{"line":239,"column":6},"generated":{"line":1,"column":2040}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":246,"column":4},"generated":{"line":1,"column":2044}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":246,"column":18},"generated":{"line":1,"column":2046}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":246,"column":23},"generated":{"line":1,"column":2051}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"err","original":{"line":246,"column":33},"generated":{"line":1,"column":2059}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":247,"column":6},"generated":{"line":1,"column":2063}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"callback","original":{"line":247,"column":17},"generated":{"line":1,"column":2065}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"err","original":{"line":247,"column":26},"generated":{"line":1,"column":2074}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerInfo","original":{"line":249,"column":10},"generated":{"line":1,"column":2077}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"protocols","original":{"line":249,"column":19},"generated":{"line":1,"column":2079}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"size","original":{"line":249,"column":29},"generated":{"line":1,"column":2089}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":249,"column":36},"generated":{"line":1,"column":2094}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"peerInfo","original":{"line":249,"column":41},"generated":{"line":1,"column":2097}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"isConnected","original":{"line":249,"column":50},"generated":{"line":1,"column":2099}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylist","original":{"line":252,"column":11},"generated":{"line":1,"column":2114}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylist","original":{"line":252,"column":11},"generated":{"line":1,"column":2119}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":255,"column":4},"generated":{"line":1,"column":2132}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":255,"column":18},"generated":{"line":1,"column":2134}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":255,"column":23},"generated":{"line":1,"column":2139}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":255,"column":32},"generated":{"line":1,"column":2147}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"next","original":{"line":256,"column":6},"generated":{"line":1,"column":2152}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":260,"column":4},"generated":{"line":1,"column":2158}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":260,"column":18},"generated":{"line":1,"column":2160}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":260,"column":23},"generated":{"line":1,"column":2165}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":260,"column":32},"generated":{"line":1,"column":2173}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":261,"column":11},"generated":{"line":1,"column":2178}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":261,"column":11},"generated":{"line":1,"column":2183}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":261,"column":27},"generated":{"line":1,"column":2197}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":262,"column":6},"generated":{"line":1,"column":2199}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connection","original":{"line":262,"column":17},"generated":{"line":1,"column":2201}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":262,"column":30},"generated":{"line":1,"column":2212}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"createConnectionWithProtocol","original":{"line":263,"column":6},"generated":{"line":1,"column":2214}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":263,"column":35},"generated":{"line":1,"column":2216}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"next","original":{"line":264,"column":6},"generated":{"line":1,"column":2219}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":267,"column":4},"generated":{"line":1,"column":2225}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"once","original":{"line":267,"column":18},"generated":{"line":1,"column":2227}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":267,"column":23},"generated":{"line":1,"column":2232}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":267,"column":34},"generated":{"line":1,"column":2242}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":268,"column":11},"generated":{"line":1,"column":2247}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"denylistCount","original":{"line":268,"column":11},"generated":{"line":1,"column":2252}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","original":{"line":268,"column":27},"generated":{"line":1,"column":2266}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":269,"column":6},"generated":{"line":1,"column":2268}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connection","original":{"line":269,"column":17},"generated":{"line":1,"column":2270}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":269,"column":30},"generated":{"line":1,"column":2281}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"createConnectionWithProtocol","original":{"line":270,"column":6},"generated":{"line":1,"column":2283}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"queuedDial","original":{"line":270,"column":35},"generated":{"line":1,"column":2285}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"next","original":{"line":271,"column":6},"generated":{"line":1,"column":2288}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"didCreate","original":{"line":275,"column":8},"generated":{"line":1,"column":2294}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"connectionFSM","original":{"line":276,"column":6},"generated":{"line":1,"column":2297}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"dial","original":{"line":276,"column":20},"generated":{"line":1,"column":2299}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"module","original":{"line":281,"column":0},"generated":{"line":1,"column":2307}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"exports","original":{"line":281,"column":7},"generated":{"line":1,"column":2314}},{"source":"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js","name":"Queue","original":{"line":281,"column":17},"generated":{"line":1,"column":2322}}],"sources":{"node_modules/ipfs/node_modules/libp2p/src/switch/dialer/queue.js":"'use strict'\n\nconst ConnectionFSM = require('../connection')\nconst { DIAL_ABORTED, ERR_DENIED } = require('../errors')\nconst nextTick = require('async/nextTick')\nconst once = require('once')\nconst debug = require('debug')\nconst log = debug('libp2p:switch:dial')\nlog.error = debug('libp2p:switch:dial:error')\n\n/**\n * Components required to execute a dial\n * @typedef {Object} DialRequest\n * @property {PeerInfo} peerInfo - The peer to dial to\n * @property {string} [protocol] - The protocol to create a stream for\n * @property {object} options\n * @property {boolean} options.useFSM - If `callback` should return a ConnectionFSM\n * @property {number} options.priority - The priority of the dial\n * @property {function(Error, Connection|ConnectionFSM)} callback\n */\n\n/**\n * @typedef {Object} NewConnection\n * @property {ConnectionFSM} connectionFSM\n * @property {boolean} didCreate\n */\n\n/**\n * Attempts to create a new connection or stream (when muxed),\n * via negotiation of the given `protocol`. If no `protocol` is\n * provided, no action will be taken and `callback` will be called\n * immediately with no error or values.\n *\n * @param {object} options\n * @param {string} options.protocol\n * @param {ConnectionFSM} options.connection\n * @param {function(Error, Connection)} options.callback\n * @returns {void}\n */\nfunction createConnectionWithProtocol ({ protocol, connection, callback }) {\n  if (!protocol) {\n    return callback()\n  }\n  connection.shake(protocol, (err, conn) => {\n    if (!conn) {\n      return callback(err)\n    }\n\n    conn.setPeerInfo(connection.theirPeerInfo)\n    callback(null, conn)\n  })\n}\n\n/**\n * A convenience array wrapper for controlling\n * a per peer queue\n *\n * @returns {Queue}\n */\nclass Queue {\n  /**\n   * @constructor\n   * @param {string} peerId\n   * @param {Switch} _switch\n   * @param {function(string)} onStopped Called when the queue stops\n   */\n  constructor (peerId, _switch, onStopped) {\n    this.id = peerId\n    this.switch = _switch\n    this._queue = []\n    this.denylisted = null\n    this.denylistCount = 0\n    this.isRunning = false\n    this.onStopped = onStopped\n  }\n\n  get length () {\n    return this._queue.length\n  }\n\n  /**\n   * Adds the dial request to the queue. The queue is not automatically started\n   * @param {string} protocol\n   * @param {boolean} useFSM If callback should use a ConnectionFSM instead\n   * @param {function(Error, Connection)} callback\n   * @returns {void}\n   */\n  add (protocol, useFSM, callback) {\n    if (!this.isDialAllowed()) {\n      return nextTick(callback, ERR_DENIED())\n    }\n    this._queue.push({ protocol, useFSM, callback })\n  }\n\n  /**\n   * Determines whether or not dialing is currently allowed\n   * @returns {boolean}\n   */\n  isDialAllowed () {\n    if (this.denylisted) {\n      // If the deny ttl has passed, reset it\n      if (Date.now() > this.denylisted) {\n        this.denylisted = null\n        return true\n      }\n      // Dial is not allowed\n      return false\n    }\n    return true\n  }\n\n  /**\n   * Starts the queue. If the queue was started `true` will be returned.\n   * If the queue was already running `false` is returned.\n   * @returns {boolean}\n   */\n  start () {\n    if (!this.isRunning) {\n      log('starting dial queue to %s', this.id)\n      this.isRunning = true\n      this._run()\n      return true\n    }\n    return false\n  }\n\n  /**\n   * Stops the queue\n   */\n  stop () {\n    if (this.isRunning) {\n      log('stopping dial queue to %s', this.id)\n      this.isRunning = false\n      this.onStopped(this.id)\n    }\n  }\n\n  /**\n   * Stops the queue and errors the callback for each dial request\n   */\n  abort () {\n    while (this.length > 0) {\n      const dial = this._queue.shift()\n      dial.callback(DIAL_ABORTED())\n    }\n    this.stop()\n  }\n\n  /**\n   * Marks the queue as denylisted. The queue will be immediately aborted.\n   * @returns {void}\n   */\n  denylist () {\n    this.denylistCount++\n\n    if (this.denylistCount >= this.switch.dialer.DENY_ATTEMPTS) {\n      this.denylisted = Infinity\n      return\n    }\n\n    let ttl = this.switch.dialer.DENY_TTL * Math.pow(this.denylistCount, 3)\n    const minTTL = ttl * 0.9\n    const maxTTL = ttl * 1.1\n\n    // Add a random jitter of 20% to the ttl\n    ttl = Math.floor(Math.random() * (maxTTL - minTTL) + minTTL)\n\n    this.denylisted = Date.now() + ttl\n    this.abort()\n  }\n\n  /**\n   * Attempts to find a muxed connection for the given peer. If one\n   * isn't found, a new one will be created.\n   *\n   * Returns an array containing two items. The ConnectionFSM and wether\n   * or not the ConnectionFSM was just created. The latter can be used\n   * to determine dialing needs.\n   *\n   * @private\n   * @param {PeerInfo} peerInfo\n   * @returns {NewConnection}\n   */\n  _getOrCreateConnection (peerInfo) {\n    let connectionFSM = this.switch.connection.getOne(this.id)\n    let didCreate = false\n\n    if (!connectionFSM) {\n      connectionFSM = new ConnectionFSM({\n        _switch: this.switch,\n        peerInfo,\n        muxer: null,\n        conn: null\n      })\n\n      this.switch.connection.add(connectionFSM)\n\n      // Add control events and start the dialer\n      connectionFSM.once('connected', () => connectionFSM.protect())\n      connectionFSM.once('private', () => connectionFSM.encrypt())\n      connectionFSM.once('encrypted', () => connectionFSM.upgrade())\n\n      didCreate = true\n    }\n\n    return { connectionFSM, didCreate }\n  }\n\n  /**\n   * Executes the next dial in the queue for the given peer\n   * @private\n   * @returns {void}\n   */\n  _run () {\n    // If we have no items in the queue or we're stopped, exit\n    if (this.length < 1 || !this.isRunning) {\n      log('stopping the queue for %s', this.id)\n      return this.stop()\n    }\n\n    const next = once(() => {\n      log('starting next dial to %s', this.id)\n      this._run()\n    })\n\n    const peerInfo = this.switch._peerBook.get(this.id)\n    const queuedDial = this._queue.shift()\n    const { connectionFSM, didCreate } = this._getOrCreateConnection(peerInfo)\n\n    // If the dial expects a ConnectionFSM, we can provide that back now\n    if (queuedDial.useFSM) {\n      nextTick(queuedDial.callback, null, connectionFSM)\n    }\n\n    // If we can handshake protocols, get a new stream and call run again\n    if (['MUXED', 'CONNECTED'].includes(connectionFSM.getState())) {\n      queuedDial.connection = connectionFSM\n      createConnectionWithProtocol(queuedDial)\n      next()\n      return\n    }\n\n    // If we error, error the queued dial\n    // In the future, it may be desired to error the other queued dials,\n    // depending on the error.\n    connectionFSM.once('error', (err) => {\n      queuedDial.callback(err)\n      // Dont denylist peers we have identified and that we are connected to\n      if (peerInfo.protocols.size > 0 && peerInfo.isConnected()) {\n        return\n      }\n      this.denylist()\n    })\n\n    connectionFSM.once('close', () => {\n      next()\n    })\n\n    // If we're not muxed yet, add listeners\n    connectionFSM.once('muxed', () => {\n      this.denylistCount = 0 // reset denylisting on good connections\n      queuedDial.connection = connectionFSM\n      createConnectionWithProtocol(queuedDial)\n      next()\n    })\n\n    connectionFSM.once('unmuxed', () => {\n      this.denylistCount = 0\n      queuedDial.connection = connectionFSM\n      createConnectionWithProtocol(queuedDial)\n      next()\n    })\n\n    // If we have a new connection, start dialing\n    if (didCreate) {\n      connectionFSM.dial()\n    }\n  }\n}\n\nmodule.exports = Queue\n"},"lineCount":null}},"error":null,"hash":"11ac24cd8651d845045f6d4bfc910f3a","cacheData":{"env":{}}}