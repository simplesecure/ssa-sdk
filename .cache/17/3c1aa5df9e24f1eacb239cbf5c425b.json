{"id":"xWjU","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/package.json","includedInParent":true,"mtime":1582579778668},{"name":"datastore-core","loc":{"line":3,"column":36},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/routing/config.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/datastore-core/src/index.js"},{"name":"dlv","loc":{"line":4,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/routing/config.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/dlv/dist/dlv.umd.js"},{"name":"./pubsub-datastore","loc":{"line":6,"column":32},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/routing/config.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/routing/pubsub-datastore.js"},{"name":"./offline-datastore","loc":{"line":7,"column":33},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/routing/config.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/src/core/ipns/routing/offline-datastore.js"}],"generated":{"js":"\"use strict\";const{TieredDatastore:e}=require(\"datastore-core\"),o=require(\"dlv\"),t=require(\"./pubsub-datastore\"),s=require(\"./offline-datastore\");module.exports=(r=>{const i=[];let p;if(o(r._options,\"EXPERIMENTAL.ipnsPubsub\",!1)){const e=r.libp2p.pubsub,o=r._repo.datastore,s=r._peerInfo.id;p=new t(e,o,s),i.push(p)}if(o(r._options,\"offline\")||!o(r._options,\"libp2p.config.dht.enabled\",!1)){const e=new s(r._repo);i.push(e)}else i.push(r.libp2p.dht);return new e(i)});"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"TieredDatastore","original":{"line":3,"column":8},"generated":{"line":1,"column":35}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"require","original":{"line":3,"column":28},"generated":{"line":1,"column":38}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":3,"column":36},"generated":{"line":1,"column":46}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"get","original":{"line":4,"column":6},"generated":{"line":1,"column":64}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"require","original":{"line":4,"column":12},"generated":{"line":1,"column":66}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":4,"column":20},"generated":{"line":1,"column":74}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"PubsubDatastore","original":{"line":6,"column":6},"generated":{"line":1,"column":81}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"require","original":{"line":6,"column":24},"generated":{"line":1,"column":83}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":6,"column":32},"generated":{"line":1,"column":91}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"OfflineDatastore","original":{"line":7,"column":6},"generated":{"line":1,"column":113}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"require","original":{"line":7,"column":25},"generated":{"line":1,"column":115}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":7,"column":33},"generated":{"line":1,"column":123}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"module","original":{"line":9,"column":0},"generated":{"line":1,"column":146}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"exports","original":{"line":9,"column":7},"generated":{"line":1,"column":153}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":9,"column":18},"generated":{"line":1,"column":161}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":9,"column":18},"generated":{"line":1,"column":162}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipnsStores","original":{"line":11,"column":8},"generated":{"line":1,"column":166}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipnsStores","original":{"line":11,"column":8},"generated":{"line":1,"column":172}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":11,"column":21},"generated":{"line":1,"column":174}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"pubsubDs","original":{"line":14,"column":6},"generated":{"line":1,"column":177}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"pubsubDs","original":{"line":14,"column":6},"generated":{"line":1,"column":181}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"get","original":{"line":15,"column":6},"generated":{"line":1,"column":183}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"get","original":{"line":15,"column":6},"generated":{"line":1,"column":186}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":15,"column":10},"generated":{"line":1,"column":188}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"_options","original":{"line":15,"column":15},"generated":{"line":1,"column":190}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":15,"column":25},"generated":{"line":1,"column":199}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":15,"column":52},"generated":{"line":1,"column":226}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":15,"column":60},"generated":{"line":1,"column":229}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"pubsub","original":{"line":16,"column":10},"generated":{"line":1,"column":230}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"pubsub","original":{"line":16,"column":10},"generated":{"line":1,"column":236}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":16,"column":19},"generated":{"line":1,"column":238}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"libp2p","original":{"line":16,"column":24},"generated":{"line":1,"column":240}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"pubsub","original":{"line":16,"column":31},"generated":{"line":1,"column":247}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"localDatastore","original":{"line":17,"column":10},"generated":{"line":1,"column":254}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":17,"column":27},"generated":{"line":1,"column":256}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"_repo","original":{"line":17,"column":32},"generated":{"line":1,"column":258}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"datastore","original":{"line":17,"column":38},"generated":{"line":1,"column":264}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"peerId","original":{"line":18,"column":10},"generated":{"line":1,"column":274}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":18,"column":19},"generated":{"line":1,"column":276}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"_peerInfo","original":{"line":18,"column":24},"generated":{"line":1,"column":278}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"id","original":{"line":18,"column":34},"generated":{"line":1,"column":288}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"pubsubDs","original":{"line":20,"column":4},"generated":{"line":1,"column":291}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":20,"column":15},"generated":{"line":1,"column":293}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"PubsubDatastore","original":{"line":20,"column":19},"generated":{"line":1,"column":297}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"pubsub","original":{"line":20,"column":35},"generated":{"line":1,"column":299}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"localDatastore","original":{"line":20,"column":43},"generated":{"line":1,"column":301}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"peerId","original":{"line":20,"column":59},"generated":{"line":1,"column":303}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipnsStores","original":{"line":21,"column":4},"generated":{"line":1,"column":306}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"push","original":{"line":21,"column":15},"generated":{"line":1,"column":308}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"pubsubDs","original":{"line":21,"column":20},"generated":{"line":1,"column":313}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"get","original":{"line":25,"column":6},"generated":{"line":1,"column":316}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"get","original":{"line":25,"column":6},"generated":{"line":1,"column":319}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":25,"column":10},"generated":{"line":1,"column":321}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"_options","original":{"line":25,"column":15},"generated":{"line":1,"column":323}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":25,"column":25},"generated":{"line":1,"column":332}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"get","original":{"line":25,"column":40},"generated":{"line":1,"column":345}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":25,"column":44},"generated":{"line":1,"column":347}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"_options","original":{"line":25,"column":49},"generated":{"line":1,"column":349}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":25,"column":59},"generated":{"line":1,"column":358}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":25,"column":88},"generated":{"line":1,"column":387}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":25,"column":96},"generated":{"line":1,"column":390}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"offlineDatastore","original":{"line":26,"column":10},"generated":{"line":1,"column":391}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"offlineDatastore","original":{"line":26,"column":10},"generated":{"line":1,"column":397}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":26,"column":29},"generated":{"line":1,"column":399}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"OfflineDatastore","original":{"line":26,"column":33},"generated":{"line":1,"column":403}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":26,"column":50},"generated":{"line":1,"column":405}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"_repo","original":{"line":26,"column":55},"generated":{"line":1,"column":407}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipnsStores","original":{"line":27,"column":4},"generated":{"line":1,"column":414}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"push","original":{"line":27,"column":15},"generated":{"line":1,"column":416}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"offlineDatastore","original":{"line":27,"column":20},"generated":{"line":1,"column":421}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipnsStores","original":{"line":29,"column":4},"generated":{"line":1,"column":429}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"push","original":{"line":29,"column":15},"generated":{"line":1,"column":431}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipfs","original":{"line":29,"column":20},"generated":{"line":1,"column":436}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"libp2p","original":{"line":29,"column":25},"generated":{"line":1,"column":438}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"dht","original":{"line":29,"column":32},"generated":{"line":1,"column":445}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":33,"column":9},"generated":{"line":1,"column":450}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","original":{"line":33,"column":9},"generated":{"line":1,"column":457}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"TieredDatastore","original":{"line":33,"column":13},"generated":{"line":1,"column":461}},{"source":"node_modules/ipfs/src/core/ipns/routing/config.js","name":"ipnsStores","original":{"line":33,"column":29},"generated":{"line":1,"column":463}}],"sources":{"node_modules/ipfs/src/core/ipns/routing/config.js":"'use strict'\n\nconst { TieredDatastore } = require('datastore-core')\nconst get = require('dlv')\n\nconst PubsubDatastore = require('./pubsub-datastore')\nconst OfflineDatastore = require('./offline-datastore')\n\nmodule.exports = (ipfs) => {\n  // Setup online routing for IPNS with a tiered routing composed by a DHT and a Pubsub router (if properly enabled)\n  const ipnsStores = []\n\n  // Add IPNS pubsub if enabled\n  let pubsubDs\n  if (get(ipfs._options, 'EXPERIMENTAL.ipnsPubsub', false)) {\n    const pubsub = ipfs.libp2p.pubsub\n    const localDatastore = ipfs._repo.datastore\n    const peerId = ipfs._peerInfo.id\n\n    pubsubDs = new PubsubDatastore(pubsub, localDatastore, peerId)\n    ipnsStores.push(pubsubDs)\n  }\n\n  // DHT should not be added as routing if we are offline or it is disabled\n  if (get(ipfs._options, 'offline') || !get(ipfs._options, 'libp2p.config.dht.enabled', false)) {\n    const offlineDatastore = new OfflineDatastore(ipfs._repo)\n    ipnsStores.push(offlineDatastore)\n  } else {\n    ipnsStores.push(ipfs.libp2p.dht)\n  }\n\n  // Create ipns routing with a set of datastores\n  return new TieredDatastore(ipnsStores)\n}\n"},"lineCount":null}},"error":null,"hash":"f28796843eba36b3fa46db8f1e83aff1","cacheData":{"env":{}}}