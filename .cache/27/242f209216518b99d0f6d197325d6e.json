{"id":"z6q6","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/datastore-core/package.json","includedInParent":true,"mtime":1582579780949},{"name":"interface-datastore","loc":{"line":3,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/datastore-core/src/tiered.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/datastore-core/node_modules/interface-datastore/src/index.js"},{"name":"debug","loc":{"line":4,"column":20},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/datastore-core/src/tiered.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/debug/src/browser.js"}],"generated":{"js":"\"use strict\";const t=require(\"interface-datastore\").Errors,r=require(\"debug\")(\"datastore:core:tiered\");class e{constructor(t){this.stores=t.slice()}async open(){try{await this.stores.map(t=>t.open())}catch(r){throw t.dbOpenFailedError()}}async put(r,e){try{await Promise.all(this.stores.map(t=>t.put(r,e)))}catch(s){throw t.dbWriteFailedError()}}async get(e){for(const t of this.stores)try{const a=await t.get(e);if(a)return a}catch(s){r(s)}throw t.notFoundError()}has(t){return new Promise(async r=>{await Promise.all(this.stores.map(async e=>{await e.has(t)&&r(!0)})),r(!1)})}async delete(r){try{await Promise.all(this.stores.map(t=>t.delete(r)))}catch(e){throw t.dbDeleteFailedError()}}async close(){await Promise.all(this.stores.map(t=>t.close()))}batch(){const t=this.stores.map(t=>t.batch());return{put:(r,e)=>{t.forEach(t=>t.put(r,e))},delete:r=>{t.forEach(t=>t.delete(r))},commit:async()=>{for(const r of t)await r.commit()}}}query(t){return this.stores[this.stores.length-1].query(t)}}module.exports=e;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"require","original":{"line":3,"column":15},"generated":{"line":1,"column":21}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":3,"column":23},"generated":{"line":1,"column":29}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":3,"column":46},"generated":{"line":1,"column":52}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"log","original":{"line":4,"column":6},"generated":{"line":1,"column":59}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"require","original":{"line":4,"column":12},"generated":{"line":1,"column":61}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":4,"column":20},"generated":{"line":1,"column":69}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"require","original":{"line":4,"column":12},"generated":{"line":1,"column":77}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":4,"column":29},"generated":{"line":1,"column":78}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":13,"column":0},"generated":{"line":1,"column":103}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"TieredDatastore","original":{"line":13,"column":6},"generated":{"line":1,"column":109}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"constructor","original":{"line":14,"column":2},"generated":{"line":1,"column":111}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":14,"column":15},"generated":{"line":1,"column":123}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":15,"column":9},"generated":{"line":1,"column":126}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":15,"column":9},"generated":{"line":1,"column":131}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":15,"column":18},"generated":{"line":1,"column":138}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"slice","original":{"line":15,"column":25},"generated":{"line":1,"column":140}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"open","original":{"line":18,"column":8},"generated":{"line":1,"column":148}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":19,"column":8},"generated":{"line":1,"column":161}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":20,"column":13},"generated":{"line":1,"column":171}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":20,"column":18},"generated":{"line":1,"column":176}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"map","original":{"line":20,"column":25},"generated":{"line":1,"column":183}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":20,"column":30},"generated":{"line":1,"column":187}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":20,"column":40},"generated":{"line":1,"column":190}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"open","original":{"line":20,"column":46},"generated":{"line":1,"column":192}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":21,"column":6},"generated":{"line":1,"column":200}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"err","original":{"line":21,"column":13},"generated":{"line":1,"column":206}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":22,"column":12},"generated":{"line":1,"column":209}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":22,"column":12},"generated":{"line":1,"column":215}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"dbOpenFailedError","original":{"line":22,"column":19},"generated":{"line":1,"column":217}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"put","original":{"line":26,"column":8},"generated":{"line":1,"column":238}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":26,"column":13},"generated":{"line":1,"column":248}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"value","original":{"line":26,"column":18},"generated":{"line":1,"column":250}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":27,"column":8},"generated":{"line":1,"column":253}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Promise","original":{"line":28,"column":12},"generated":{"line":1,"column":263}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"all","original":{"line":28,"column":20},"generated":{"line":1,"column":271}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":28,"column":24},"generated":{"line":1,"column":275}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":28,"column":29},"generated":{"line":1,"column":280}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"map","original":{"line":28,"column":36},"generated":{"line":1,"column":287}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":28,"column":40},"generated":{"line":1,"column":291}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":28,"column":49},"generated":{"line":1,"column":294}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"put","original":{"line":28,"column":55},"generated":{"line":1,"column":296}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":28,"column":59},"generated":{"line":1,"column":300}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"value","original":{"line":28,"column":64},"generated":{"line":1,"column":302}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":29,"column":6},"generated":{"line":1,"column":307}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"err","original":{"line":29,"column":13},"generated":{"line":1,"column":313}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":30,"column":12},"generated":{"line":1,"column":316}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":30,"column":12},"generated":{"line":1,"column":322}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"dbWriteFailedError","original":{"line":30,"column":19},"generated":{"line":1,"column":324}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"get","original":{"line":34,"column":8},"generated":{"line":1,"column":346}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":34,"column":13},"generated":{"line":1,"column":356}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":35,"column":9},"generated":{"line":1,"column":359}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":35,"column":9},"generated":{"line":1,"column":363}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":35,"column":15},"generated":{"line":1,"column":369}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":35,"column":24},"generated":{"line":1,"column":374}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":35,"column":29},"generated":{"line":1,"column":379}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":36,"column":10},"generated":{"line":1,"column":386}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"res","original":{"line":37,"column":14},"generated":{"line":1,"column":390}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"res","original":{"line":37,"column":14},"generated":{"line":1,"column":396}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":37,"column":26},"generated":{"line":1,"column":404}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"get","original":{"line":37,"column":32},"generated":{"line":1,"column":406}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":37,"column":36},"generated":{"line":1,"column":410}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"res","original":{"line":38,"column":12},"generated":{"line":1,"column":413}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"res","original":{"line":38,"column":12},"generated":{"line":1,"column":416}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":38,"column":17},"generated":{"line":1,"column":418}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"res","original":{"line":38,"column":24},"generated":{"line":1,"column":425}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":39,"column":8},"generated":{"line":1,"column":427}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"err","original":{"line":39,"column":15},"generated":{"line":1,"column":433}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"log","original":{"line":40,"column":8},"generated":{"line":1,"column":436}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"err","original":{"line":40,"column":12},"generated":{"line":1,"column":438}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":43,"column":10},"generated":{"line":1,"column":441}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":43,"column":10},"generated":{"line":1,"column":447}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"notFoundError","original":{"line":43,"column":17},"generated":{"line":1,"column":449}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"has","original":{"line":46,"column":2},"generated":{"line":1,"column":465}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":46,"column":7},"generated":{"line":1,"column":469}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":47,"column":11},"generated":{"line":1,"column":472}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":47,"column":11},"generated":{"line":1,"column":479}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Promise","original":{"line":47,"column":15},"generated":{"line":1,"column":483}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":47,"column":23},"generated":{"line":1,"column":491}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":47,"column":23},"generated":{"line":1,"column":497}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Promise","original":{"line":48,"column":12},"generated":{"line":1,"column":507}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"all","original":{"line":48,"column":20},"generated":{"line":1,"column":515}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":48,"column":24},"generated":{"line":1,"column":519}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":48,"column":29},"generated":{"line":1,"column":524}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"map","original":{"line":48,"column":36},"generated":{"line":1,"column":531}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":48,"column":40},"generated":{"line":1,"column":535}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":48,"column":40},"generated":{"line":1,"column":541}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":49,"column":26},"generated":{"line":1,"column":551}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"has","original":{"line":49,"column":32},"generated":{"line":1,"column":553}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":49,"column":36},"generated":{"line":1,"column":557}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"resolve","original":{"line":52,"column":10},"generated":{"line":1,"column":561}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":52,"column":18},"generated":{"line":1,"column":564}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"resolve","original":{"line":56,"column":6},"generated":{"line":1,"column":570}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":56,"column":14},"generated":{"line":1,"column":573}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"delete","original":{"line":60,"column":8},"generated":{"line":1,"column":578}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":60,"column":16},"generated":{"line":1,"column":591}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":61,"column":8},"generated":{"line":1,"column":594}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Promise","original":{"line":62,"column":12},"generated":{"line":1,"column":604}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"all","original":{"line":62,"column":20},"generated":{"line":1,"column":612}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":62,"column":24},"generated":{"line":1,"column":616}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":62,"column":29},"generated":{"line":1,"column":621}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"map","original":{"line":62,"column":36},"generated":{"line":1,"column":628}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":62,"column":40},"generated":{"line":1,"column":632}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":62,"column":49},"generated":{"line":1,"column":635}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"delete","original":{"line":62,"column":55},"generated":{"line":1,"column":637}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":62,"column":62},"generated":{"line":1,"column":644}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":63,"column":6},"generated":{"line":1,"column":649}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"err","original":{"line":63,"column":13},"generated":{"line":1,"column":655}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":64,"column":12},"generated":{"line":1,"column":658}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Errors","original":{"line":64,"column":12},"generated":{"line":1,"column":664}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"dbDeleteFailedError","original":{"line":64,"column":19},"generated":{"line":1,"column":666}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"close","original":{"line":68,"column":8},"generated":{"line":1,"column":689}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"Promise","original":{"line":69,"column":10},"generated":{"line":1,"column":709}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"all","original":{"line":69,"column":18},"generated":{"line":1,"column":717}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":69,"column":22},"generated":{"line":1,"column":721}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":69,"column":27},"generated":{"line":1,"column":726}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"map","original":{"line":69,"column":34},"generated":{"line":1,"column":733}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":69,"column":38},"generated":{"line":1,"column":737}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":69,"column":47},"generated":{"line":1,"column":740}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"close","original":{"line":69,"column":53},"generated":{"line":1,"column":742}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batch","original":{"line":72,"column":2},"generated":{"line":1,"column":752}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batches","original":{"line":73,"column":10},"generated":{"line":1,"column":760}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batches","original":{"line":73,"column":10},"generated":{"line":1,"column":766}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":73,"column":20},"generated":{"line":1,"column":768}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":73,"column":25},"generated":{"line":1,"column":773}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"map","original":{"line":73,"column":32},"generated":{"line":1,"column":780}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":73,"column":36},"generated":{"line":1,"column":784}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"store","original":{"line":73,"column":45},"generated":{"line":1,"column":787}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batch","original":{"line":73,"column":51},"generated":{"line":1,"column":789}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":75,"column":11},"generated":{"line":1,"column":798}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":75,"column":11},"generated":{"line":1,"column":804}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"put","original":{"line":76,"column":6},"generated":{"line":1,"column":805}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":76,"column":11},"generated":{"line":1,"column":809}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":76,"column":12},"generated":{"line":1,"column":810}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"value","original":{"line":76,"column":17},"generated":{"line":1,"column":812}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batches","original":{"line":77,"column":8},"generated":{"line":1,"column":817}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"forEach","original":{"line":77,"column":16},"generated":{"line":1,"column":819}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"b","original":{"line":77,"column":24},"generated":{"line":1,"column":827}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"b","original":{"line":77,"column":29},"generated":{"line":1,"column":830}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"put","original":{"line":77,"column":31},"generated":{"line":1,"column":832}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":77,"column":35},"generated":{"line":1,"column":836}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"value","original":{"line":77,"column":40},"generated":{"line":1,"column":838}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"delete","original":{"line":79,"column":6},"generated":{"line":1,"column":843}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":79,"column":15},"generated":{"line":1,"column":850}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batches","original":{"line":80,"column":8},"generated":{"line":1,"column":854}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"forEach","original":{"line":80,"column":16},"generated":{"line":1,"column":856}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"b","original":{"line":80,"column":24},"generated":{"line":1,"column":864}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"b","original":{"line":80,"column":29},"generated":{"line":1,"column":867}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"delete","original":{"line":80,"column":31},"generated":{"line":1,"column":869}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"key","original":{"line":80,"column":38},"generated":{"line":1,"column":876}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"commit","original":{"line":82,"column":6},"generated":{"line":1,"column":881}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":82,"column":14},"generated":{"line":1,"column":888}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":83,"column":13},"generated":{"line":1,"column":898}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":83,"column":13},"generated":{"line":1,"column":902}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batch","original":{"line":83,"column":19},"generated":{"line":1,"column":908}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batches","original":{"line":83,"column":28},"generated":{"line":1,"column":913}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"batch","original":{"line":84,"column":16},"generated":{"line":1,"column":921}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"commit","original":{"line":84,"column":22},"generated":{"line":1,"column":923}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"query","original":{"line":90,"column":2},"generated":{"line":1,"column":934}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"q","original":{"line":90,"column":9},"generated":{"line":1,"column":940}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":91,"column":11},"generated":{"line":1,"column":943}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":91,"column":11},"generated":{"line":1,"column":950}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":91,"column":16},"generated":{"line":1,"column":955}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":91,"column":23},"generated":{"line":1,"column":962}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"stores","original":{"line":91,"column":28},"generated":{"line":1,"column":967}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"length","original":{"line":91,"column":35},"generated":{"line":1,"column":974}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","original":{"line":91,"column":44},"generated":{"line":1,"column":981}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"query","original":{"line":91,"column":47},"generated":{"line":1,"column":984}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"q","original":{"line":91,"column":53},"generated":{"line":1,"column":990}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"module","original":{"line":95,"column":0},"generated":{"line":1,"column":994}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"exports","original":{"line":95,"column":7},"generated":{"line":1,"column":1001}},{"source":"node_modules/ipfs/node_modules/datastore-core/src/tiered.js","name":"TieredDatastore","original":{"line":95,"column":17},"generated":{"line":1,"column":1009}}],"sources":{"node_modules/ipfs/node_modules/datastore-core/src/tiered.js":"'use strict'\n\nconst Errors = require('interface-datastore').Errors\nconst log = require('debug')('datastore:core:tiered')\n\n/**\n * A datastore that can combine multiple stores. Puts and deletes\n * will write through to all datastores. Has and get will\n * try each store sequentially. Query will always try the\n * last one first.\n *\n */\nclass TieredDatastore {\n  constructor (stores) {\n    this.stores = stores.slice()\n  }\n\n  async open () {\n    try {\n      await (this.stores.map((store) => store.open()))\n    } catch (err) {\n      throw Errors.dbOpenFailedError()\n    }\n  }\n\n  async put (key, value) {\n    try {\n      await Promise.all(this.stores.map(store => store.put(key, value)))\n    } catch (err) {\n      throw Errors.dbWriteFailedError()\n    }\n  }\n\n  async get (key) {\n    for (const store of this.stores) {\n      try {\n        const res = await store.get(key)\n        if (res) return res\n      } catch (err) {\n        log(err)\n      }\n    }\n    throw Errors.notFoundError()\n  }\n\n  has (key) {\n    return new Promise(async (resolve) => {\n      await Promise.all(this.stores.map(async (store) => {\n        const has = await store.has(key)\n\n        if (has) {\n          resolve(true)\n        }\n      }))\n\n      resolve(false)\n    })\n  }\n\n  async delete (key) {\n    try {\n      await Promise.all(this.stores.map(store => store.delete(key)))\n    } catch (err) {\n      throw Errors.dbDeleteFailedError()\n    }\n  }\n\n  async close () {\n    await Promise.all(this.stores.map(store => store.close()))\n  }\n\n  batch () {\n    const batches = this.stores.map(store => store.batch())\n\n    return {\n      put: (key, value) => {\n        batches.forEach(b => b.put(key, value))\n      },\n      delete: (key) => {\n        batches.forEach(b => b.delete(key))\n      },\n      commit: async () => {\n        for (const batch of batches) {\n          await batch.commit()\n        }\n      }\n    }\n  }\n\n  query (q) {\n    return this.stores[this.stores.length - 1].query(q)\n  }\n}\n\nmodule.exports = TieredDatastore\n"},"lineCount":null}},"error":null,"hash":"5e43955bae0585a7e95916f092dfb43d","cacheData":{"env":{}}}