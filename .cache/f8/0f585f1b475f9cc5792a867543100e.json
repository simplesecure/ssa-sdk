{"id":"NO1l","dependencies":[{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/package.json","includedInParent":true,"mtime":1584306008866},{"name":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/package.json","includedInParent":true,"mtime":1582579780032},{"name":"assert","loc":{"line":3,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/assert/assert.js"},{"name":"peer-info","loc":{"line":4,"column":25},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/peer-info/src/index.js"},{"name":"peer-id","loc":{"line":5,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/peer-id/src/index.js"},{"name":"protons","loc":{"line":6,"column":24},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/protons/src/index.js"},{"name":"libp2p-record","loc":{"line":7,"column":23},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/index.js"},{"name":"./dht.proto","loc":{"line":9,"column":28},"parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/dht.proto.js"},{"name":"buffer","parent":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","resolved":"/Users/polluterofminds/Development/simpleid/ssa-sdk/node_modules/node-libs-browser/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar e=require(\"buffer\").Buffer;const r=require(\"assert\"),s=require(\"peer-info\"),t=require(\"peer-id\"),i=require(\"protons\"),o=require(\"libp2p-record\").Record,c=i(require(\"./dht.proto\")),d=c.Message.MessageType,n=c.Message.ConnectionType;class l{constructor(s,t,i){t&&r(e.isBuffer(t)),this.type=s,this.key=t,this._clusterLevelRaw=i,this.closerPeers=[],this.providerPeers=[],this.record=null}get clusterLevel(){const e=this._clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this._clusterLevelRaw=e}serialize(){const r={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(u),providerPeers:this.providerPeers.map(u)};return this.record&&(e.isBuffer(this.record)?r.record=this.record:r.record=this.record.serialize()),c.Message.encode(r)}static deserialize(e){const r=c.Message.decode(e),s=new l(r.type,r.key,r.clusterLevelRaw);return s.closerPeers=r.closerPeers.map(a),s.providerPeers=r.providerPeers.map(a),r.record&&(s.record=o.deserialize(r.record)),s}}function u(e){const r={id:e.id.id,addrs:e.multiaddrs.toArray().map(e=>e.buffer)};return e.isConnected()?r.connection=n.CONNECTED:r.connection=n.NOT_CONNECTED,r}function a(e){const r=new s(new t(e.id));return e.addrs.forEach(e=>r.multiaddrs.add(e)),r}l.TYPES=d,l.CONNECTION_TYPES=n,module.exports=l;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":122,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":122,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":122,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":122,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":122,"column":0},"generated":{"line":2,"column":24}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":3,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"assert","original":{"line":3,"column":6},"generated":{"line":2,"column":37}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"require","original":{"line":3,"column":15},"generated":{"line":2,"column":39}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":3,"column":23},"generated":{"line":2,"column":47}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"PeerInfo","original":{"line":4,"column":6},"generated":{"line":2,"column":57}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"require","original":{"line":4,"column":17},"generated":{"line":2,"column":59}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":4,"column":25},"generated":{"line":2,"column":67}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"PeerId","original":{"line":5,"column":6},"generated":{"line":2,"column":80}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"require","original":{"line":5,"column":15},"generated":{"line":2,"column":82}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":5,"column":23},"generated":{"line":2,"column":90}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"protons","original":{"line":6,"column":6},"generated":{"line":2,"column":101}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"require","original":{"line":6,"column":16},"generated":{"line":2,"column":103}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":6,"column":24},"generated":{"line":2,"column":111}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Record","original":{"line":7,"column":6},"generated":{"line":2,"column":122}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"require","original":{"line":7,"column":15},"generated":{"line":2,"column":124}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":7,"column":23},"generated":{"line":2,"column":132}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Record","original":{"line":7,"column":40},"generated":{"line":2,"column":149}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"pbm","original":{"line":9,"column":6},"generated":{"line":2,"column":156}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"protons","original":{"line":9,"column":12},"generated":{"line":2,"column":158}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"require","original":{"line":9,"column":20},"generated":{"line":2,"column":160}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":9,"column":28},"generated":{"line":2,"column":168}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"MESSAGE_TYPE","original":{"line":11,"column":6},"generated":{"line":2,"column":184}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"pbm","original":{"line":11,"column":21},"generated":{"line":2,"column":186}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":11,"column":25},"generated":{"line":2,"column":188}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"MessageType","original":{"line":11,"column":33},"generated":{"line":2,"column":196}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"CONNECTION_TYPE","original":{"line":12,"column":6},"generated":{"line":2,"column":208}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"pbm","original":{"line":12,"column":24},"generated":{"line":2,"column":210}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":12,"column":28},"generated":{"line":2,"column":212}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"ConnectionType","original":{"line":12,"column":36},"generated":{"line":2,"column":220}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":17,"column":0},"generated":{"line":2,"column":235}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":17,"column":6},"generated":{"line":2,"column":241}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"constructor","original":{"line":23,"column":2},"generated":{"line":2,"column":243}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"type","original":{"line":23,"column":15},"generated":{"line":2,"column":255}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":23,"column":21},"generated":{"line":2,"column":257}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":23,"column":26},"generated":{"line":2,"column":259}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":24,"column":8},"generated":{"line":2,"column":262}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"assert","original":{"line":25,"column":6},"generated":{"line":2,"column":265}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Buffer","original":{"line":25,"column":13},"generated":{"line":2,"column":267}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"isBuffer","original":{"line":25,"column":20},"generated":{"line":2,"column":269}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":25,"column":29},"generated":{"line":2,"column":278}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"type","original":{"line":28,"column":9},"generated":{"line":2,"column":282}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"type","original":{"line":28,"column":9},"generated":{"line":2,"column":287}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"type","original":{"line":28,"column":16},"generated":{"line":2,"column":292}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":29,"column":9},"generated":{"line":2,"column":294}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":29,"column":9},"generated":{"line":2,"column":299}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":29,"column":15},"generated":{"line":2,"column":303}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"_clusterLevelRaw","original":{"line":30,"column":9},"generated":{"line":2,"column":305}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"_clusterLevelRaw","original":{"line":30,"column":9},"generated":{"line":2,"column":310}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":30,"column":28},"generated":{"line":2,"column":327}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"closerPeers","original":{"line":31,"column":9},"generated":{"line":2,"column":329}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"closerPeers","original":{"line":31,"column":9},"generated":{"line":2,"column":334}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":31,"column":23},"generated":{"line":2,"column":346}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"providerPeers","original":{"line":32,"column":9},"generated":{"line":2,"column":349}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"providerPeers","original":{"line":32,"column":9},"generated":{"line":2,"column":354}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":32,"column":25},"generated":{"line":2,"column":368}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":33,"column":9},"generated":{"line":2,"column":371}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":33,"column":9},"generated":{"line":2,"column":376}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":33,"column":18},"generated":{"line":2,"column":383}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"clusterLevel","original":{"line":39,"column":6},"generated":{"line":2,"column":388}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":40,"column":10},"generated":{"line":2,"column":407}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":40,"column":10},"generated":{"line":2,"column":413}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":40,"column":18},"generated":{"line":2,"column":415}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"_clusterLevelRaw","original":{"line":40,"column":23},"generated":{"line":2,"column":420}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":40,"column":42},"generated":{"line":2,"column":437}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":41,"column":8},"generated":{"line":2,"column":439}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":41,"column":8},"generated":{"line":2,"column":446}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":41,"column":16},"generated":{"line":2,"column":448}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":42,"column":13},"generated":{"line":2,"column":450}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":45,"column":11},"generated":{"line":2,"column":452}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"clusterLevel","original":{"line":48,"column":6},"generated":{"line":2,"column":454}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":48,"column":20},"generated":{"line":2,"column":471}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"_clusterLevelRaw","original":{"line":49,"column":9},"generated":{"line":2,"column":474}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"_clusterLevelRaw","original":{"line":49,"column":9},"generated":{"line":2,"column":479}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"level","original":{"line":49,"column":28},"generated":{"line":2,"column":496}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"serialize","original":{"line":56,"column":2},"generated":{"line":2,"column":498}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"obj","original":{"line":57,"column":10},"generated":{"line":2,"column":510}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"obj","original":{"line":57,"column":10},"generated":{"line":2,"column":516}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":57,"column":16},"generated":{"line":2,"column":518}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":58,"column":6},"generated":{"line":2,"column":519}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":58,"column":11},"generated":{"line":2,"column":523}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":58,"column":16},"generated":{"line":2,"column":528}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"type","original":{"line":59,"column":6},"generated":{"line":2,"column":532}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":59,"column":12},"generated":{"line":2,"column":537}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"type","original":{"line":59,"column":17},"generated":{"line":2,"column":542}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"clusterLevelRaw","original":{"line":60,"column":6},"generated":{"line":2,"column":547}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":60,"column":23},"generated":{"line":2,"column":563}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"_clusterLevelRaw","original":{"line":60,"column":28},"generated":{"line":2,"column":568}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"closerPeers","original":{"line":61,"column":6},"generated":{"line":2,"column":585}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":61,"column":19},"generated":{"line":2,"column":597}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"closerPeers","original":{"line":61,"column":24},"generated":{"line":2,"column":602}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"map","original":{"line":61,"column":36},"generated":{"line":2,"column":614}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"toPbPeer","original":{"line":61,"column":40},"generated":{"line":2,"column":618}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"providerPeers","original":{"line":62,"column":6},"generated":{"line":2,"column":621}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":62,"column":21},"generated":{"line":2,"column":635}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"providerPeers","original":{"line":62,"column":26},"generated":{"line":2,"column":640}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"map","original":{"line":62,"column":40},"generated":{"line":2,"column":654}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"toPbPeer","original":{"line":62,"column":44},"generated":{"line":2,"column":658}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"pbm","original":{"line":73,"column":11},"generated":{"line":2,"column":662}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":65,"column":8},"generated":{"line":2,"column":669}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":65,"column":13},"generated":{"line":2,"column":674}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Buffer","original":{"line":66,"column":10},"generated":{"line":2,"column":683}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"isBuffer","original":{"line":66,"column":17},"generated":{"line":2,"column":685}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":66,"column":26},"generated":{"line":2,"column":694}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":66,"column":31},"generated":{"line":2,"column":699}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"obj","original":{"line":67,"column":8},"generated":{"line":2,"column":707}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":67,"column":12},"generated":{"line":2,"column":709}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":67,"column":21},"generated":{"line":2,"column":716}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":67,"column":26},"generated":{"line":2,"column":721}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"obj","original":{"line":69,"column":8},"generated":{"line":2,"column":728}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":69,"column":12},"generated":{"line":2,"column":730}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":69,"column":21},"generated":{"line":2,"column":737}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":69,"column":26},"generated":{"line":2,"column":742}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"serialize","original":{"line":69,"column":33},"generated":{"line":2,"column":749}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"pbm","original":{"line":73,"column":11},"generated":{"line":2,"column":762}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":73,"column":15},"generated":{"line":2,"column":764}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"encode","original":{"line":73,"column":23},"generated":{"line":2,"column":772}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"obj","original":{"line":73,"column":30},"generated":{"line":2,"column":779}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"deserialize","original":{"line":82,"column":9},"generated":{"line":2,"column":782}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"raw","original":{"line":82,"column":22},"generated":{"line":2,"column":801}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":83,"column":10},"generated":{"line":2,"column":804}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":83,"column":10},"generated":{"line":2,"column":810}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"pbm","original":{"line":83,"column":16},"generated":{"line":2,"column":812}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":83,"column":20},"generated":{"line":2,"column":814}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"decode","original":{"line":83,"column":28},"generated":{"line":2,"column":822}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"raw","original":{"line":83,"column":35},"generated":{"line":2,"column":829}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"msg","original":{"line":85,"column":10},"generated":{"line":2,"column":832}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":85,"column":16},"generated":{"line":2,"column":834}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":85,"column":20},"generated":{"line":2,"column":838}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":85,"column":28},"generated":{"line":2,"column":840}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"type","original":{"line":85,"column":32},"generated":{"line":2,"column":842}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":85,"column":38},"generated":{"line":2,"column":847}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"key","original":{"line":85,"column":42},"generated":{"line":2,"column":849}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":85,"column":47},"generated":{"line":2,"column":853}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"clusterLevelRaw","original":{"line":85,"column":51},"generated":{"line":2,"column":855}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"msg","original":{"line":93,"column":11},"generated":{"line":2,"column":872}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"msg","original":{"line":87,"column":4},"generated":{"line":2,"column":879}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"closerPeers","original":{"line":87,"column":8},"generated":{"line":2,"column":881}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":87,"column":22},"generated":{"line":2,"column":893}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"closerPeers","original":{"line":87,"column":26},"generated":{"line":2,"column":895}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"map","original":{"line":87,"column":38},"generated":{"line":2,"column":907}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"fromPbPeer","original":{"line":87,"column":42},"generated":{"line":2,"column":911}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"msg","original":{"line":88,"column":4},"generated":{"line":2,"column":914}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"providerPeers","original":{"line":88,"column":8},"generated":{"line":2,"column":916}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":88,"column":24},"generated":{"line":2,"column":930}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"providerPeers","original":{"line":88,"column":28},"generated":{"line":2,"column":932}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"map","original":{"line":88,"column":42},"generated":{"line":2,"column":946}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"fromPbPeer","original":{"line":88,"column":46},"generated":{"line":2,"column":950}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":89,"column":8},"generated":{"line":2,"column":953}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":89,"column":12},"generated":{"line":2,"column":955}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"msg","original":{"line":90,"column":6},"generated":{"line":2,"column":964}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":90,"column":10},"generated":{"line":2,"column":966}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Record","original":{"line":90,"column":19},"generated":{"line":2,"column":973}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"deserialize","original":{"line":90,"column":26},"generated":{"line":2,"column":975}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"dec","original":{"line":90,"column":38},"generated":{"line":2,"column":987}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"record","original":{"line":90,"column":42},"generated":{"line":2,"column":989}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"msg","original":{"line":93,"column":11},"generated":{"line":2,"column":998}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":100,"column":0},"generated":{"line":2,"column":1001}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"toPbPeer","original":{"line":100,"column":9},"generated":{"line":2,"column":1010}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"peer","original":{"line":100,"column":19},"generated":{"line":2,"column":1012}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"res","original":{"line":101,"column":8},"generated":{"line":2,"column":1015}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"res","original":{"line":101,"column":8},"generated":{"line":2,"column":1021}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":101,"column":14},"generated":{"line":2,"column":1023}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"id","original":{"line":102,"column":4},"generated":{"line":2,"column":1024}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"peer","original":{"line":102,"column":8},"generated":{"line":2,"column":1027}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"id","original":{"line":102,"column":13},"generated":{"line":2,"column":1029}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"id","original":{"line":102,"column":16},"generated":{"line":2,"column":1032}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"addrs","original":{"line":103,"column":4},"generated":{"line":2,"column":1035}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"peer","original":{"line":103,"column":11},"generated":{"line":2,"column":1041}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"multiaddrs","original":{"line":103,"column":16},"generated":{"line":2,"column":1043}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"toArray","original":{"line":103,"column":27},"generated":{"line":2,"column":1054}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"map","original":{"line":103,"column":37},"generated":{"line":2,"column":1064}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"m","original":{"line":103,"column":42},"generated":{"line":2,"column":1068}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"m","original":{"line":103,"column":48},"generated":{"line":2,"column":1071}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"buffer","original":{"line":103,"column":50},"generated":{"line":2,"column":1073}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"res","original":{"line":112,"column":9},"generated":{"line":2,"column":1082}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"peer","original":{"line":106,"column":6},"generated":{"line":2,"column":1089}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"isConnected","original":{"line":106,"column":11},"generated":{"line":2,"column":1091}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"res","original":{"line":107,"column":4},"generated":{"line":2,"column":1105}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"connection","original":{"line":107,"column":8},"generated":{"line":2,"column":1107}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"CONNECTION_TYPE","original":{"line":107,"column":21},"generated":{"line":2,"column":1118}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"CONNECTED","original":{"line":107,"column":37},"generated":{"line":2,"column":1120}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"res","original":{"line":109,"column":4},"generated":{"line":2,"column":1130}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"connection","original":{"line":109,"column":8},"generated":{"line":2,"column":1132}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"CONNECTION_TYPE","original":{"line":109,"column":21},"generated":{"line":2,"column":1143}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"NOT_CONNECTED","original":{"line":109,"column":37},"generated":{"line":2,"column":1145}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"res","original":{"line":112,"column":9},"generated":{"line":2,"column":1159}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":115,"column":0},"generated":{"line":2,"column":1161}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"fromPbPeer","original":{"line":115,"column":9},"generated":{"line":2,"column":1170}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"peer","original":{"line":115,"column":21},"generated":{"line":2,"column":1172}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"info","original":{"line":116,"column":8},"generated":{"line":2,"column":1175}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"info","original":{"line":116,"column":8},"generated":{"line":2,"column":1181}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":116,"column":15},"generated":{"line":2,"column":1183}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"PeerInfo","original":{"line":116,"column":19},"generated":{"line":2,"column":1187}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","original":{"line":116,"column":28},"generated":{"line":2,"column":1189}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"PeerId","original":{"line":116,"column":32},"generated":{"line":2,"column":1193}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"peer","original":{"line":116,"column":39},"generated":{"line":2,"column":1195}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"id","original":{"line":116,"column":44},"generated":{"line":2,"column":1197}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"info","original":{"line":119,"column":9},"generated":{"line":2,"column":1202}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"peer","original":{"line":117,"column":2},"generated":{"line":2,"column":1209}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"addrs","original":{"line":117,"column":7},"generated":{"line":2,"column":1211}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"forEach","original":{"line":117,"column":13},"generated":{"line":2,"column":1217}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"a","original":{"line":117,"column":22},"generated":{"line":2,"column":1225}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"info","original":{"line":117,"column":28},"generated":{"line":2,"column":1228}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"multiaddrs","original":{"line":117,"column":33},"generated":{"line":2,"column":1230}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"add","original":{"line":117,"column":44},"generated":{"line":2,"column":1241}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"a","original":{"line":117,"column":48},"generated":{"line":2,"column":1245}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"info","original":{"line":119,"column":9},"generated":{"line":2,"column":1249}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":97,"column":0},"generated":{"line":2,"column":1251}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"TYPES","original":{"line":97,"column":8},"generated":{"line":2,"column":1253}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"MESSAGE_TYPE","original":{"line":97,"column":16},"generated":{"line":2,"column":1259}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":98,"column":0},"generated":{"line":2,"column":1261}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"CONNECTION_TYPES","original":{"line":98,"column":8},"generated":{"line":2,"column":1263}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"CONNECTION_TYPE","original":{"line":98,"column":27},"generated":{"line":2,"column":1280}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"module","original":{"line":122,"column":0},"generated":{"line":2,"column":1282}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"exports","original":{"line":122,"column":7},"generated":{"line":2,"column":1289}},{"source":"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js","name":"Message","original":{"line":122,"column":17},"generated":{"line":2,"column":1297}}],"sources":{"node_modules/ipfs/node_modules/libp2p-kad-dht/src/message/index.js":"'use strict'\n\nconst assert = require('assert')\nconst PeerInfo = require('peer-info')\nconst PeerId = require('peer-id')\nconst protons = require('protons')\nconst Record = require('libp2p-record').Record\n\nconst pbm = protons(require('./dht.proto'))\n\nconst MESSAGE_TYPE = pbm.Message.MessageType\nconst CONNECTION_TYPE = pbm.Message.ConnectionType\n\n/**\n * Represents a single DHT control message.\n */\nclass Message {\n  /**\n   * @param {MessageType} type\n   * @param {Buffer} key\n   * @param {number} level\n   */\n  constructor (type, key, level) {\n    if (key) {\n      assert(Buffer.isBuffer(key))\n    }\n\n    this.type = type\n    this.key = key\n    this._clusterLevelRaw = level\n    this.closerPeers = []\n    this.providerPeers = []\n    this.record = null\n  }\n\n  /**\n   * @type {number}\n   */\n  get clusterLevel () {\n    const level = this._clusterLevelRaw - 1\n    if (level < 0) {\n      return 0\n    }\n\n    return level\n  }\n\n  set clusterLevel (level) {\n    this._clusterLevelRaw = level\n  }\n\n  /**\n   * Encode into protobuf\n   * @returns {Buffer}\n   */\n  serialize () {\n    const obj = {\n      key: this.key,\n      type: this.type,\n      clusterLevelRaw: this._clusterLevelRaw,\n      closerPeers: this.closerPeers.map(toPbPeer),\n      providerPeers: this.providerPeers.map(toPbPeer)\n    }\n\n    if (this.record) {\n      if (Buffer.isBuffer(this.record)) {\n        obj.record = this.record\n      } else {\n        obj.record = this.record.serialize()\n      }\n    }\n\n    return pbm.Message.encode(obj)\n  }\n\n  /**\n   * Decode from protobuf\n   *\n   * @param {Buffer} raw\n   * @returns {Message}\n   */\n  static deserialize (raw) {\n    const dec = pbm.Message.decode(raw)\n\n    const msg = new Message(dec.type, dec.key, dec.clusterLevelRaw)\n\n    msg.closerPeers = dec.closerPeers.map(fromPbPeer)\n    msg.providerPeers = dec.providerPeers.map(fromPbPeer)\n    if (dec.record) {\n      msg.record = Record.deserialize(dec.record)\n    }\n\n    return msg\n  }\n}\n\nMessage.TYPES = MESSAGE_TYPE\nMessage.CONNECTION_TYPES = CONNECTION_TYPE\n\nfunction toPbPeer (peer) {\n  const res = {\n    id: peer.id.id,\n    addrs: peer.multiaddrs.toArray().map((m) => m.buffer)\n  }\n\n  if (peer.isConnected()) {\n    res.connection = CONNECTION_TYPE.CONNECTED\n  } else {\n    res.connection = CONNECTION_TYPE.NOT_CONNECTED\n  }\n\n  return res\n}\n\nfunction fromPbPeer (peer) {\n  const info = new PeerInfo(new PeerId(peer.id))\n  peer.addrs.forEach((a) => info.multiaddrs.add(a))\n\n  return info\n}\n\nmodule.exports = Message\n"},"lineCount":null}},"error":null,"hash":"484e6ed67822ed18a6e110a327365946","cacheData":{"env":{}}}